<!DOCTYPE html>
<html lang="zh_cn">
<head>

        <title>[Linux环境搭建] Debian如何安装配置Tomcat9</title>
        <meta charset="utf-8"/>
        <meta name="description" content="




安装 参考文档: https://www.howtoforge.com/tutorial/ubuntu-apache-tomcat/ 推荐: https://gist.github.com/jniltinho/a7bd30288342a5d352e6#file-install_tomcat-sh-L33 安装JDK和配置环境变量(采用下面的配置环境变量/etc/profile), 注意截止到20180709, oracle没有提供debain的32位系统安装tar包,所以这里使用的是32位的jdk1.8 $ nano ~/.bashrc export JAVA_HOME=/usr/lib/jvm/jdk-8-oracle-arm32-vfp-hflt export PATH=$JAVA_HOME/bin:$PATH $ source ~/.bashrc $ echo $JAVA_HOME 添加组和用户 $ sudo groupadd tomcat $ sudo useradd -s /bin/false …">
        <meta name="keywords"
              content="Linux,pelican,github,软件测试,测试框架,测试开发,白盒测试,Selenium,Selenium开发,Vuejs,树莓派,自动化测试,编程语言,大数据,人工智能,开源软件,创业,程序员找工作,移动互联网,生活时尚,情感交流,软件测试,技术博客">


            <link href="https://pingbook.top/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
                  title="PingBook Blog Full Atom Feed"/>


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="../../theme/gumby.css"/>
        <link rel="stylesheet" type="text/css" href="../../theme/style.css"/>
        <link rel="stylesheet" type="text/css" href="../../theme/pygment.css"/>


        <script src="../../theme/js/libs/modernizr-2.6.2.min.js"></script>



        <!---->

</head>

<body id="index" class="home">


<div class="container">

    <div class="row">

        <header id="banner" class="body">
            <h1><a href="../..">PingBook Blog <strong>import this</strong></a></h1>
        </header><!-- /#banner -->

        <div id="navigation" class="navbar row">
            <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>

            <ul class="columns" style="width: 100%">
                <li><a href="../../">Home</a></li>

                    <li><a href="/categories">Category</a></li>
                    <li><a href="/archives">Archive</a></li>
                    <li><a href="/tags">Tags</a></li>
                        <li><a
                                href="../../pages/about.html">About</a></li>

            <li >
                <div style="display: block;
    padding: 0 16px;
    white-space: nowrap;
    color: white;
    text-shadow: 0 1px 2px #191a1b, 0 1px 0 #191a1b;
    height: 60px;
    line-height: 58px;
    font-size: 16px;
    font-size: 1rem;">
                <form class="navbar-search" action="../../search.html"
                      onsubmit="return validateForm(this.elements['q'].value);">
                    <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input">
                </form>
                </div>
            </li>

            </ul>


        </div>

    <section id="content" class="body">

        <div class="row">
            <div class="eleven columns">


                <header>
                    <h2 class="entry-title">
                        <a href="../../articles/pi-tomcat/" rel="bookmark"
                           title="Permalink to [Linux环境搭建] Debian如何安装配置Tomcat9">[Linux环境搭建]&nbsp;Debian如何安装配置Tomcat9</a></h2>
                    
                </header>
                <footer class="post-info">
                    <!--<abbr class="published" title="2018-07-09T22:46:39.124456+08:00">-->
                    <!--2018-07-09 22:46:39-->
                    <!--</abbr>-->
                    <!---->
                        <!--<address class="vcard author">By -->
                        <!---->
                            <!--<a class="url fn" href="../../author/walter-hu"> Walter Hu</a>-->
                            <!---->
                        <!--</address>-->
                        <!---->
                    <address class="vcard author" style="font-style:italic;margin-bottom:-10px;">
                        2018-07-09 22:46:39
                            &nbsp;&nbsp; By
                            <a class="url fn" href="../../author/walter-hu">Walter Hu</a>

                        <span id="busuanzi_container_page_pv">, Views <span id="busuanzi_value_page_pv"></span></span>
                        &nbsp;&nbsp;<p style="color:red;">本文出自<a href="https://pingbook.top">PingBook博客</a>,转载请务必保留<a href="../../articles/pi-tomcat/">文章链接</a></p>
                    </address>
                    <hr/>
                </footer><!-- /.post-info -->
                <div class="entry-content">
                    <h2>安装</h2>
<blockquote>
<p>参考文档:<br>
<em> <a href="https://www.howtoforge.com/tutorial/ubuntu-apache-tomcat/">https://www.howtoforge.com/tutorial/ubuntu-apache-tomcat/</a><br>
</em> 推荐: <a href="https://gist.github.com/jniltinho/a7bd30288342a5d352e6#file-install_tomcat-sh-L33">https://gist.github.com/jniltinho/a7bd30288342a5d352e6#file-install_tomcat-sh-L33</a></p>
</blockquote>
<ol>
<li>安装JDK和配置环境变量(采用下面的配置环境变量/etc/profile), 注意截止到20180709,&nbsp;oracle没有提供debain的32位系统安装tar包,所以这里使用的是32位的jdk1.8</li>
</ol>
<div class="highlight"><pre><span class="code-line"><span></span>$ nano ~/.bashrc</span>
<span class="code-line"><span class="nb">export</span> <span class="nv">JAVA_HOME</span><span class="o">=</span>/usr/lib/jvm/jdk-8-oracle-arm32-vfp-hflt</span>
<span class="code-line"><span class="nb">export</span> <span class="nv">PATH</span><span class="o">=</span><span class="nv">$JAVA_HOME</span>/bin:<span class="nv">$PATH</span></span>
<span class="code-line">$ <span class="nb">source</span> ~/.bashrc</span>
<span class="code-line">$ <span class="nb">echo</span> <span class="nv">$JAVA_HOME</span></span>
</pre></div>


<ol>
<li>添加组和用户</li>
</ol>
<div class="highlight"><pre><span class="code-line"><span></span>$ sudo groupadd tomcat</span>
<span class="code-line">$ sudo useradd -s /bin/false -g tomcat -d /opt/tomcat tomcat</span>
</pre></div>


<ul>
<li>下载tomcat9</li>
</ul>
<div class="highlight"><pre><span class="code-line"><span></span>$ tar zxvf jdk1.8.0_171.tar.gz</span>
<span class="code-line">$  sudo nano /etc/profile</span>
<span class="code-line"><span class="nv">JAVA_HOME</span><span class="o">=</span>/home/pi/jdk1.8.0_171</span>
<span class="code-line"><span class="nv">CLASSPATH</span><span class="o">=</span><span class="nv">$JAVA_HOME</span>/lib/</span>
<span class="code-line"><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:<span class="nv">$JAVA_HOME</span>/bin</span>
<span class="code-line"><span class="nb">export</span> PATH JAVA_HOME CLASSPATH</span>
<span class="code-line">$ <span class="nb">source</span> /etc/profile</span>
<span class="code-line">$ java 可能下载的是64位的jdk,但是系统只能运行32位的jdk</span>
<span class="code-line">/bin/javac: cannot execute binary file: Exec format error</span>
<span class="code-line"></span>
<span class="code-line">$ <span class="nb">cd</span> /home/pi</span>
<span class="code-line">$ sudo wget http://apache.cs.utah.edu/tomcat/tomcat-9/v9.0.10/bin/apache-tomcat-9.0.10.tar.gz</span>
<span class="code-line">$  tar zxvf apache-tomcat-9.0.10.tar.gz </span>
<span class="code-line">$ <span class="nb">cd</span> /home/pi/apache-tomcat-9.0.10/</span>
<span class="code-line">$ sudo groupadd tomcat </span>
<span class="code-line">$ sudo useradd -M -s /bin/nologin -g tomcat -d /home/pi/apache-tomcat-9.0.10 tomcat</span>
<span class="code-line">$ sudo chgrp -R tomcat conf</span>
<span class="code-line">$ sudo chmod g+rwx conf</span>
<span class="code-line">$ sudo chmod g+r conf/*</span>
<span class="code-line">$ sudo chown -R tomcat webapps/ work/ temp/ logs/</span>
<span class="code-line">$ sudo chown -R tomcat:tomcat *</span>
<span class="code-line">$ sudo chown -R tomcat:tomcat /home/pi/apache-tomcat-9.0.10</span>
<span class="code-line">$ sudo chmod -R <span class="m">757</span> conf/</span>
<span class="code-line">$ sudo chmod -R <span class="m">757</span> logs/</span>
<span class="code-line">$ sudo chmod -R <span class="m">757</span> webapps/</span>
</pre></div>


<h2>配置&nbsp;tomcat开机启动</h2>
<div class="highlight"><pre><span class="code-line"><span></span>$ sudo nano /etc/systemd/system/tomcat.service</span>
<span class="code-line"><span class="c1"># Systemd unit file for tomcat</span></span>
<span class="code-line"><span class="o">[</span>Unit<span class="o">]</span></span>
<span class="code-line"><span class="nv">Description</span><span class="o">=</span>Apache Tomcat Web Application Container</span>
<span class="code-line"><span class="nv">After</span><span class="o">=</span>syslog.target network.target</span>
<span class="code-line"><span class="o">[</span>Service<span class="o">]</span></span>
<span class="code-line"><span class="nv">Type</span><span class="o">=</span>forking</span>
<span class="code-line"><span class="nv">Environment</span><span class="o">=</span><span class="nv">JAVA_HOME</span><span class="o">=</span>/home/pi/jdk1.8.0_171</span>
<span class="code-line"><span class="nv">Environment</span><span class="o">=</span><span class="nv">CATALINA_PID</span><span class="o">=</span>/home/pi/apache-tomcat-9.0.10/temp/tomcat.pid</span>
<span class="code-line"><span class="nv">Environment</span><span class="o">=</span><span class="nv">CATALINA_HOME</span><span class="o">=</span>/home/pi/apache-tomcat-9.0.10</span>
<span class="code-line"><span class="nv">Environment</span><span class="o">=</span><span class="nv">CATALINA_BASE</span><span class="o">=</span>/home/pi/apache-tomcat-9.0.10</span>
<span class="code-line"><span class="nv">Environment</span><span class="o">=</span><span class="s1">&#39;CATALINA_OPTS=-Xms512M -Xmx824M -server -XX:+UseParallelGC&#39;</span></span>
<span class="code-line"><span class="nv">Environment</span><span class="o">=</span><span class="s1">&#39;JAVA_OPTS=-Djava.awt.headless=true -Djava.security.egd=file:/dev/./urandom&#39;</span></span>
<span class="code-line"><span class="nv">ExecStart</span><span class="o">=</span>/home/pi/apache-tomcat-9.0.10/bin/startup.sh</span>
<span class="code-line"><span class="nv">ExecStop</span><span class="o">=</span>/bin/kill -15 <span class="nv">$MAINPID</span></span>
<span class="code-line"><span class="nv">User</span><span class="o">=</span>tomcat</span>
<span class="code-line"><span class="nv">Group</span><span class="o">=</span>tomcat</span>
<span class="code-line"><span class="o">[</span>Install<span class="o">]</span></span>
<span class="code-line"><span class="nv">WantedBy</span><span class="o">=</span>multi-user.target</span>
<span class="code-line"></span>
<span class="code-line">$ sudo systemctl daemon-reload</span>
<span class="code-line">$ sudo systemctl start tomcat</span>
<span class="code-line">$ sudo systemctl <span class="nb">enable</span> tomcat</span>
</pre></div>


<h2>Configure Apache Tomcat&nbsp;User</h2>
<div class="highlight"><pre><span class="code-line"><span></span>$ <span class="nb">cd</span> /home/pi/apache-tomcat-9.0.10/conf/</span>
<span class="code-line">$ sudo nano tomcat-users.xml</span>
<span class="code-line">&lt;role <span class="nv">rolename</span><span class="o">=</span><span class="s2">&quot;manager-gui&quot;</span>/&gt;</span>
<span class="code-line">&lt;user <span class="nv">username</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span> <span class="nv">password</span><span class="o">=</span><span class="s2">&quot;admin&quot;</span> <span class="nv">roles</span><span class="o">=</span><span class="s2">&quot;manager-gui,admin-gui&quot;</span>/&gt;</span>
<span class="code-line">$ <span class="nb">cd</span> webapps/manager/META-INF/</span>
<span class="code-line">$ sudo nano context.xml</span>
<span class="code-line">comment:</span>
<span class="code-line">&lt;!--  &lt;Valve <span class="nv">className</span><span class="o">=</span><span class="s2">&quot;org.apache.catalina.valves.RemoteAddrValve&quot;</span></span>
<span class="code-line">         <span class="nv">allow</span><span class="o">=</span><span class="s2">&quot;127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1&quot;</span> /&gt; --&gt;</span>
<span class="code-line"><span class="nv">$cd</span> webapps/host-manager/META-INF/</span>
<span class="code-line"><span class="c1">#sudo nano context.xml</span></span>
<span class="code-line">comment:</span>
<span class="code-line">&lt;!--  &lt;Valve <span class="nv">className</span><span class="o">=</span><span class="s2">&quot;org.apache.catalina.valves.RemoteAddrValve&quot;</span></span>
<span class="code-line">         <span class="nv">allow</span><span class="o">=</span><span class="s2">&quot;127\.\d+\.\d+\.\d+|::1|0:0:0:0:0:0:0:1&quot;</span> /&gt; --&gt;</span>
<span class="code-line">$ sudo systemctl restart tomcat.service</span>
</pre></div>
                </div><!-- /.entry-content -->
                <ul style="list-style-type: none;">
                        <li style="display: inline;margin-left: auto; margin-right: auto;">
                            ◄&nbsp;&nbsp;<a href="../../articles/pi-svn/">
                            [Linux环境搭建]  svn&nbsp;安装配置
                        </a>
                        </li>
                        <li style="display: inline;margin-left: 100px; margin-right: auto;">
                            ►&nbsp;&nbsp;<a href="../../articles/pi-nat123/">
                            [Linux环境搭建]&nbsp;配置采用NAT123进行树莓派部署
                        </a>
                        </li>
                </ul>
                <br />
                <div class="comments">
                    <h3>Relate Articles</h3>
                </div>
                    <div class="comments">
                        <h3>Comments</h3>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
                            var disqus_identifier = "articles/pi-tomcat/";
                            (function () {
                                var dsq = document.createElement('script');
                                dsq.type = 'text/javascript';
                                dsq.async = true;
                                dsq.src = 'https://pingbook.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                            })();
                        </script>
                        <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript>
                    </div>

            </div><!-- /.eleven.columns -->

<div class="three columns">
    <nav class="widget sidebarbg">
        <h4>Navigation</h4>
        <ul>
                <li><a href="/categories">Category</a></li>
                <li><a href="/archives">Archive</a></li>
                <li><a href="/tags">Tags</a></li>
                    <li
><a
                            href="../../pages/about.html">About</a>
                    </li>
        </ul>
    </nav>
        <div class="sidebarbg">
            <nav class="widget">
                <h4>Categories</h4>
                <ul class="blank">
                        <li><a href="../../category/shu-mei-pai/">树莓派</a></li>
                        <li><a href="../../category/mian-shi/">面试</a></li>
                        <li><a href="../../category/linux/">linux</a></li>
                        <li><a href="../../category/bo-ke-da-jian/">博客搭建</a></li>
                        <li><a href="../../category/bigdata/">bigdata</a></li>
                </ul>
            </nav>
        </div>


        <nav class="widget sidebarbg">
            <h4>Tags</h4>
            <ul class="blank">
                    <li class="tag-2"><a href="../../tag/nat123/">NAT123</a></li>
                    <li class="tag-4"><a href="../../tag/software-testing/">Software Testing</a></li>
                    <li class="tag-4"><a href="../../tag/tomcat9/">Tomcat9</a></li>
                    <li class="tag-4"><a href="../../tag/bigdata/">bigdata</a></li>
                    <li class="tag-4"><a href="../../tag/hadoop/">hadoop</a></li>
                    <li class="tag-2"><a href="../../tag/java/">java</a></li>
                    <li class="tag-4"><a href="../../tag/linux/">linux</a></li>
                    <li class="tag-4"><a href="../../tag/list/">list</a></li>
                    <li class="tag-4"><a href="../../tag/mysql/">mysql</a></li>
                    <li class="tag-4"><a href="../../tag/mysqlbei-fen/">mysql备份</a></li>
                    <li class="tag-4"><a href="../../tag/nginx/">nginx</a></li>
                    <li class="tag-2"><a href="../../tag/pelican/">pelican</a></li>
                    <li class="tag-4"><a href="../../tag/python3/">python3</a></li>
                    <li class="tag-4"><a href="../../tag/svn/">svn</a></li>
                    <li class="tag-1"><a href="../../tag/shu-mei-pai/">树莓派</a></li>
                    <li class="tag-4"><a href="../../tag/shu-mei-pai-jing-xiang/">树莓派镜像</a></li>
                    <li class="tag-4"><a href="../../tag/bai-he-ce-shi/">白盒测试</a></li>
                    <li class="tag-4"><a href="../../tag/ruan-jian-ce-shi/">软件测试</a></li>
                    <li class="tag-4"><a href="../../tag/mian-xiang-dui-xiang/">面向对象</a></li>
                    <li class="tag-1"><a href="../../tag/mian-shi/">面试</a></li>
            </ul>
        </nav>

        <div class="social sidebarbg">

            <nav class="widget">
                <h4>Social</h4>
                <ul class="blank">
                        <li><a target="_blank" href="mailto:alterhu2020@gmail.com?subject=From PingBook question">gmail</a></li>
                        <li><a target="_blank" href="https://twitter.com/alterhu2020">twitter</a></li>
                        <li><a target="_blank" href="http://github.com/pingbook">github</a></li>
                </ul>
            </nav>
        </div>
        <nav class="widget sidebarbg">
            <h4>Friends</h4>
            <ul>
                    <li><a target="_blank" href="http://www.cnblogs.com/alterhu/">我的博客园</a></li>
                    <li><a target="_blank" href="http://xiaohanyu.me/about/">[运维]Xiao Hanyu</a></li>
                    <li><a target="_blank" href="http://huangxuan.me/">[前端]黄玄的博客</a></li>
                    <li><a target="_blank" href="http://www.ruanyifeng.com/blog/">[前端]阮一峰</a></li>
            </ul>
        </nav>

</div>        </div><!-- /.row -->


    </section>

    </div><!-- /.row -->
</div><!-- /.container -->


<div class="container.nopad bg">


    <footer id="credits" class="row" style="margin-bottom: 0px">
        <div class="seven columns left-center">

            <address id="about" class="vcard body">
                ©
                <script>document.write(new Date().getFullYear())</script>
                PingBook.Inc.
                <!--<br />-->
                <div>
                    <span id="busuanzi_container_site_pv">Site Views: <span id="busuanzi_value_site_pv"></span></span>,
                    <span id="busuanzi_container_site_uv">Total Vistors: <span
                            id="busuanzi_value_site_uv"></span></span>
                </div>
            </address>
        </div>


        <div class="seven columns">
            <div class="row">
                <ul class="socbtns">





                </ul>
            </div>
        </div>
    </footer>

</div>


<script type="text/javascript">
    var disqus_shortname = 'pingbook';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script src="../../theme/js/libs/jquery-1.9.1.min.js"></script>
<script src="../../theme/js/libs/gumby.min.js"></script>
<script>
    function validateForm(query) {
        return (query.length > 0);
    }
</script>
<script async src="../../theme/js/libs/busuanzi.pure.mini.js"></script>
<script src="../../theme/js/plugins.js"></script>
</body>
</html>