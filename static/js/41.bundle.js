webpackJsonp([41],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-7c805f6d","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/MaterialEnterAdd.vue':function(e,t){},"./src/pages/MaterialEnterAdd.vue":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("./node_modules/babel-runtime/core-js/json/stringify.js"),n=a.n(i),s=a("./node_modules/babel-runtime/helpers/slicedToArray.js"),l=a.n(s),o=a("./node_modules/babel-runtime/core-js/object/entries.js"),r=a.n(o),c=a("./node_modules/vux/src/components/button-tab/button-tab.vue"),u=a("./node_modules/vux/src/components/button-tab/button-tab-item.vue"),d=a("./node_modules/vux/src/components/checklist/index.vue"),h=a("./node_modules/vux/src/components/flexbox/flexbox.vue"),p=a("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),m=a("./node_modules/vux/src/components/load-more/index.vue"),b=a("./node_modules/vux/src/components/popup/index.vue"),g=a("./node_modules/vux/src/components/previewer/index.vue"),v=a("./node_modules/vux/src/components/search/index.vue"),f=a("./node_modules/vux/src/components/x-number/index.vue"),x=a("./node_modules/vux/src/components/x-switch/index.vue"),y=a("./node_modules/vux/src/components/x-textarea/index.vue"),M=a("./node_modules/vux/src/components/datetime/index.vue"),w=a("./src/webconfig.js"),_=a("./src/utils/StoreUtils.js"),k=a("./src/api/index.js"),B=a("./src/utils/StringUtils.js"),L=a("./src/utils/DateUtils.js"),j=(c.a,u.a,b.a,f.a,x.a,y.a,d.a,m.a,h.a,p.a,g.a,v.a,M.a,{name:"MaterialEnterAdd",components:{ButtonTab:c.a,ButtonTabItem:u.a,Popup:b.a,XNumber:f.a,XSwitch:x.a,XTextarea:y.a,Checklist:d.a,LoadMore:m.a,Flexbox:h.a,FlexboxItem:p.a,Previewer:g.a,Search:v.a,Datetime:M.a},data:function(){return{meterialAddTitle:"",projectid:null,materialType:0,showLoadingButton:!1,material:{budgetid:null,date:Object(L.b)("YYYY-MM-DD"),price:0,quantity:1,unit:"",from:"",bills:[],desc:""},budget:{name:"",price:0,quantity:1,unit:""},plan:{name:"",price:0,quantity:1,unit:"",from:"",bills:[],desc:"",usewhere:"",comments:"",department:"",applydate:Object(L.b)("YYYY-MM-DD"),applyname:"",applyusedate:Object(L.b)("YYYY-MM-DD")},machinebudget:{name:"",price:0,quantity:1,unit:""},machine:{name:"",budgetid:null,date:Object(L.b)("YYYY-MM-DD"),price:0,quantity:1,from:"",bills:[],desc:"",usewhere:"",comments:"",department:"",applydate:Object(L.b)("YYYY-MM-DD"),applyname:"",applyusedate:Object(L.b)("YYYY-MM-DD")},showBudgetMaterialPopup:!1,selectedBudgetName:"请选择",searchResults:[],searchModel:"",budgetMaterials:[],storeBudgetMaterials:[],filterBudgetMaterials:[],budgetMaterialsModel:[],billImages:[],showBudgetLaborPopup:!1,selectedAddLaborName:"请选择",searchLaborResults:[],searchLaborModel:"",budgetLabors:[],storeBudgetLabors:[],filterBudgetLabors:[],budgetLaborsModel:[],showBudgetMachinePopup:!1,selectedMachineName:"请选择",searchMachineResults:[],searchMachineModel:"",budgetMachines:[],storeBudgetMachines:[],filterBudgetMachines:[],budgetMachinesModel:[]}},computed:{projectname:function(){return _.a.get(w.a.StoreProject)?_.a.get(w.a.StoreProject).value:"未知项目"}},methods:{searchFocus:function(){this.searchResults=[]},inputSearchChange:function(e){var t=this;t.searchResults=[],this.budgetMaterials.forEach(function(a){Object(B.c)(a.value,e)&&t.searchResults.push({title:a.value,other:a.key})})},clickSearchResult:function(e){this.filterBudgetMaterials=this.budgetMaterials.filter(function(t){return t.value===e.title}),this.budgetMaterialsModel=[this.filterBudgetMaterials[0].key],this.selectedTenderName=this.filterBudgetMaterials[0].value},cancelSearch:function(){},searchLaborFocus:function(){this.searchLaborResults=[]},inputSearchLaborChange:function(e){var t=this;t.searchLaborResults=[],this.budgetLabors.forEach(function(a){Object(B.c)(a.value,e)&&t.searchLaborResults.push({title:a.value,other:a.key})})},clickSearchLaborResult:function(e){this.filterBudgetLabors=this.budgetLabors.filter(function(t){return t.value===e.title}),this.budgetLaborsModel=[this.filterBudgetLabors[0].key],this.selectedLaborName=this.filterBudgetLabors[0].value},cancelLaborSearch:function(){},searchMachineFocus:function(){this.searchMachineResults=[]},inputSearchMachineChange:function(e){var t=this;t.searchMachineResults=[],this.budgetMachines.forEach(function(a){Object(B.c)(a.value,e)&&t.searchMachineResults.push({title:a.value,other:a.key})})},clickSearchMachineResult:function(e){this.filterBudgetMachines=this.budgetMachines.filter(function(t){return t.value===e.title}),this.budgetMachinesModel=[this.filterBudgetMachines[0].key],this.selectedMachineName=this.filterBudgetMachines[0].value},cancelMachineSearch:function(){},saveMaterialChanges:function(){},uploadBillImage:function(){var e=this,t=w.a.ApiServerURI+"/v1/upload/file";this.$device.isWechat?this.$wechat.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(a){var i=a.localIds[0];e.$wechat.uploadImage({localId:i.toString(),isShowProgressTips:1,success:function(a){var i=a.serverId,n=new FormData;r()({type:6}).forEach(function(e){var t=l()(e,2),a=t[0],i=t[1];n.append(a,i)}),n.append("mediaid",i),n.append("projectid",e.projectid),k.b.post(t,n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(1e3===t.data.code){e.loading=!1;var a=t.data.data.url;e.$vux.toast.show({text:"图片上传成功!"}),e.billImages.push({src:"https://static.yitieyilu.com"+a,msrc:"https://static.yitieyilu.com"+a,w:1200,h:900}),e.material.bills=e.billImages}}).catch(function(t){e.loading=!1,e.onError(t,i)})},cancel:function(){e.loading=!1},fail:function(t){e.loading=!1,e.$vux.toast.show({type:"warn",text:"微信接口异常出错无法上传,错误代码:"+n()(t)})}})}}):this.$vux.toast.show({type:"warn",time:6e3,text:"上传图片只能在微信手机端操作，你可以先保存当前录入信息，然后再在手机上修改操作！"})},goNewBudgetPage:function(){1e3===this.materialType?this.$router.push({name:"pmaterialadd",params:{projectid:this.projectid,type:1001}}):1004===this.materialType?this.$router.push({name:"pmaterialadd",params:{projectid:this.projectid,type:1003}}):1006===this.materialType&&this.$router.push({name:"pmaterialadd",params:{projectid:this.projectid,type:1005}})},showBudgetOptionsDlg:function(){1e3===this.materialType?(this.showBudgetMaterialPopup=!0,this.budgetMaterials=this.storeBudgetMaterials):1004===this.materialType?(this.showBudgetLaborPopup=!0,this.budgetLabors=this.storeBudgetLabors):1006===this.materialType&&(this.showBudgetMachinePopup=!0,this.budgetMachines=this.storeBudgetMachines)},selectMaterialChange:function(e,t){1e3===this.materialType?(this.showBudgetMaterialPopup=!1,this.selectedBudgetName=t[0],this.material.budgetid=e[0]):1004===this.materialType?(this.showBudgetLaborPopup=!1,this.selectedLaborName=t[0]):1006===this.materialType&&(this.showBudgetMachinePopup=!1,this.selectedMachineName=t[0],this.machine.budgetid=e[0])},fetchBudgetMaterials:function(){var e=this;k.b.get("/material/get/bb/"+this.projectid).then(function(t){if(1e3===t.data.code){var a=t.data.data;a.items.forEach(function(e){var t=e.Name+"(单位: "+e.Unit+")",a=e.key;e.key=a,e.value=t}),e.storeBudgetMaterials=a.items,e.budgetMaterials=a.items,0<e.budgetMaterials.length&&(e.budgetMaterialsModel=[e.budgetMaterials[0].key])}}).catch(function(e){alert("获取预算材料列表出错，错误代码： "+e)})},fetchBudgetLabor:function(){var e=this;k.b.get("/labor/get/bb/"+this.projectid).then(function(t){if(1e3===t.data.code){var a=t.data.data;a.items.forEach(function(e){var t=e.Name+"(单位: "+e.Unit+")",a=e.key;e.key=a,e.value=t}),e.storeBudgetLabors=a.items,e.budgetLabors=a.items,0<e.budgetLabors.length&&(e.budgetLaborsModel=[e.budgetLabors[0].key])}}).catch(function(e){alert("获取预算人工列表出错，错误代码： "+e)})},fetchBudgetMachine:function(){var e=this;k.b.get("/machine/get/bb/"+this.projectid).then(function(t){if(1e3===t.data.code){var a=t.data.data;a.items.forEach(function(e){var t=e.Name+"(单位: "+e.Unit+")",a=e.key;e.key=a,e.value=t}),e.storeBudgetMachines=a.items,e.budgetMachines=a.items,0<e.budgetMachines.length&&(e.budgetMachinesModel=[e.budgetMachines[0].key])}}).catch(function(e){alert("获取预算机械列表出错，错误代码： "+e)})},saveMaterial:function(){var e=this;this.showLoadingButton=!0;var t={type:1e3,budgetid:this.budgetMaterialsModel[0],date:this.material.date,price:this.material.price,quantity:this.material.quantity,from:this.material.from,bills:this.material.bills,desc:this.material.desc},a={type:1001,projectid:this.projectid,name:this.budget.name,price:this.budget.price,quantity:this.budget.quantity,unit:this.budget.unit},i={type:1002,department:this.plan.department,applydate:this.plan.applydate,applyname:this.plan.applyname,applyusedate:this.plan.applyusedate,projectid:this.projectid,name:this.plan.name,price:this.plan.price,quantity:this.plan.quantity,unit:this.plan.unit,usewhere:this.plan.usewhere,comments:this.plan.comments},n={type:1005,projectid:this.projectid,name:this.machinebudget.name,price:this.machinebudget.price,quantity:this.machinebudget.quantity,unit:this.machinebudget.unit},s={type:1006,budgetid:this.budgetMachinesModel[0],date:this.machine.date,price:this.machine.price,quantity:this.machine.quantity,from:this.machine.from,bills:this.machine.bills,desc:this.machine.desc},l="",o={},r=!1;if(1001===this.materialType){l="/material",o=a;var c="预算材料录入提示";if(null===this.projectid)return this.$vux.alert.show({title:c,content:"无法定位项目名称无法录入!"}),void(this.showLoadingButton=!1);if(!this.budget.name||0>=this.budget.name.length)return this.$vux.alert.show({title:c,content:"预算材料名称: "+this.budget.name+"不能为空!"}),void(this.showLoadingButton=!1);if(""===this.budget.quantity||isNaN(this.budget.quantity))return this.$vux.alert.show({title:c,content:"预算数量: "+parseFloat(this.budget.quantity)+"不能为空,必须大于等于零!"}),void(this.showLoadingButton=!1);if(!this.budget.unit||0>=this.budget.unit.length)return void this.$vux.alert.show({title:c,content:"预算材料计量单位: "+this.budget.unit+"不能为空!"});r=this.projectid&&0<this.budget.name.length&&""!==this.budget.quantity&&0<this.budget.unit.length}else if(1e3===this.materialType){l="/material",o=t;var u="进场材料录入提示";if(null===this.material.budgetid)return this.$vux.alert.show({title:u,content:"必须选择一个该进场材料对应的预算材料!"}),void(this.showLoadingButton=!1);if(""===this.material.price||isNaN(this.material.price))return this.$vux.alert.show({title:u,content:"进场材料单价: "+parseFloat(this.material.price)+"不能空,必须大于零!"}),void(this.showLoadingButton=!1);if(""===this.material.quantity||isNaN(this.material.quantity))return this.$vux.alert.show({title:u,content:"进场材料数量: "+parseFloat(this.material.quantity)+"不能为空,必须大于零!"}),void(this.showLoadingButton=!1);r=null!==this.material.budgetid&&""!==this.material.price&&""!==this.material.quantity}else if(1002===this.materialType){l="/material",o=i;var d="计划材料录入提示";if(null===this.projectid)return this.$vux.alert.show({title:d,content:"无法定位项目名称无法录入!"}),void(this.showLoadingButton=!1);if(!this.plan.name||0>=this.plan.name.length)return this.$vux.alert.show({title:d,content:"计划材料名称: "+this.plan.name+"不能为空!"}),void(this.showLoadingButton=!1);if(""===this.plan.price||isNaN(this.plan.price))return this.$vux.alert.show({title:d,content:"计划材料单价: "+parseFloat(this.plan.price)+"不能为空,必须大于零!"}),void(this.showLoadingButton=!1);if(""===this.plan.quantity||isNaN(this.plan.quantity))return this.$vux.alert.show({title:d,content:"计划材料数量:"+parseFloat(this.plan.quantity)+"不能为空,必须大于零!"}),void(this.showLoadingButton=!1);if(!this.plan.unit||0>=this.plan.unit.length)return this.$vux.alert.show({title:d,content:"计划材料规格计量单位: "+this.plan.unit+"不能为空!"}),void(this.showLoadingButton=!1);r=this.projectid&&0<this.plan.name.length&&""!==this.plan.quantity&&""!==this.plan.price&&0<this.plan.unit.length}else if(1005===this.materialType){l="/machine",o=n;var h="预算机械录入提示";if(null===this.projectid)return this.$vux.alert.show({title:h,content:"无法定位项目名称无法录入!"}),void(this.showLoadingButton=!1);if(!this.machinebudget.name||0>=this.machinebudget.name.length)return this.$vux.alert.show({title:h,content:"预算机械名称: "+this.machinebudget.name+"不能为空!"}),void(this.showLoadingButton=!1);if(""===this.machinebudget.quantity||isNaN(this.machinebudget.quantity))return this.$vux.alert.show({title:h,content:"预算数量: "+parseFloat(this.machinebudget.quantity)+"不能为空,必须大于等于零!"}),void(this.showLoadingButton=!1);if(!this.machinebudget.unit||0>=this.machinebudget.unit.length)return this.$vux.alert.show({title:h,content:"预算机械计量单位: "+this.machinebudget.unit+"不能为空!"}),void(this.showLoadingButton=!1);r=this.projectid&&0<this.machinebudget.name.length&&""!==this.machinebudget.quantity&&0<this.machinebudget.unit.length}else if(1006===this.materialType){l="/machine",o=s;var p="进场机械录入提示";if(null===this.machine.budgetid)return this.$vux.alert.show({title:p,content:"必须选择一个该进场机械对应的预算机械!"}),void(this.showLoadingButton=!1);if(""===this.machine.price||isNaN(this.machine.price))return this.$vux.alert.show({title:p,content:"机械进场单价: "+parseFloat(this.machine.price)+"不能为空，必须大于零!"}),void(this.showLoadingButton=!1);if(""===this.machine.quantity||isNaN(this.machine.quantity))return this.$vux.alert.show({title:p,content:"机械进场数量: "+parseFloat(this.machine.quantity)+"不能为空,必须大于零!"}),void(this.showLoadingButton=!1);r=null!==this.machine.budgetid&&""!==this.machine.price&&""!==this.machine.quantity}r?(this.$vux.loading.show({text:"保存信息中..."}),k.b.post(l,o).then(function(t){e.$vux.loading.hide(),1e3===t.data.code?(e.$vux.toast.show({text:"保存信息成功,二秒后返回到列表!"}),setTimeout(function(){1002===e.materialType?e.$router.push({name:"pmaterialp",params:{projectid:e.projectid}}):1e3===e.materialType||1001===e.materialType?e.$router.push({name:"pmaterial",params:{projectid:e.projectid}}):(1005===e.materialType||1006===e.materialType)&&e.$router.push({name:"pmaterialm",params:{projectid:e.projectid}})},2e3)):e.$vux.alert.show({title:"保存操作错误提示",content:"不能重复录入相同的名称,请修改后重试!"})}).catch(function(t){e.showLoadingButton=!1,e.$vux.loading.hide(),alert("保存信息出错，错误代码： "+t)})):(this.showLoadingButton=!1,this.$vux.alert.show({content:"请检查你的输入是否合法,名称,数量必须大于等于零,计量单位不能为空!"}))}},mounted:function(){this.$store.dispatch("UpdateShowTabbar",!1);var e=this.$route.params.type;this.projectid=this.$route.params.projectid,1e3===parseInt(e)?(this.materialType=1e3,this.meterialAddTitle="进场材料添加",this.fetchBudgetMaterials()):1001===parseInt(e)?(this.materialType=1001,this.meterialAddTitle="预算材料添加"):1002===parseInt(e)?(this.materialType=1002,this.meterialAddTitle="计划采购材料添加"):1003===parseInt(e)?(this.materialType=1003,this.meterialAddTitle="预算人工添加"):1004===parseInt(e)?(this.materialType=1004,this.meterialAddTitle="实际人工添加",this.fetchBudgetLabor()):1005===parseInt(e)?(this.materialType=1005,this.meterialAddTitle="预算机械添加"):1006===parseInt(e)&&(this.materialType=1006,this.meterialAddTitle="进场机械添加",this.fetchBudgetMachine())}}),$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!1}}},[e._v("\n    "+e._s(e.meterialAddTitle)+"\n  ")]),e._v(" "),a("div",[1e3==e.materialType?a("div",[a("cell",{attrs:{title:"项目名称"}},[e._v(e._s(e.projectname))]),e._v(" "),a("group",{attrs:{title:"进场材料基本信息"}},[a("datetime",{attrs:{format:"YYYY-MM-DD",title:"进场日期","min-year":2018},model:{value:e.material.date,callback:function(t){e.$set(e.material,"date",t)},expression:"material.date"}}),e._v(" "),a("cell",{attrs:{title:"选择一个预算材料（必填）","inline-desc":"进场材料需要与预算材料保持一致(必填)",value:e.selectedBudgetName,"is-link":""},nativeOn:{click:function(t){return e.showBudgetOptionsDlg(t)}}}),e._v(" "),a("cell",{attrs:{title:"进场单价（必填）"}},[a("x-input",{attrs:{placeholder:"输入该进场材料的价格(必填)"},model:{value:e.material.price,callback:function(t){e.$set(e.material,"price",t)},expression:"material.price"}})],1),e._v(" "),a("cell",{attrs:{title:"进场数量（必填）"}},[a("x-input",{model:{value:e.material.quantity,callback:function(t){e.$set(e.material,"quantity",t)},expression:"material.quantity"}})],1)],1),e._v(" "),a("group",{attrs:{title:"进场材料规格.合格证或化验单等"}},[a("x-textarea",{attrs:{max:100,rows:1,placeholder:"输入该进场材料对应的规格,型号,产地(可选)"},model:{value:e.material.from,callback:function(t){e.$set(e.material,"from",t)},expression:"material.from"}}),e._v(" "),a("cell",{attrs:{title:"上传合格证或材质化验单(进货单）","inline-desc":e.billImages.length>0?"点击查看合格证,材质化验单或进货单(上传成功)":"合格证,材质化验单或进货单(可选)"}},[a("span",[0===e.billImages.length?a("svg",{staticClass:"icon",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"icon","aria-hidden":"true"},on:{click:function(t){e.uploadBillImage()}},slot:"icon"},[a("use",{attrs:{"xlink:href":"#upload"}})]):e._l(e.billImages,function(t,i){return a("span",{key:i},[a("img",{attrs:{src:t.src,alt:"未上传",width:"25",height:"25"},on:{click:function(t){e.$refs.billpreviewer.show(i)}}}),e._v("\n               \n          ")])}),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("previewer",{ref:"billpreviewer",attrs:{list:e.billImages}})],1)],2)]),e._v(" "),a("x-textarea",{attrs:{max:100,rows:2,placeholder:"该进场材料对应的交验结果(可选)"},model:{value:e.material.desc,callback:function(t){e.$set(e.material,"desc",t)},expression:"material.desc"}})],1),e._v(" "),a("br"),e._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button","show-loading":e.showLoadingButton},nativeOn:{click:function(t){return e.saveMaterial(t)}}},[e._v("保存")])],1):1001===e.materialType?a("div",[a("cell",{attrs:{title:"项目名称"}},[e._v(e._s(e.projectname))]),e._v(" "),a("group",{attrs:{title:"预算材料基本信息"}},[a("cell",{attrs:{title:"预算材料名称（必填）"}},[a("x-input",{attrs:{type:"text",placeholder:"请输入该预算材料的名称"},model:{value:e.budget.name,callback:function(t){e.$set(e.budget,"name",t)},expression:"budget.name"}})],1),e._v(" "),a("cell",{attrs:{title:"预算单价"}},[a("x-input",{attrs:{placeholder:"请输入该预算材料的价格"},model:{value:e.budget.price,callback:function(t){e.$set(e.budget,"price",t)},expression:"budget.price"}})],1),e._v(" "),a("cell",{attrs:{title:"预算数量（必填）"}},[a("x-input",{attrs:{width:"150px"},model:{value:e.budget.quantity,callback:function(t){e.$set(e.budget,"quantity",t)},expression:"budget.quantity"}})],1),e._v(" "),a("cell",{attrs:{title:"计量单位（必填）"}},[a("x-input",{attrs:{placeholder:"请输入对应数量的计量单位"},model:{value:e.budget.unit,callback:function(t){e.$set(e.budget,"unit",t)},expression:"budget.unit"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button","show-loading":e.showLoadingButton},nativeOn:{click:function(t){return e.saveMaterial(t)}}},[e._v("保存")])],1):1002===e.materialType?a("div",[a("cell",{attrs:{title:"项目名称"}},[e._v(e._s(e.projectname))]),e._v(" "),a("group",{attrs:{title:"计划材料申请基本信息"}},[a("cell",{attrs:{title:"申请部门或班组"}},[a("x-input",{attrs:{type:"text",placeholder:"请输入计划材料的部门或班组"},model:{value:e.plan.department,callback:function(t){e.$set(e.plan,"department",t)},expression:"plan.department"}})],1),e._v(" "),a("cell",{attrs:{title:"申请时间"}},[a("datetime",{attrs:{placeholder:"请输入计划材料的申请时间",format:"YYYY-MM-DD","min-year":2018},model:{value:e.plan.applydate,callback:function(t){e.$set(e.plan,"applydate",t)},expression:"plan.applydate"}})],1),e._v(" "),a("cell",{attrs:{title:"申请人"}},[a("x-input",{attrs:{type:"text",placeholder:"请输入计划材料的申请人"},model:{value:e.plan.applyname,callback:function(t){e.$set(e.plan,"applyname",t)},expression:"plan.applyname"}})],1),e._v(" "),a("cell",{attrs:{title:"需用日期"}},[a("datetime",{attrs:{placeholder:"请输入计划材料需用日期",format:"YYYY-MM-DD","min-year":2018},model:{value:e.plan.applyusedate,callback:function(t){e.$set(e.plan,"applyusedate",t)},expression:"plan.applyusedate"}})],1)],1),e._v(" "),a("group",{attrs:{title:"计划采购材料详细清单信息"}},[a("cell",{attrs:{title:"材料名称(必填）"}},[a("x-input",{attrs:{type:"text",placeholder:"请输入该计划材料的名称"},model:{value:e.plan.name,callback:function(t){e.$set(e.plan,"name",t)},expression:"plan.name"}})],1),e._v(" "),a("cell",{attrs:{title:"计划采购单价"}},[a("x-input",{attrs:{placeholder:"请输入该计划材料的价格"},model:{value:e.plan.price,callback:function(t){e.$set(e.plan,"price",t)},expression:"plan.price"}})],1),e._v(" "),a("cell",{attrs:{title:"计划采购数量（必填）"}},[a("x-input",{attrs:{width:"150px"},model:{value:e.plan.quantity,callback:function(t){e.$set(e.plan,"quantity",t)},expression:"plan.quantity"}})],1),e._v(" "),a("cell",{attrs:{title:"规格,计量单位（必填）"}},[a("x-input",{attrs:{placeholder:"请输入该计划材料的规格"},model:{value:e.plan.unit,callback:function(t){e.$set(e.plan,"unit",t)},expression:"plan.unit"}})],1),e._v(" "),a("cell",{attrs:{title:"使用部位"}},[a("x-input",{attrs:{placeholder:"请输入该计划材料的使用部位"},model:{value:e.plan.usewhere,callback:function(t){e.$set(e.plan,"usewhere",t)},expression:"plan.usewhere"}})],1),e._v(" "),a("x-textarea",{attrs:{max:100,rows:3,placeholder:"请输入该计划材料的备注信息"},model:{value:e.plan.comments,callback:function(t){e.$set(e.plan,"comments",t)},expression:"plan.comments"}})],1),e._v(" "),a("br"),e._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button","show-loading":e.showLoadingButton},nativeOn:{click:function(t){return e.saveMaterial(t)}}},[e._v("保存")])],1):1005===e.materialType?a("div",[a("cell",{attrs:{title:"项目名称"}},[e._v(e._s(e.projectname))]),e._v(" "),a("group",{attrs:{title:"机械机械台班信息"}},[a("cell",{attrs:{title:"机械名称（必填）"}},[a("x-input",{attrs:{type:"text",placeholder:"请输入该机械的名称"},model:{value:e.machinebudget.name,callback:function(t){e.$set(e.machinebudget,"name",t)},expression:"machinebudget.name"}})],1),e._v(" "),a("cell",{attrs:{title:"台班单价"}},[a("x-input",{attrs:{placeholder:"请输入该机械台班的单价"},model:{value:e.machinebudget.price,callback:function(t){e.$set(e.machinebudget,"price",t)},expression:"machinebudget.price"}})],1),e._v(" "),a("cell",{attrs:{title:"预算数量（必填）"}},[a("x-input",{attrs:{width:"150px"},model:{value:e.machinebudget.quantity,callback:function(t){e.$set(e.machinebudget,"quantity",t)},expression:"machinebudget.quantity"}})],1),e._v(" "),a("cell",{attrs:{title:"计量单位（必填）"}},[a("x-input",{attrs:{placeholder:"请输入对应数量的计量单位"},model:{value:e.machinebudget.unit,callback:function(t){e.$set(e.machinebudget,"unit",t)},expression:"machinebudget.unit"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button","show-loading":e.showLoadingButton},nativeOn:{click:function(t){return e.saveMaterial(t)}}},[e._v("保存")])],1):1006===e.materialType?a("div",[a("cell",{attrs:{title:"项目名称"}},[e._v(e._s(e.projectname))]),e._v(" "),a("group",{attrs:{title:"进场机械信息"}},[a("datetime",{attrs:{format:"YYYY-MM-DD",title:"进场日期","min-year":2018},model:{value:e.machine.date,callback:function(t){e.$set(e.machine,"date",t)},expression:"machine.date"}}),e._v(" "),a("cell",{attrs:{title:"选择一个预算机械（必填）","inline-desc":"进场机械名称需要与预算机械名称保持一致(必填)",value:e.selectedMachineName,"is-link":""},nativeOn:{click:function(t){return e.showBudgetOptionsDlg(t)}}}),e._v(" "),a("cell",{attrs:{title:"进场单价（必填）"}},[a("x-input",{attrs:{placeholder:"输入改机械台班单价(必填)"},model:{value:e.machine.price,callback:function(t){e.$set(e.machine,"price",t)},expression:"machine.price"}})],1),e._v(" "),a("cell",{attrs:{title:"进场数量（必填）"}},[a("x-input",{attrs:{width:"150px"},model:{value:e.machine.quantity,callback:function(t){e.$set(e.machine,"quantity",t)},expression:"machine.quantity"}})],1)],1),e._v(" "),a("group",[a("x-textarea",{attrs:{max:100,rows:1,placeholder:"输入该进场机械对应的规格,型号,产地(可选)"},model:{value:e.machine.from,callback:function(t){e.$set(e.machine,"from",t)},expression:"machine.from"}}),e._v(" "),a("cell",{attrs:{title:"上传机械照片","inline-desc":e.billImages.length>0?"点击查看机械照片(上传成功)":""}},[a("span",[0===e.billImages.length?a("svg",{staticClass:"icon",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"icon","aria-hidden":"true"},on:{click:function(t){e.uploadBillImage()}},slot:"icon"},[a("use",{attrs:{"xlink:href":"#upload"}})]):e._l(e.billImages,function(t,i){return a("span",{key:i},[a("img",{attrs:{src:t.src,alt:"未上传",width:"25",height:"25"},on:{click:function(t){e.$refs.billpreviewer.show(i)}}}),e._v("\n               \n          ")])}),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("previewer",{ref:"billpreviewer",attrs:{list:e.billImages}})],1)],2)])],1),e._v(" "),a("br"),e._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button","show-loading":e.showLoadingButton},nativeOn:{click:function(t){return e.saveMaterial(t)}}},[e._v("保存")])],1):e._e()]),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showBudgetMaterialPopup,callback:function(t){e.showBudgetMaterialPopup=t},expression:"showBudgetMaterialPopup"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showBudgetMaterialPopup=!1}}},[e._v("\n        当前项目入库的预算材料列表\n      ")]),e._v(" "),e.budgetMaterials.length>0?a("div",[a("search",{ref:"search",attrs:{placeholder:"输入要查询的预算材料名称",position:"absolute","auto-scroll-to-top":"",top:"46px",results:e.searchResults},on:{"on-focus":e.searchFocus,"on-change":e.inputSearchChange,"on-result-click":e.clickSearchResult,"on-cancel":e.cancelSearch},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}}),e._v(" "),a("checklist",{attrs:{title:"请勾选该进场材料对应的一个预算材料",max:1,options:e.budgetMaterials},on:{"on-change":e.selectMaterialChange},model:{value:e.budgetMaterialsModel,callback:function(t){e.budgetMaterialsModel=t},expression:"budgetMaterialsModel"}})],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.budgetMaterials.length,expression:"budgetMaterials.length === 0"}]},[a("load-more",{staticStyle:{"padding-top":"30px"},attrs:{"show-loading":!1,tip:"当前项目没有任何入库的预算材料!","background-color":"#fbf9fe"}}),e._v(" "),a("flexbox",[a("flexbox-item",{attrs:{span:2}}),e._v(" "),a("flexbox-item",[a("x-button",{attrs:{type:"primary","action-type":"button"},nativeOn:{click:function(t){return e.goNewBudgetPage(t)}}},[e._v("新建预算材料\n            ")])],1),e._v(" "),a("flexbox-item",{attrs:{span:2}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showBudgetLaborPopup,callback:function(t){e.showBudgetLaborPopup=t},expression:"showBudgetLaborPopup"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showBudgetLaborPopup=!1}}},[e._v("\n        当前项目入库的预算人工工种列表\n      ")]),e._v(" "),e.budgetLabors.length>0?a("div",[a("search",{ref:"search",attrs:{placeholder:"输入要查询的预算人工工种名称",position:"absolute","auto-scroll-to-top":"",top:"46px",results:e.searchLaborResults},on:{"on-focus":e.searchLaborFocus,"on-change":e.inputSearchLaborChange,"on-result-click":e.clickSearchLaborResult,"on-cancel":e.cancelLaborSearch},model:{value:e.searchLaborModel,callback:function(t){e.searchLaborModel=t},expression:"searchLaborModel"}}),e._v(" "),a("checklist",{attrs:{title:"请勾选该进场工种名称对应的一个预算工种名称",max:1,options:e.budgetLabors},on:{"on-change":e.selectMaterialChange},model:{value:e.budgetLaborsModel,callback:function(t){e.budgetLaborsModel=t},expression:"budgetLaborsModel"}})],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.budgetLabors.length,expression:"budgetLabors.length === 0"}]},[a("load-more",{staticStyle:{"padding-top":"30px"},attrs:{"show-loading":!1,tip:"当前项目没有任何入库的预算人工!","background-color":"#fbf9fe"}}),e._v(" "),a("flexbox",[a("flexbox-item",{attrs:{span:2}}),e._v(" "),a("flexbox-item",[a("x-button",{attrs:{type:"primary","action-type":"button"},nativeOn:{click:function(t){return e.goNewBudgetPage(t)}}},[e._v("新建预算人工\n            ")])],1),e._v(" "),a("flexbox-item",{attrs:{span:2}})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showBudgetMachinePopup,callback:function(t){e.showBudgetMachinePopup=t},expression:"showBudgetMachinePopup"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showBudgetMachinePopup=!1}}},[e._v("\n        当前项目入库的预算机械列表\n      ")]),e._v(" "),e.budgetMachines.length>0?a("div",[a("search",{ref:"search",attrs:{placeholder:"输入要查询的预算机械名称",position:"absolute","auto-scroll-to-top":"",top:"46px",results:e.searchMachineResults},on:{"on-focus":e.searchMachineFocus,"on-change":e.inputSearchMachineChange,"on-result-click":e.clickSearchMachineResult,"on-cancel":e.cancelMachineSearch},model:{value:e.searchMachineModel,callback:function(t){e.searchMachineModel=t},expression:"searchMachineModel"}}),e._v(" "),a("checklist",{attrs:{title:"请勾选该进场机械对应的一个预算机械",max:1,options:e.budgetMachines},on:{"on-change":e.selectMaterialChange},model:{value:e.budgetMachinesModel,callback:function(t){e.budgetMachinesModel=t},expression:"budgetMachinesModel"}})],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.budgetMachines.length,expression:"budgetMachines.length === 0"}]},[a("load-more",{staticStyle:{"padding-top":"30px"},attrs:{"show-loading":!1,tip:"当前项目没有任何入库的预算机械!","background-color":"#fbf9fe"}}),e._v(" "),a("flexbox",[a("flexbox-item",{attrs:{span:2}}),e._v(" "),a("flexbox-item",[a("x-button",{attrs:{type:"primary","action-type":"button"},nativeOn:{click:function(t){return e.goNewBudgetPage(t)}}},[e._v("新建预算机械\n            ")])],1),e._v(" "),a("flexbox-item",{attrs:{span:2}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var T=a("./node_modules/vue-loader/lib/component-normalizer.js")(j,$,!1,function(e){a('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-7c805f6d","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/MaterialEnterAdd.vue')},"data-v-7c805f6d",null);t.default=T.exports}});