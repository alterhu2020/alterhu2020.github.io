(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{337:function(e,a,t){"use strict";t.r(a);var s=t(9),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v('ArtiPub (Article Publisher的简称，意为"文章发布者")是一款开源的一文多发平台，可以帮助文章作者将编写好的文章自动发布到掘金、SegmentFault、CSDN、知乎、开源中国等技术媒体平台，传播优质知识，获取最大的曝光度。ArtiPub安装简单，提供了多种安装方式，可以一键安装使用，安装一般只要5分钟。')]),e._v(" "),t("ClientOnly",[t("in-article-adsense",{attrs:{"ins-style":"display:block; text-align:center;","data-ad-slot":"7727965566"}})],1),e._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#服务端配置"}},[e._v("服务端配置")])]),t("li",[t("a",{attrs:{href:"#客户端配置"}},[e._v("客户端配置")])]),t("li",[t("a",{attrs:{href:"#真机或者模拟器配置"}},[e._v("真机或者模拟器配置")])]),t("li",[t("a",{attrs:{href:"#错误问题"}},[e._v("错误问题")])])])]),t("p"),e._v(" "),t("h2",{attrs:{id:"服务端配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务端配置"}},[e._v("#")]),e._v(" 服务端配置")]),e._v(" "),t("ol",[t("li",[t("p",[e._v("在appium-desktop中下载对应的Windows安装包，下载地址： https://github.com/appium/appium-desktop/releases")])]),e._v(" "),t("li",[t("p",[e._v("打开命令行切换到appium-desktop安装路径，确认是否配置正确：")])])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("npm install appium-doctor -g\n> appium-doctor --ios  检测ios设备配置信息\n> appium-doctor --android 检测android设备配置信息\n")])])]),t("p",[e._v("Appium的客户端和服务端之间进行通信都必须在一个Session的上下文中进行。客户端在发起通信的时候首先会发送一个叫作“Desired Capabilities”的JSON对象给服务器。服务器收到该数据后，会创建一个session并将session的ID返回到客户端。之后客户端可以用该session的ID发送后续的命令。")]),e._v(" "),t("p",[e._v("Android（版本>4.3）：UIAutomator，Android 4.3之后系统自带的UI自动化测试工具\niOS：UIAutomation，iOS系统自带的UI自动化测试工具。")]),e._v(" "),t("p",[e._v("电脑（client）上运行自动化测试脚本，调用的是webdriver的接口，appium server接收到我们client上发送过来的命令后他会将这些命令转换为UIautomator认识的命令，然后由UIautomator来在设备上执行自动化")]),e._v(" "),t("p",[e._v("Appium Server的图形界面。 可以设置选项，启动/停止服务器，查看日志等...也不需要使用Node 的NPM来安装Appium，因为Node运行时与Appium Desktop捆绑在一起。")]),e._v(" "),t("p",[e._v("Appium的客户端和服务端之间进行通信都必须在一个Session的上下文中进行。客户端在发起通信的时候首先会发送一个叫作“Desired Capabilities”的JSON对象给服务器。服务器收到该数据后，会创建一个session并将session的ID返回到客户端。之后客户端可以用该session的ID发送后续的命令。")]),e._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[e._v("安装安卓SDK（可以对手机进行连接操作，包括获取id，设备名，包名等）")])]),e._v(" "),t("p",[e._v("1、下载安卓SDK安装包，地址：http://tools.android-studio.org/index.php/sdk")]),e._v(" "),t("p",[e._v("2、安装完成或者解压完成后，进入目录中打开：SDK Manager.exe")]),e._v(" "),t("p",[e._v("3、我们使用真机测试，不需要安装模拟器镜像，暂时只需要安装Tools和Platform-tools，以后有需要可以继续安装")]),e._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[e._v("获取手机的设备信息")])]),e._v(" "),t("p",[e._v("4.1. 打开命令提示符，定位到"),t("strong",[e._v("platform-tools")]),e._v("的目录下，输入："),t("code",[e._v("adb devices")]),e._v(" 命令查看连接的手机。")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("E:\\AndroidSDK\\platform-tools>adb devices\n* daemon not running; starting now at tcp:5037\n* daemon started successfully\nList of devices attached\n688190fa0705    device\n")])])]),t("p",[e._v("4.2. 打开小米手机在设置——我的设备——全部参数中，记下“Android版本”的版本号。\n4.3.  清空后台的所有程序，打开计算器，然后打开命令提示符，定位到adb所在的目录路径\n，输入命令：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('adb shell\ndumpsys window | grep "mCurrentFocus"\n')])])]),t("p",[e._v("记下当前激活的窗口： com.miui.calculator和com.miui.calculator.cal.CalculatorActivity\n"),t("img",{attrs:{src:"https://raw.githubusercontent.com/alterhu2020/StorageHub/master/img/20200903082117-2020-09-03.png",alt:"20200903082117-2020-09-03"}})]),e._v(" "),t("p",[e._v("4.4 启动appium-desktop，点击右上角的放大镜，在弹出的页面中输入前面3步所获取到的值，然后点击Start Session即可连接，如图：\n"),t("img",{attrs:{src:"https://raw.githubusercontent.com/alterhu2020/StorageHub/master/img/20200903082236-2020-09-03.png",alt:"20200903082236-2020-09-03"}})]),e._v(" "),t("p",[e._v("打开新的session窗口后在"),t("code",[e._v("Desired Capabilities")]),e._v("中输入如下配置参数：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('{\n  "deviceName": "688190fa0705",\n  "platformVersion": "10 QKQ1.19104.001",\n  "platformName": "Android",\n  "appPackage": "com.miui.calculator",\n  "appActivity": "com.miui.calculator.cal.CalculatorActivity"\n}\n')])])]),t("p",[e._v("点击“"),t("strong",[e._v("Start Session")]),e._v('" 进行调试运行。')]),e._v(" "),t("h2",{attrs:{id:"客户端配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户端配置"}},[e._v("#")]),e._v(" 客户端配置")]),e._v(" "),t("p",[e._v("比如对应的python的客户端包：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("pip install appium-python-client\n")])])]),t("p",[e._v("编写客户端代码（python），点击运行即可驱动真机进行计算")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("from appium import webdriver # 导入appium包\nimport time\n\n# 连接手机app初始化的一些信息\ndesc = {}\ndesc['deviceName']='PNMxxxxxxxxxUQK'# 手机设备名称，adb devices\ndesc['platformVersion']='5.0.2'# 手机版本，在手机中：设置--关于手机\ndesc['platformName']='Android' # 手机类型，ios或android\ndesc['appPackage']='com.miui.calculator'#包名\ndesc['appActivity']='com.miui.calculator.cal.CalculatorActivity'#启动入口\n\ndriver=webdriver.Remote('http://127.0.0.1:4723/wd/hub',desc)#访问服务接口，并启动手机app\n\ntime.sleep(20)\ndriver.find_element_by_id('com.miui.calculator:id/btn_6_s').click()\ntime.sleep(2)\ndriver.find_element_by_id('com.miui.calculator:id/btn_plus_s').click()\ndriver.find_element_by_id('com.miui.calculator:id/btn_2_s').click()\ndriver.find_element_by_id('com.miui.calculator:id/btn_equal_s').click()\n\ndriver.quit()\n")])])]),t("h2",{attrs:{id:"真机或者模拟器配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#真机或者模拟器配置"}},[e._v("#")]),e._v(" 真机或者模拟器配置")]),e._v(" "),t("ol",[t("li",[e._v("打开USB调试")])]),e._v(" "),t("p",[e._v("设置——我的设备——全部参数——对着“MIUI版本”那一项点7次，会提示开发者选项打开。然后回到 设置——更多设置——开发者选项，将“"),t("strong",[e._v("开启开发者选项")]),e._v("”、“"),t("strong",[e._v("USB调试")]),e._v("”的开关设置为开启状态。\n"),t("img",{attrs:{src:"https://raw.githubusercontent.com/alterhu2020/StorageHub/master/img/20200903081628-2020-09-03.png",alt:"20200903081628-2020-09-03"}})]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[e._v('在点击“Start Sesssion"后记得点击允许安装对应的'),t("strong",[e._v("appium-settings.apk")]),e._v("和 "),t("strong",[e._v("appium-uiautomator2-server-v4.11.0.apk")]),e._v("包，或者也可以自己进行安装，安装包位置位于appium的安装目录下面：")])]),e._v(" "),t("p",[t("code",[e._v("E:\\\\WindowsApps\\\\Appium-windows-1.18.0-1\\\\resources\\\\app\\\\node_modules\\\\appium\\\\node_modules\\\\io.appium.settings\\\\apks\\\\settings_apk-debug.apk")])]),e._v(" "),t("h2",{attrs:{id:"错误问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#错误问题"}},[e._v("#")]),e._v(" 错误问题")]),e._v(" "),t("ol",[t("li",[e._v("An unknown server-side error occurred while processing the command. Original error: Neither ANDROID_HOME nor ANDROID_SDK_ROOT environment variable was exported. Read https://developer.android.com/studio/command-line/variables for more details")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://raw.githubusercontent.com/alterhu2020/StorageHub/master/img/20200903081012-2020-09-03.png",alt:"20200903081012-2020-09-03"}})]),e._v(" "),t("p",[e._v("解决方法： 按照提示在环境变量里面添加： "),t("code",[e._v("ANDROID_HOME")])]),e._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[e._v("An unknown server-side error occurred while processing the command. Original error: pkg: /data/local/tmp/appium_cache/728413456b8xxxxxxxxxxxxd6bd577ca6418.apk Failure [INSTALL_FAILED_USER_RESTRICTED]")])]),e._v(" "),t("p",[e._v("解决方法： 请在开发者选项中打开USB安装、USB调试（安全设置）的开关。开关打开后，会安装一个"),t("strong",[e._v("appium setting")]),e._v("的APP，安装完即可进行连接。")]),e._v(" "),t("ol",{attrs:{start:"3"}},[t("li",[e._v("An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: 'Command 'E:\\AndroidSDK\\platform-tools\\adb.exe -P 5037 -s 688190fa0705 install -g E:\\WindowsApps\\Appium-windows-1.18.0-1\\resources\\app\\node_modules\\appium\\node_modules\\io.appium.settings\\apks\\settings_apk-debug.apk' exited with code 1'; Stderr: 'adb: failed to install E:\\WindowsApps\\Appium-windows-1.18.0-1\\resources\\app\\node_modules\\appium\\node_modules\\io.appium.settings\\apks\\settings_apk-debug.apk: Failure [INSTALL_FAILED_USER_RESTRICTED: Install canceled by user]'; Code: '1'")])]),e._v(" "),t("p",[e._v("解决方法： 打开Session后会在你的手机设备上安装一个appium-settings.apk的安装包，很多手机会阻止安装，你需要打开你的手机，在弹出的提示里允许进行操作安装apk。")]),e._v(" "),t("ol",{attrs:{start:"4"}},[t("li",[e._v("An unknown server-side error occurred while processing the command. Original error: Error executing adbExec. Original error: 'Command 'E:\\AndroidSDK\\platform-tools\\adb.exe -P 5037 -s 688190fa0705 install -r --no-incremental E:\\WindowsApps\\Appium-windows-1.18.0-1\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.11.0.apk' exited with code 1'; Stderr: 'adb: failed to install E:\\WindowsApps\\Appium-windows-1.18.0-1\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.11.0.apk: Failure [INSTALL_FAILED_USER_RESTRICTED: Install canceled by user]'; Code: '1'")])]),e._v(" "),t("p",[e._v("解决方法： 同上步骤，你需要在你的手机设备上允许安装一个操作安卓设备的"),t("strong",[e._v("uiautomator2")]),e._v("，名称为： appium-uiautomator2-server-v4.11.0.apk")])],1)}),[],!1,null,null,null);a.default=r.exports}}]);