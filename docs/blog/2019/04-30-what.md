---
title: 4月30日整理
---

## 学习Ionic Vue

### 参考链接

- vue-cli-plugin-ionic [cli3-plugin-ionic](https://github.com/ionic-team/vue-cli-plugin-ionic)
- Vue start app [ionic-vue-conference-app](https://github.com/ionic-team/ionic-vue-conference-app/blob/master/src/views/Tabs.vue)
- Vue ionic author's example [beep](https://github.com/ModusCreateOrg/beep)
- 所有的demo代码：[官方网站demo](https://github.com/ionic-team/ionic-docs/blob/master/src/demos/api/item/index.html)
- Ionc start app [ionic-conference-app](https://github.com/ionic-team/ionic-conference-app/blob/master/src/app/pages/account/account.html)

### 集成步骤

1. 引入库：

```json
 "@ionic/core": "latest",
 "@ionic/vue": "^0.0.4",

```
2. 引入`@ionic/vue`相关组件：

```js
import Vue from 'vue'
import Ionic from '@ionic/vue'
// Ionic all bundle css styles
import '@ionic/core/css/ionic.bundle.css'
import '../assets/css/ionic-variables.css'
Vue.use(Ionic)

```

其中的`ionic-variables.css`为自定义主题样式,内容如下：

```css
/* Ionic Variables and Theming. For more info, please see: */
/* http://ionicframework.com/docs/theming/                 */

/** Ionic CSS Variables **/
:root {
    /** primary **/
    --ion-color-primary: #3880ff;
    --ion-color-primary-rgb: 56, 128, 255;
    --ion-color-primary-contrast: #ffffff;
    --ion-color-primary-contrast-rgb: 255, 255, 255;
    --ion-color-primary-shade: #3171e0;
    --ion-color-primary-tint: #4c8dff;

    /** secondary **/
    --ion-color-secondary: #0cd1e8;
    --ion-color-secondary-rgb: 12, 209, 232;
    --ion-color-secondary-contrast: #ffffff;
    --ion-color-secondary-contrast-rgb: 255, 255, 255;
    --ion-color-secondary-shade: #0bb8cc;
    --ion-color-secondary-tint: #24d6ea;

    /** tertiary **/
    --ion-color-tertiary: #7044ff;
    --ion-color-tertiary-rgb: 112, 68, 255;
    --ion-color-tertiary-contrast: #ffffff;
    --ion-color-tertiary-contrast-rgb: 255, 255, 255;
    --ion-color-tertiary-shade: #633ce0;
    --ion-color-tertiary-tint: #7e57ff;

    /** success **/
    --ion-color-success: #10dc60;
    --ion-color-success-rgb: 16, 220, 96;
    --ion-color-success-contrast: #ffffff;
    --ion-color-success-contrast-rgb: 255, 255, 255;
    --ion-color-success-shade: #0ec254;
    --ion-color-success-tint: #28e070;

    /** warning **/
    --ion-color-warning: #ffce00;
    --ion-color-warning-rgb: 255, 206, 0;
    --ion-color-warning-contrast: #ffffff;
    --ion-color-warning-contrast-rgb: 255, 255, 255;
    --ion-color-warning-shade: #e0b500;
    --ion-color-warning-tint: #ffd31a;

    /** danger **/
    --ion-color-danger: #f04141;
    --ion-color-danger-rgb: 245, 61, 61;
    --ion-color-danger-contrast: #ffffff;
    --ion-color-danger-contrast-rgb: 255, 255, 255;
    --ion-color-danger-shade: #d33939;
    --ion-color-danger-tint: #f25454;

    /** dark **/
    --ion-color-dark: #222428;
    --ion-color-dark-rgb: 34, 34, 34;
    --ion-color-dark-contrast: #ffffff;
    --ion-color-dark-contrast-rgb: 255, 255, 255;
    --ion-color-dark-shade: #1e2023;
    --ion-color-dark-tint: #383a3e;

    /** medium **/
    --ion-color-medium: #989aa2;
    --ion-color-medium-rgb: 152, 154, 162;
    --ion-color-medium-contrast: #ffffff;
    --ion-color-medium-contrast-rgb: 255, 255, 255;
    --ion-color-medium-shade: #86888f;
    --ion-color-medium-tint: #a2a4ab;

    /** light **/
    --ion-color-light: #f4f5f8;
    --ion-color-light-rgb: 244, 244, 244;
    --ion-color-light-contrast: #000000;
    --ion-color-light-contrast-rgb: 0, 0, 0;
    --ion-color-light-shade: #d7d8da;
    --ion-color-light-tint: #f5f6f9;
}

```

3. 修改`App.vue`文件，使得`ion-app`为顶级渲染节点，可以识别不同的设备，从而加载不同的主题样式:

```vue
<template>
  <ion-app>
    <ion-vue-router />
  </ion-app>
</template>

<script>

export default {
  name: 'App',
  methods: {
  }
}
</script>
<style>
</style>

```

4. 路由设置,修改路径为`@ionic/vue`中定制的路由，这个路由跟vue-router是一样的，但是功能可能更多：

```js
import Vue from 'vue'
import { IonicVueRouter } from '@ionic/vue'
import routes from './routes'

Vue.use(IonicVueRouter)

const router = new IonicVueRouter({
  mode: 'history',
  base: process.env.BASE_URL,
  routes: routes
})

export default router


```


## 坑/问题

- 在查看`ion-tabs`时发现用到了**命名视图**，这个确实很坑啊，以前都一直都用到的是通过**命名路由**的方式进行导航的.
认真阅读官方文档：[命名视图](https://router.vuejs.org/zh/guide/essentials/named-views.html)

- `<ion-input>`不能使用`v-model`,两种方式解决：

  * 第一种如下的语法糖代码调整：
  ```
  <ion-input
  :value="selectedOption"
    @ionChange="selectedOption= $event.target.value"
    >
  ```
  * vuejs官方提出了这个问题没有解决，web component不支持，参考[ionic 官方issue](https://github.com/ionic-team/ionic/issues/15532)
  和对应的[vuejs官方issue](https://github.com/vuejs/vue/issues/7830)
  对应的需要提到的[问题](https://github.com/vuejs/rfcs/blob/v-model/active-rfcs/0000-v-model-api-change.md#usage-on-custom-elements)

- `type=number`在`vee-validate`中不起作用，使用了`v-validate="{digits: 4}"`,原因是:
  
  * vee-validate作者提到问题： [github issue](https://github.com/baianat/vee-validate/issues/2043):

  > This is caused by vee-validate trying to validate the field based on their HTML attributes, for `number` fields the decimal rule is automatically added.
     You can turn that behavior off like this:
      ```
      Vue.use(VeeValidate, {
        useConstraintAttrs: false
      });
      ```
The problem is that decimal and integer are conflicting rules by definition, so it is advised not to use both at the same time. So Turning the behavior off is the easiest solution for you.

  然后看到官方文档提到，有些html5的内置类型和属性，是不需要在添加`v-validate`进行详细的验证的，只需要添加一个`v-validate`就可以了，参考：[官方指南](https://baianat.github.io/vee-validate/guide/inferred-rules.html#inferred-rules-reference):

  ## Inferred Rules Reference

This is a table of HTML attributes that is inferred as rules.

| Attribute |   value          | Rule                                                                      |
|-----------|:----------------:|---------------------------------------------------------------------------|
| type      | "email"          |  `email`                                                                  |
| type      | "number"         | `decimal`                                                                 |
| type      | "date"           | `date_format:YYYY-MM-DD`                                                  |
| type      | "datetime-local" | `date_format: YYYY-MM-DDThh:mm`                                           |
| type      | "time"           | `date_format:hh:mm` or `date_format:hh:mm:ss` depending on the step value |
| type      | "week"           | `date_format:YYYY-Www`                                                    |
| type      | "month           | `date_format:YYYY-MM`                                                     |
| min       | val              | `min_value:val`                                                           |
| max       | val              | `max_value:val`                                                           |
| pattern   | rgx              | `regex: rgx`                                                              |
| required  | _none_           | `required`                                                                |
| maxlength | "val"            | `max: val`                                                                |
| minlength | "val"            | `min: val`                                                                |

:::tip
  This feature does not work on custom components, only HTML5 inputs can take advantage from this feature.
  所以还是采用作者的提议，因为我们使用的是`ionic web component`, 所以上面的规则还是不适用
:::


- 同一个页面多表单的校验规则: [multiple form](https://baianat.github.io/vee-validate/examples/scopes.html) ，

> For convenience, you may add the data-vv-scope attribute on the form that owns the inputs, you don't have to add the attribute on every input. You can also pass scope property to the validator expression.  不必每个字段都添加一个scope的属性，这个问题在旧版本中还是需要加上scope的，见问题： [
How to validate two different forms on one page? #1206](https://github.com/baianat/vee-validate/issues/1206)


- ionic 中的`color`自定义： https://ionicframework.com/docs/theming/advanced#colors 