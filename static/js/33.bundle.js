webpackJsonp([33],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-a08c3d58","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoUserCenter.vue':function(e,t){},"./src/mixins/release.js":function(e,t,s){"use strict";s.d(t,"a",function(){return i});var i={computed:{buildRevisionNumber:{get:function(){return"2019-03-27 23:10:26"}}}}},"./src/pages/PanoUserCenter.vue":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("./node_modules/babel-runtime/helpers/slicedToArray.js"),a=s.n(i),r=s("./node_modules/babel-runtime/core-js/object/entries.js"),n=s.n(r),o=s("./src/utils/StoreUtils.js"),l=s("./src/webconfig.js"),c=s("./src/api/index.js"),u=s("./node_modules/vux/src/components/group-title/index.vue"),d=s("./node_modules/vux/src/components/grid/grid.vue"),p=s("./node_modules/vux/src/components/grid/grid-item.vue"),h=s("./src/components/sticky.js"),m=s("./src/mixins/release.js"),g=s("./src/utils/StringUtils.js"),v=s("./src/utils/PlatformUtils.js"),f=(m.a,u.a,d.a,p.a,h.a,{name:"PanoUserCenter",metaInfo:{title:"个人信息"},mixins:[m.a],components:{GroupTitle:u.a,Grid:d.a,GridItem:p.a},directives:{sticky:h.a},data:function(){return{baseVersion:l.a.buildBaseVersion,personInfo:[],superpermssion:!1,adminpermission:!1,managerpermission:!1,expiredUser:!1,expiredTimeLeft:""}},methods:{goNotePage:function(){Object(v.b)()?window.location.href=l.a.ServerBaseUrl+"pnote":this.$router.push({name:"pnote"})},goMaterialPage:function(){Object(v.b)()?window.location.href=l.a.ServerBaseUrl+"pmaterial":this.$router.push({name:"pmaterial"})},goPunishPage:function(){Object(v.b)()?window.location.href=l.a.ServerBaseUrl+"punish":this.$router.push({name:"punish"})},uploadProfilePhoto:function(){var e=this;this.$wechat.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(t){var s=t.localIds[0];e.$wechat.uploadImage({localId:s.toString(),isShowProgressTips:1,success:function(t){var s=t.serverId,i=new FormData;n()({type:4}).forEach(function(e){var t=a()(e,2),s=t[0],r=t[1];i.append(s,r)}),i.append("mediaid",s);var r=l.a.ApiServerURI+"/v1/upload/file";c.b.post(r,i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(1e3===t.data.code){var s=t.data.data.url;if(s){e.personInfo[0].src=s;var i=o.a.get(l.a.StoreUserInfoKey),a=i.customerdata;a.profilepic=s,o.a.set(l.a.StoreUserInfoKey,i);var r={userid:a.userid,profileurl:s};c.b.post("/user/profile/update",r).then(function(t){1e3===t.data.code&&e.$vux.toast.show({text:"更新用户头像成功!"})})}}}).catch(function(e){console.log("错误发生上传用户头像: "+e)})}})}})},fetchUserInfo:function(){if(l.a.usernamepasswordauth){var e=o.a.get(l.a.StoreUserInfoKey),t=e.customerdata,s=e.username,i=Object(g.e)(t.nickname,2,"*"),a={src:t.profilepic?t.profilepic:"https://vrpano.yitieyilu.com/static/img/anonymous.png",fallbackSrc:"https://vrpano.yitieyilu.com/static/img/anonymous.png",title:i||s,desc:("试用账号"===t.accounttype?"试用账号":"授权用户")+"(账号: "+s+")"};this.personInfo.push(a),this.superpermssion=t.super,this.adminpermission=t.admin,this.managerpermission=t.manager}},logout:function(){this.$store.dispatch("ClearUserSession"),o.a.clearall(),this.$router.push({name:"home",query:this.$route.query})}},created:function(){this.$store.dispatch("UpdateShowHeader",!1),this.fetchUserInfo()},activated:function(){this.$store.dispatch("UpdateShowHeader",!1),this.$store.dispatch("UpdateShowTabbar",!0)}}),x={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.expiredUser,expression:"expiredUser"}],attrs:{title:e.expiredTimeLeft,type:"warning","show-icon":""}}),e._v(" "),s("x-header",{staticClass:"userheader",attrs:{slot:"header","left-options":{showBack:!1,backText:"返回"},title:"我的"},slot:"header"},[s("span",{staticStyle:{"font-size":"18px !important","font-weight":"400"},attrs:{slot:"right"},on:{click:function(t){e.$router.push({name:"ucentersettings"})}},slot:"right"},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#shezhi"}})])])]),e._v(" "),s("panel",{staticClass:"personpanel",attrs:{list:e.personInfo,type:"5"},nativeOn:{click:function(t){return e.uploadProfilePhoto(t)}}}),e._v(" "),s("group-title",[e._v(" 施工项目常用工具 ")]),e._v(" "),s("grid",{attrs:{cols:3,"show-lr-borders":!0}},[s("grid-item",{staticClass:"grid-center",attrs:{label:"施工日志"},nativeOn:{click:function(t){return e.goNotePage(t)}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#shigongrizhi"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"材料采购计划"},nativeOn:{click:function(t){e.$router.push({name:"pmaterialp"})}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#cailiaojinchang"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"材料动态"},nativeOn:{click:function(t){return e.goMaterialPage(t)}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#cailiaojinchang"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"人工动态"},nativeOn:{click:function(t){e.$router.push({name:"laborhome"})}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#rengong"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"机械动态"},nativeOn:{click:function(t){e.$router.push({name:"pmaterialm"})}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#jixie"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"工程量动态"},nativeOn:{click:function(t){e.$router.push({name:"pquantity"})}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#completepro"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"审批"},nativeOn:{click:function(t){e.$router.push({name:"pcontract"})}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#hetong"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"奖励违规"},nativeOn:{click:function(t){return e.goPunishPage(t)}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#jiandu"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"施工常用规范"},nativeOn:{click:function(t){e.$router.push({name:"rules"})}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#guifan"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"使用说明"},nativeOn:{click:function(t){e.$router.push({name:"manual"})}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#bangzhushouce"}})])])],1),e._v(" "),s("group",{attrs:{title:""}},[e.superpermssion?s("cell",{attrs:{title:"账号管理","inline-desc":"新建,冻结,删除岗位和账号","is-link":"",link:{name:"superuser"}}}):e._e(),e._v(" "),e.superpermssion?s("cell",{attrs:{title:"定制化功能","inline-desc":"定制化设置公司账号权限","is-link":"",link:{name:"vip"}}}):e._e(),e._v(" "),e.adminpermission?s("cell",{attrs:{title:"公司账号管理","inline-desc":"新建公司职位,账号","is-link":"",link:{name:"adminuser"}}}):e._e()],1),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("br")],1)},staticRenderFns:[]};var b=s("./node_modules/vue-loader/lib/component-normalizer.js")(f,x,!1,function(e){s('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-a08c3d58","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoUserCenter.vue')},"data-v-a08c3d58",null);t.default=b.exports}});