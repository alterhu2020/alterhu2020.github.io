webpackJsonp([51],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-49d84576","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoCustomFeature.vue':function(e,t){},"./src/pages/PanoCustomFeature.vue":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("./node_modules/vux/src/components/group-title/index.vue"),a=s("./node_modules/vux/src/components/grid/grid.vue"),n=s("./node_modules/vux/src/components/grid/grid-item.vue"),r=s("./node_modules/vux/src/components/popup/index.vue"),i=s("./src/components/SearchCheckList.vue"),c=s("./src/api/index.js"),l=(o.a,a.a,n.a,r.a,i.a,{name:"PanoCustomFeature",components:{GroupTitle:o.a,Grid:a.a,GridItem:n.a,Popup:r.a,SearchCheckList:i.a},data:function(){return{showMaterialApproveDlg:!1,selectedCompanyName:"请选择",showCompanyPickupDlg:!1,companiesModel:[],companies:[],projectsModel:[],projects:[],showCompanyProjectsPickUpDlg:!1,selectedProjectName:"请选择",showProjectUsersPickUpDlg:!1,selectUsersName:"请选择",users:[],usersModel:[],showAddProjectUsersDlg:!1}},methods:{showMaterialDlgHandle:function(){var e=this;this.showMaterialApproveDlg=!0,0===this.companiesModel.length&&(this.companies=[],this.companiesModel=[],c.b.get("/company/companys").then(function(t){1e3===t.data.code&&t.data.data.forEach(function(t){e.companies.push({key:t.key.toString(),value:t.value.toString()})})}).catch(function(e){alert("获取公司出错："+e)}))},showCompanyPickupHandle:function(){this.showCompanyPickupDlg=!0},companyChange:function(e,t){var s=this;if(0<e.length){this.selectedCompanyName=t.toString(),this.selectedProjectName="请选择",this.projects=[],this.projectsModel=[];var o=e[0];c.b.get("/project/companies/"+o).then(function(e){1e3===e.data.code&&e.data.data.Items.forEach(function(e){s.projects.push({key:e.key.toString(),value:e.Name.toString()})})}).catch(function(e){alert("获取公司项目列表失败："+e)})}},showCompanyProjectPickupHandle:function(){1===this.companiesModel.length?this.showCompanyProjectsPickUpDlg=!0:this.$vux.toast.show({time:3e3,type:"warn",text:"请选择一个公司再选择项目！"})},projectChange:function(e,t){0<e.length&&(3<=e.length?this.selectedProjectName=t[0]+"等"+e.length+"个项目":this.selectedProjectName=t.toString())},showProjectUserPickupHandle:function(){var e=this;this.showProjectUsersPickUpDlg=!0,0===this.usersModel.length&&(this.users=[],this.usersModel=[],c.b.get("/user/panousers").then(function(t){t.data.data.forEach(function(t){e.users.push({key:t.key.toString(),value:t.value.toString()})})}).catch(function(e){alert("获取对应的所有用户："+e)}))},usersChange:function(e,t){0<e.length&&(3<=e.length?this.selectUsersName=t[0]+"等"+e.length+"个人员":this.selectUsersName=t.toString())},showAddProjectUsersHandle:function(){var e=this;this.showAddProjectUsersDlg=!0,0===this.companiesModel.length&&(this.companies=[],this.companiesModel=[],c.b.get("/company/companys").then(function(t){1e3===t.data.code&&t.data.data.forEach(function(t){e.companies.push({key:t.key.toString(),value:t.value.toString()})})}).catch(function(e){alert("获取公司出错："+e)}))},saveMaterialUsers:function(){var e=this;if(0!==this.projectsModel.length)if(0!==this.usersModel.length){var t={projects:this.projectsModel,users:this.usersModel};c.b.post("/vip/material",t).then(function(t){1e3===t.data.code&&(e.showMaterialApproveDlg=!1,e.$vux.toast.show({time:400,text:"添加审核员成功！"}))}).catch(function(e){alert("设置审批人, "+e)})}else this.$vux.toast.show({time:3e3,type:"warn",text:"请至少选择一个人员！"});else this.$vux.toast.show({time:3e3,type:"warn",text:"请至少选择一个项目！"})},saveProjectUsers:function(){var e=this;if(0!==this.projectsModel.length)if(0!==this.usersModel.length){var t={projects:this.projectsModel,users:this.usersModel};c.b.post("/vip/projectusers",t).then(function(t){1e3===t.data.code&&(e.showAddProjectUsersDlg=!1,e.$vux.toast.show({time:400,text:"添加项目人员成功！"}))}).catch(function(e){alert("添加项目人员失败, "+e)})}else this.$vux.toast.show({time:3e3,type:"warn",text:"请至少选择一个人员！"});else this.$vux.toast.show({time:3e3,type:"warn",text:"请至少选择一个项目！"})}}}),d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("x-header",{attrs:{slot:"header","left-options":{showBack:!0,backText:"返回"},title:"定制化功能"},slot:"header"}),e._v(" "),s("group-title",[e._v(" 定制功能列表(超级管理员可见) ")]),e._v(" "),s("grid",{attrs:{cols:2,"show-lr-borders":!0}},[s("grid-item",{staticClass:"grid-center",attrs:{label:"添加材料审核员"},nativeOn:{click:function(t){return e.showMaterialDlgHandle(t)}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#cailiaojinchang"}})])]),e._v(" "),s("grid-item",{staticClass:"grid-center",attrs:{label:"快速添加项目人员"},nativeOn:{click:function(t){return e.showAddProjectUsersHandle(t)}}},[s("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[s("use",{attrs:{"xlink:href":"#usercenter"}})])])],1),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("popup",{attrs:{height:"100%"},model:{value:e.showMaterialApproveDlg,callback:function(t){e.showMaterialApproveDlg=t},expression:"showMaterialApproveDlg"}},[s("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showMaterialApproveDlg=!1}}},[e._v("\n        添加项目审核员\n      ")]),e._v(" "),s("group",{attrs:{title:"添加项目审核员"}},[s("cell",{attrs:{title:"选择一个公司","is-link":"",value:e.selectedCompanyName},nativeOn:{click:function(t){return e.showCompanyPickupHandle(t)}}}),e._v(" "),s("cell",{attrs:{title:"请选择公司对应的项目","is-link":"",value:e.selectedProjectName},nativeOn:{click:function(t){return e.showCompanyProjectPickupHandle(t)}}}),e._v(" "),s("cell",{attrs:{title:"请选择需要添加到选择项目的审核人员","is-link":"",value:e.selectUsersName},nativeOn:{click:function(t){return e.showProjectUserPickupHandle(t)}}}),e._v(" "),s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.saveMaterialUsers(t)}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("popup",{attrs:{height:"100%"},model:{value:e.showAddProjectUsersDlg,callback:function(t){e.showAddProjectUsersDlg=t},expression:"showAddProjectUsersDlg"}},[s("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showAddProjectUsersDlg=!1}}},[e._v("\n        添加项目人员\n      ")]),e._v(" "),s("group",{attrs:{title:"快速添加项目人员"}},[s("cell",{attrs:{title:"选择一个公司","is-link":"",value:e.selectedCompanyName},nativeOn:{click:function(t){return e.showCompanyPickupHandle(t)}}}),e._v(" "),s("cell",{attrs:{title:"请选择公司对应的项目","is-link":"",value:e.selectedProjectName},nativeOn:{click:function(t){return e.showCompanyProjectPickupHandle(t)}}}),e._v(" "),s("cell",{attrs:{title:"请选择需要添加到选择项目的人员","is-link":"",value:e.selectUsersName},nativeOn:{click:function(t){return e.showProjectUserPickupHandle(t)}}}),e._v(" "),s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.saveProjectUsers(t)}}},[e._v("提交")])],1)],1)],1),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("popup",{attrs:{height:"100%"},model:{value:e.showCompanyPickupDlg,callback:function(t){e.showCompanyPickupDlg=t},expression:"showCompanyPickupDlg"}},[s("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showCompanyPickupDlg=!1}}},[e._v("\n        可选公司列表\n      ")]),e._v(" "),s("search-check-list",{attrs:{data:e.companies,keyword:"公司",max:1},on:{"on-change":e.companyChange},model:{value:e.companiesModel,callback:function(t){e.companiesModel=t},expression:"companiesModel"}})],1)],1),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("popup",{attrs:{height:"100%"},model:{value:e.showCompanyProjectsPickUpDlg,callback:function(t){e.showCompanyProjectsPickUpDlg=t},expression:"showCompanyProjectsPickUpDlg"}},[s("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showCompanyProjectsPickUpDlg=!1}}},[e._v("\n        可选公司下项目列表\n      ")]),e._v(" "),s("search-check-list",{attrs:{data:e.projects,keyword:"公司项目",max:100},on:{"on-change":e.projectChange},model:{value:e.projectsModel,callback:function(t){e.projectsModel=t},expression:"projectsModel"}})],1)],1),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("popup",{attrs:{height:"100%"},model:{value:e.showProjectUsersPickUpDlg,callback:function(t){e.showProjectUsersPickUpDlg=t},expression:"showProjectUsersPickUpDlg"}},[s("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showProjectUsersPickUpDlg=!1}}},[e._v("\n        可选需要添加审核权限人员列表\n      ")]),e._v(" "),s("search-check-list",{attrs:{data:e.users,keyword:"审核员",max:100},on:{"on-change":e.usersChange},model:{value:e.usersModel,callback:function(t){e.usersModel=t},expression:"usersModel"}})],1)],1)],1)},staticRenderFns:[]};var u=s("./node_modules/vue-loader/lib/component-normalizer.js")(l,d,!1,function(e){s('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-49d84576","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoCustomFeature.vue')},"data-v-49d84576",null);t.default=u.exports}});