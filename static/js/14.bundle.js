webpackJsonp([14],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-3344ef78","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoSuperUserManage.vue':function(e,t){},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-6ac06bd6","scoped":false,"hasInlineConfig":false}!./node_modules/vux-loader/src/after-less-loader.js!./node_modules/less-loader/index.js?{"minimize":true,"sourceMap":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/vux/src/components/checker/checker-item.vue':function(e,t){},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-be506736","scoped":false,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/vux/src/components/checker/checker.vue':function(e,t){},"./node_modules/vux/src/components/checker/checker-item.vue":function(e,t,s){"use strict";var n=s("./node_modules/babel-runtime/core-js/json/stringify.js"),o=s.n(n),r=s("./node_modules/babel-runtime/helpers/typeof.js"),a=s.n(r);String,Number,Object,Boolean;var i={name:"checker-item",props:{value:{type:[String,Number,Object],required:!0},disabled:Boolean},watch:{disabled:function(e){e&&"radio"===this.$parent.type&&this.value===this.$parent.currentValue&&(this.$parent.currentValue="")}},computed:{classNames:function(){var e=this,t="string"==typeof this.value||"number"==typeof this.value,s={"vux-tap-active":!this.disabled};if(this.$parent.defaultItemClass&&(s[this.$parent.defaultItemClass]=!0),this.$parent.selectedItemClass){var n=!1;if("radio"===this.$parent.type)t&&this.$parent.currentValue===this.value?n=!0:"object"===a()(this.value)&&l(this.$parent.currentValue,this.value)&&(n=!0);else if("string"==typeof this.value)-1<this.$parent.currentValue.indexOf(this.value)&&(n=!0);else if(this.$parent.currentValue&&this.$parent.currentValue.length){n=0<this.$parent.currentValue.filter(function(t){return l(t,e.value)}).length}s[this.$parent.selectedItemClass]=n}return this.$parent.disabledItemClass&&(s[this.$parent.disabledItemClass]=this.disabled),s}},methods:{select:function(){"radio"===this.$parent.type?this.selectRadio():this.selectCheckbox()},selectRadio:function(){this.disabled||(this.$parent.currentValue===this.value?!this.$parent.radioRequired&&(this.$parent.currentValue=""):this.$parent.currentValue=this.value),this.$emit("on-item-click",this.value,this.disabled)},selectCheckbox:function(){this.$parent.currentValue&&null!==this.$parent.currentValue||(this.$parent.currentValue=[]);var e="string"==typeof this.value||"number"==typeof this.value;if(!this.disabled){var t;-1<(t=e?this.$parent.currentValue.indexOf(this.value):this.$parent.currentValue.map(function(e){return o()(e)}).indexOf(o()(this.value)))?this.$parent.currentValue.splice(t,1):(!this.$parent.max||this.$parent.max&&null!==this.$parent.currentValue&&this.$parent.currentValue.length<this.$parent.max)&&((!this.$parent.currentValue||!this.$parent.currentValue.length)&&(this.$parent.currentValue=[]),this.$parent.currentValue.push(this.value))}this.$emit("on-item-click",this.value,this.disabled)}}};function l(e,t){return o()(e)===o()(t)}var u={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vux-checker-item",class:this.classNames,on:{click:this.select}},[this._t("default")],2)},staticRenderFns:[]};var d=s("./node_modules/vue-loader/lib/component-normalizer.js")(i,u,!1,function(e){s('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-6ac06bd6","scoped":false,"hasInlineConfig":false}!./node_modules/vux-loader/src/after-less-loader.js!./node_modules/less-loader/index.js?{"minimize":true,"sourceMap":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/vux/src/components/checker/checker-item.vue')},null,null);t.a=d.exports},"./node_modules/vux/src/components/checker/checker.vue":function(e,t,s){"use strict";String,String,String,String,String,Number,Array,Object,Number,Boolean;var n={name:"checker",props:{defaultItemClass:String,selectedItemClass:String,disabledItemClass:String,type:{type:String,default:"radio"},value:[String,Number,Array,Object],max:Number,radioRequired:Boolean},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.$emit("input",e),this.$emit("on-change",e)}},data:function(){return{currentValue:this.value}}},o={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"vux-checker-box"},[this._t("default")],2)},staticRenderFns:[]};var r=s("./node_modules/vue-loader/lib/component-normalizer.js")(n,o,!1,function(e){s('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-be506736","scoped":false,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/vux/src/components/checker/checker.vue')},null,null);t.a=r.exports},"./src/pages/PanoSuperUserManage.vue":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("./src/api/index.js"),o=s("./node_modules/vux/src/components/badge/index.vue"),r=s("./node_modules/vux/src/components/box/index.vue"),a=s("./node_modules/vux/src/components/checker/checker.vue"),i=s("./node_modules/vux/src/components/checker/checker-item.vue"),l=s("./node_modules/vux/src/components/flexbox/flexbox.vue"),u=s("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),d=s("./node_modules/vux/src/components/group-title/index.vue"),c=s("./node_modules/vux/src/components/load-more/index.vue"),p=s("./node_modules/vux/src/components/popup/index.vue"),m=s("./node_modules/vux/src/components/popup-picker/index.vue"),v=s("./node_modules/vux/src/components/popup-radio/index.vue"),h=s("./src/utils/StoreUtils.js"),x=s("./src/webconfig.js"),f=s("./src/utils/PlatformUtils.js"),b=s("./src/utils/ElectronUtils.js"),_=(v.a,p.a,d.a,c.a,r.a,l.a,u.a,o.a,m.a,a.a,i.a,{name:"PanoNewUser",metaInfo:{title:"新建账号"},components:{PopupRadio:v.a,Popup:p.a,GroupTitle:d.a,LoadMore:c.a,Box:r.a,Flexbox:l.a,FlexboxItem:u.a,Badge:o.a,PopupPicker:m.a,Checker:a.a,CheckerItem:i.a},data:function(){return{companys:[],admins:[],addAdminUserDialog:!1,companyname:"",parentroleid:"",parentuserid:"",nickname:"",username:"",password:"",accounttype:"1001"}},methods:{showAddAdminPopup:function(){this.addAdminUserDialog=!0},fetchMyFollows:function(){var e=this,t="/user/list/"+this.parentuserid;n.b.get(t).then(function(t){var s=t.data;1e3===s.code&&s.data.items.forEach(function(t){t["showoptions"+t.row]=!1,e.admins.push(t)})})},frozenUser:function(e){var t=this,s="/user/frozea/"+e.userid,o={froze:!e.active};n.b.put(s,o).then(function(s){1e3===s.data.code&&(t.$vux.toast.show({text:"更新用户状态成功"}),e.active=!e.active)})},deleteUser:function(e,t){var s=this,o="/user/del/"+e.userid;n.b.delete(o).then(function(e){1e3===e.data.code&&(s.$vux.toast.show({text:"删除用户成功"}),s.admins.splice(t,1))})},createNewUser:function(){var e=this;if(""!==this.username&&6<=this.password.length&&2<this.companyname.length&&0<this.nickname.length){var t={accounttype:this.accounttype,companyname:this.companyname,parentroleid:this.parentroleid,parentuserid:this.parentuserid,nickname:this.nickname,username:this.username,checkPass:this.password},s=this;this.$vux.loading.show({text:"正在创建账号"}),n.b.post("/user/register",t).then(function(t){var n=t.data.code,o="";1e3===n?(o="创建用户成功!",setTimeout(function(){Object(f.b)()?s.$router.go(0):Object(b.b)()},3e3)):o=1004===n?"你已经注册过该账号无需重复注册!":"请求数据非法,创建用户失败!",e.$vux.loading.hide(),s.$vux.toast.show({text:o})}).catch(function(t){e.$vux.loading.hide(),s.$vux.toast.show({type:"warn",text:"注册失败遇到异常 "+t})})}else this.$vux.loading.hide(),this.$vux.alert.show({content:"当前输入不符合要求: <br/>1. 公司名称不能少于两个字符;<br>2. 公司管理员的姓名不能为空;<br>3. 公司管理员用户名不能为空;<br>4. 登录用户密码不能少于六位;"})}},mounted:function(){this.$store.dispatch("UpdateShowTabbar",!1);var e=h.a.get(x.a.StoreUserInfoKey).customerdata;e.super?(this.parentroleid=e.roleid,this.parentuserid=e.userid):this.$router.push({name:"globalUnhandleException"}),this.fetchMyFollows()}}),g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!1}}},[e._v("新建公司管理员\n  ")]),e._v(" "),s("group",[s("cell",{attrs:{title:"您当前的角色"}},[s("b",[e._v("超级管理员")])])],1),e._v(" "),s("group",[s("cell",{attrs:{title:"新建账号","inline-desc":"新建公司管理员账号","is-link":""},nativeOn:{click:function(t){return e.showAddAdminPopup(t)}}})],1),e._v(" "),s("group-title",[e._v("各公司管理员列表")]),e._v(" "),e.admins.length>0?s("group",[e._l(e.admins,function(t,n){return[s("cell",{key:t.userid,attrs:{title:t.nickname+"("+t.accounttype+")","inline-desc":"账号:"+t.phone+"(公司:"+t.companyname+")","is-link":"","border-intent":!1,"arrow-direction":t["showoptions"+t.row]?"down":"up"},nativeOn:{click:function(e){t["showoptions"+t.row]=!t["showoptions"+t.row]}}},[t.active?s("badge",{staticStyle:{"background-color":"#0bb20c"},attrs:{slot:"icon",text:"正常"},slot:"icon"}):s("badge",{staticStyle:{"background-color":"red"},attrs:{slot:"icon",text:"已冻结"},slot:"icon"})],1),e._v(" "),t["showoptions"+t.row]?s("flexbox",{key:t.row},[s("flexbox-item",[s("x-button",{attrs:{type:"default"},nativeOn:{click:function(s){e.frozenUser(t)}}},[e._v(e._s(t.active?"冻结":"解冻"))])],1),e._v(" "),s("flexbox-item",[s("x-button",{attrs:{type:"warn"},nativeOn:{click:function(s){e.deleteUser(t,n)}}},[e._v("删除")])],1)],1):e._e()]})],2):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0===e.admins.length,expression:"admins.length ===0"}]},[s("br"),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("br"),e._v(" "),s("load-more",{attrs:{"show-loading":!1,tip:"当前系统没有任何公司的管理员!","background-color":"#fbf9fe"}})],1),e._v(" "),s("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[s("popup",{attrs:{height:"100%"},model:{value:e.addAdminUserDialog,callback:function(t){e.addAdminUserDialog=t},expression:"addAdminUserDialog"}},[s("x-header",{attrs:{title:"公司管理员添加/修改","left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.addAdminUserDialog=!1}}}),e._v(" "),s("group",{attrs:{title:"新建公司管理员账号"}},[s("divider",[e._v("账号类型")]),e._v(" "),s("div",{staticClass:"box"},[s("checker",{attrs:{"radio-required":"","default-item-class":"demo1-item","selected-item-class":"demo1-item-selected"},model:{value:e.accounttype,callback:function(t){e.accounttype=t},expression:"accounttype"}},[s("checker-item",{attrs:{value:"1001"}},[e._v("试用账号")]),e._v(" "),s("checker-item",{attrs:{value:"1000"}},[e._v("真实账号")])],1)],1),e._v(" "),s("x-input",{attrs:{title:"公司名称",placeholder:"输入该公司的名称"},model:{value:e.companyname,callback:function(t){e.companyname="string"==typeof t?t.trim():t},expression:"companyname"}}),e._v(" "),s("x-input",{attrs:{title:"姓名",placeholder:"输入该公司管理员的姓名"},model:{value:e.nickname,callback:function(t){e.nickname="string"==typeof t?t.trim():t},expression:"nickname"}}),e._v(" "),s("x-input",{attrs:{title:"登录账号",type:"text",placeholder:"输入该管理员的登录账号名"},model:{value:e.username,callback:function(t){e.username="string"==typeof t?t.trim():t},expression:"username"}}),e._v(" "),s("x-input",{attrs:{title:"密码",placeholder:"密码长度不少于六个字符",type:"password",min:6},model:{value:e.password,callback:function(t){e.password="string"==typeof t?t.trim():t},expression:"password"}}),e._v(" "),s("box",{attrs:{gap:"10px 10px"}},[s("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.createNewUser(t)}}},[e._v("注册")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var y=s("./node_modules/vue-loader/lib/component-normalizer.js")(_,g,!1,function(e){s('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-3344ef78","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoSuperUserManage.vue')},"data-v-3344ef78",null);t.default=y.exports}});