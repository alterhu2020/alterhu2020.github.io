webpackJsonp([62],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-108d00b7","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoContractWorkflow.vue':function(t,e){},"./src/pages/PanoContractWorkflow.vue":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=o("./node_modules/vux/src/components/load-more/index.vue"),l=o("./node_modules/vux/src/components/flexbox/flexbox.vue"),a=o("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),n=o("./node_modules/vux/src/components/spinner/index.vue"),r=o("./node_modules/vux/src/components/x-switch/index.vue"),i=o("./node_modules/vux/src/components/flow/flow.vue"),d=o("./node_modules/vux/src/components/flow/flow-state.vue"),c=o("./node_modules/vux/src/components/flow/flow-line.vue"),u=o("./node_modules/vux/src/components/group-title/index.vue"),f=o("./node_modules/vux/src/components/badge/index.vue"),w=o("./src/components/SearchCheckList.vue"),v=o("./src/api/index.js"),p=o("./src/utils/StoreUtils.js"),m=o("./src/webconfig.js"),h=o("./node_modules/vue-feather-icons/dist/vue-feather-icons.es.js"),k=o("./src/utils/ElectronUtils.js"),x=(s.a,l.a,a.a,w.a,n.a,r.a,i.a,d.a,c.a,h.d,u.a,f.a,{name:"PanoContractWorkflow",components:{LoadMore:s.a,Flexbox:l.a,FlexboxItem:a.a,SearchCheckList:w.a,Spinner:n.a,XSwitch:r.a,Flow:i.a,FlowState:d.a,FlowLine:c.a,PlusIcon:h.d,GroupTitle:u.a,Badge:f.a},data:function(){return{customerdata:null,workflows:[],showWorkflowDetailDlg:!1,workflow:{},showWorkflowUpdateDlg:!1,showAddWorflowSubmit:!0}},methods:{fetchWorkflows:function(){var t=this;v.b.get("/workflow/"+this.customerdata.companyid+"/"+this.customerdata.userid).then(function(e){if(1e3===e.data.code){var o=e.data.data;t.workflows=o}}).catch(function(t){alert("获取签字流列表出错! "+t)})},showWorkflowDetail:function(t){this.showWorkflowDetailDlg=!0,this.workflow=t},updateWorkflow:function(t){this.workflow={UserId:this.customerdata.userid,WorkflowId:t.WorkflowId,Name:t.Name,IsDefault:t.IsDefault?"1":"0",Workflows:t.Workflows,NeedValidate:t.IsDefault},this.showWorkflowUpdateDlg=!0},deleteWorkflow:function(t,e){var o=this;this.$vux.confirm.show({hideOnBlur:!0,title:"确认删除签字流提示",content:"确认继续删除签字流操作?",onCancel:function(){},onConfirm:function(){v.b.delete("/workflow/del/"+t.WorkflowId).then(function(s){1e3===s.data.code&&(o.workflows.splice(e,1),o.$vux.toast.show({type:"success",time:3e3,text:"删除签字流 "+t.Name+" 成功！"}))}).catch(function(t){alert("删除签字流列表出错! "+t)})}})},handleUpdateWorkflowRequest:function(){var t=this;return this.workflow.Name?(this.$vux.loading.show({text:"正在保存修改..."}),this.showAddWorflowSubmit=!1,void v.b.put("/workflow/update",this.workflow).then(function(e){t.$vux.loading.hide(),t.showAddWorflowSubmit=!0,1e3===e.data.code&&(Object(k.b)(),t.$vux.toast.show({type:"success",time:3e3,text:"更新签字流 "+t.workflow.Name+" 成功！"}))}).catch(function(e){t.$vux.loading.hide(),t.showAddWorflowSubmit=!0,alert("更新签字流列表出错! "+e)})):void this.$vux.toast.show({type:"warn",time:4e3,text:"签字流的名称不能为空！"})}},mounted:function(){this.$store.dispatch("UpdateShowHeader",!1),this.$store.dispatch("UpdateShowTabbar",!1);var t=p.a.get(m.a.StoreUserInfoKey);t&&(this.customerdata=t.customerdata),this.fetchWorkflows()}}),_={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("x-header",{attrs:{title:"签字流","left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(e){t.$router.push({name:"pcontract"})}}},[o("span",{staticStyle:{"font-size":"14px"},attrs:{slot:"right"},on:{click:function(e){t.$router.push({name:"pcontractworkflowadd"})}},slot:"right"},[t._v("\n             新建签字流\n          ")])]),t._v(" "),o("div",[o("group-title",[t._v("当前公司签字流列表")]),t._v(" "),t.workflows.length>0?o("div",[o("swipeout",t._l(t.workflows,function(e,s){return o("swipeout-item",{key:s,attrs:{threshold:.5,"underlay-color":"#ccc"}},[o("div",{attrs:{slot:"right-menu"},slot:"right-menu"},[o("swipeout-button",{attrs:{type:"primary"},nativeOn:{click:function(o){t.updateWorkflow(e,s)}}},[t._v("修改")]),t._v(" "),o("swipeout-button",{attrs:{type:"warn"},nativeOn:{click:function(o){t.deleteWorkflow(e,s)}}},[t._v("删除")])],1),t._v(" "),o("div",{staticClass:"project-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[o("cell",{attrs:{"is-link":""},nativeOn:{click:function(o){t.showWorkflowDetail(e)}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("span",{staticStyle:{"vertical-align":"middle"}},[t._v("名称: "+t._s(e.Name))]),t._v(" "),e.default?o("badge",{staticStyle:{"background-color":"#0bb20c"},attrs:{text:"默认"}}):t._e()],1),t._v(" "),o("span",{attrs:{slot:"inline-desc"},slot:"inline-desc"},[t._v("\n                最后更新日期: "+t._s(e.ChangeDate)+"\n              ")])])],1)])}))],1):o("div",[o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("load-more",{attrs:{"show-loading":!1,tip:"没有签字流数据！"}}),t._v(" "),o("flexbox",[o("flexbox-item"),t._v(" "),o("flexbox-item",[o("x-button",{attrs:{type:"primary","action-type":"button",mini:""},nativeOn:{click:function(e){t.$router.push({name:"pcontractworkflowadd"})}}},[t._v("新建签字流\n          ")])],1),t._v(" "),o("flexbox-item")],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showWorkflowDetailDlg,callback:function(e){t.showWorkflowDetailDlg=e},expression:"showWorkflowDetailDlg"}},[o("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(e){t.showWorkflowDetailDlg=!1}}},[t._v("\n        "+t._s(t.workflow.Name)+"详细信息\n      ")]),t._v(" "),o("div",[o("group",[o("cell",{attrs:{title:"签字流名称"}},[t._v(t._s(t.workflow.Name))])],1),t._v(" "),o("group-title",{staticStyle:{"font-size":"14px !important"}},[t._v(" 当前签字流程")]),t._v(" "),o("group",[o("flow",{staticStyle:{height:"200px","margin-left":"-210px"},attrs:{orientation:"vertical"}},[t._l(t.workflow.Workflows,function(e,s){return[o("flow-state",{key:s+"state",attrs:{state:s+1,"is-done":""}},[o("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.title+"("+e.name+")"))])]),t._v(" "),s+1<t.workflow.Workflows.length?o("flow-line",{key:s+"line",attrs:{"is-done":""}}):t._e()]})],2)],1)],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showWorkflowUpdateDlg,callback:function(e){t.showWorkflowUpdateDlg=e},expression:"showWorkflowUpdateDlg"}},[o("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:t.workflow.Name+"修改"},on:{"on-click-back":function(e){t.showWorkflowUpdateDlg=!1}}},[t.showAddWorflowSubmit?o("span",{staticStyle:{"font-size":"16px"},attrs:{slot:"right"},on:{click:t.handleUpdateWorkflowRequest},slot:"right"},[t._v("\n           保存\n           ")]):o("spinner",{attrs:{slot:"right",type:"android",size:"28px"},slot:"right"})],1),t._v(" "),o("div",[o("group",{attrs:{title:"签字流基本设置"}},[o("x-input",{attrs:{title:"名称",placeholder:"输入该签字流的名称"},model:{value:t.workflow.Name,callback:function(e){t.$set(t.workflow,"Name",e)},expression:"workflow.Name"}}),t._v(" "),o("x-switch",{attrs:{title:"设为我的默认签字流","value-map":["0","1"]},model:{value:t.workflow.IsDefault,callback:function(e){t.$set(t.workflow,"IsDefault",e)},expression:"workflow.IsDefault"}})],1),t._v(" "),o("flexbox",[o("flexbox-item",{attrs:{span:10}},[o("group-title",{staticStyle:{"font-size":"14px !important"}},[t._v(" 设置签字流签字流程")])],1)],1),t._v(" "),o("group",[o("flow",{staticStyle:{height:"200px","margin-left":"-210px"},attrs:{orientation:"vertical"}},[t._l(t.workflow.Workflows,function(e,s){return[o("flow-state",{key:s+"state",attrs:{state:s+1,"is-done":""}},[o("span",{attrs:{slot:"title"},slot:"title"},[t._v(" "+t._s(e.title+"("+e.name+")"))])]),t._v(" "),s+1<t.workflow.Workflows.length?o("flow-line",{key:s+"line",attrs:{"is-done":""}}):t._e()]})],2)],1)],1)],1)],1)],1)},staticRenderFns:[]};var b=o("./node_modules/vue-loader/lib/component-normalizer.js")(x,_,!1,function(t){o('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-108d00b7","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoContractWorkflow.vue')},"data-v-108d00b7",null);e.default=b.exports}});