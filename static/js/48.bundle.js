webpackJsonp([48],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-6a4e4b68","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoContract.vue':function(t,e){},"./src/pages/PanoContract.vue":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("./node_modules/vux/src/components/badge/index.vue"),n=o("./node_modules/vux/src/components/flexbox/flexbox.vue"),s=o("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),r=o("./node_modules/vux/src/components/form-preview/index.vue"),i=o("./node_modules/vux/src/components/grid/grid.vue"),c=o("./node_modules/vux/src/components/grid/grid-item.vue"),l=o("./node_modules/vux/src/components/load-more/index.vue"),u=o("./node_modules/vux/src/components/popup/index.vue"),d=o("./node_modules/vux/src/components/previewer/index.vue"),p=o("./node_modules/vux/src/components/scroller/index.vue"),h=o("./node_modules/vux/src/components/x-img/index.vue"),v=o("./node_modules/vux/src/components/group-title/index.vue"),m=o("./node_modules/vux/src/components/msg/index.vue"),b=o("./node_modules/vux/src/components/spinner/index.vue"),w=o("./node_modules/vux/src/components/checklist/index.vue"),x=o("./node_modules/vux/src/components/x-textarea/index.vue"),g=o("./src/utils/StoreUtils.js"),f=o("./src/webconfig.js"),y=o("./src/api/index.js"),C=o("./src/utils/PlatformUtils.js"),_=o("./src/utils/ElectronUtils.js"),k=(i.a,c.a,u.a,l.a,p.a,r.a,h.a,d.a,a.a,n.a,s.a,v.a,m.a,b.a,w.a,x.a,{name:"PanoContract",components:{Grid:i.a,GridItem:c.a,Popup:u.a,LoadMore:l.a,Scroller:p.a,FormPreview:r.a,XImg:h.a,Previewer:d.a,Badge:a.a,Flexbox:n.a,FlexboxItem:s.a,GroupTitle:v.a,Msg:m.a,Spinner:b.a,Checklist:w.a,XTextarea:x.a},data:function(){return{showMakecopyPopup:!1,showRaisePopup:!1,showReviewPopup:!1,contractCollapse:"收起",showContractMenu:!0,toolCollapse:"收起",showToolMenu:!0,userid:"",mycontracts:[],showContractPopupDetail:!1,myContractOffset:0,myContractDetail:{},myContractDetailFile:[],myraisecontracts:[],myRaiseContractOffset:0,mycopycontracts:[],myCopyContractOffset:0,contractType:0,showDetailMaterialDlg:!1,contractnumber:"",materials:{count:0,items:[]},showSubscrible:!1,subscribleBtns:[],batchApprove:!0,batchApproveText:"批量审批",showBatchContractPickupDlg:!1,batchContracts:[],batchContractsModel:[],declinedContractDetail:{},showDeclinedReasonDlg:!1,declinedReason:"",showBatchDeclinedReasonDlg:!1,batchDeclinedReason:"",showDeclinedSubmitBtn:!0,showBatchDeclinedSubmitBtn:!0,disbledAgreeBtn:!1}},methods:{backSubscrible:function(){Object(C.b)()?this.$router.go(0):Object(_.a)()},subscribleGongzhonghao:function(){Object(C.b)()?window.location.href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU4MzU3MzMxOQ==&scene=126&subscene=0#wechat_redirect":this.$vux.toast.show({time:3e3,text:"暂不支持桌面版操作！"})},showDetailMaterial:function(t){t["showdetail"+t.row]=!t["showdetail"+t.row]},showMaterialDetailPage:function(t){var e=this;this.showDetailMaterialDlg=!0,this.materials.count=0,this.materials.items=[],t&&(this.contractnumber=t.Number,this.$vux.loading.show({text:"正在获取进场材料..."}),y.b.get("/contract/material/detail/"+t.PanoProjectContractKey).then(function(t){if(e.$vux.loading.hide(),1e3===t.data.code){var o=t.data.data,a=o.items;e.materials.count=o.count,a.forEach(function(t){t.result.forEach(function(t){t["showdetail"+t.row]=!1})}),e.materials.items=a}}).catch(function(t){e.$vux.loading.hide(),alert("获取进场材料出错,错误代码: "+t)}))},successLoadImage:function(t,e){console.log("success load",t);var o=e.parentNode.querySelector("span");e.parentNode.removeChild(o)},errorLoadImage:function(t,e,o){console.log("error load",o,t),e.parentNode.querySelector("span").innerText="加载图片失败"},refreshMyContract:function(){this.sendRequestForMyReview(0,!0)},loadMoreMyContract:function(){this.sendRequestForMyReview(this.myContractOffset,!0)},showDetailContractInfo:function(t){this.showContractPopupDetail=!0,this.myContractDetail=t,""!==t.ContractFiles&&(this.myContractDetailFile=JSON.parse(t.ContractFiles))},sendRequestForMyReview:function(t,e){var o=this,a="/contract/to/"+this.userid+"/10/"+t;y.b.get(a).then(function(a){var n=a.data.code;if(1e3===n){var s=a.data.data;0===t?o.mycontracts=s:s.forEach(function(t){o.mycontracts.push(t)}),o.myContractOffset=o.mycontracts.length}else 1004===n&&e&&o.$vux.toast.show({text:"已经到底了，没有更多数据了！"});e&&(o.$refs.mycontractscroller.donePullup(),o.$refs.mycontractscroller.donePulldown())})},refreshMyRaiseContract:function(){this.sendRequestFromMime(0,!0)},loadMoreMyRaiseContract:function(){this.sendRequestFromMime(this.myRaiseContractOffset,!0)},sendRequestFromMime:function(t,e){var o=this,a="/contract/from/"+this.userid+"/10/"+t;y.b.get(a).then(function(a){var n=a.data.code;if(1e3===n){var s=a.data.data;0===t?o.myraisecontracts=s:s.forEach(function(t){o.myraisecontracts.push(t)}),o.myRaiseContractOffset=o.myraisecontracts.length}else 1004===n&&o.$vux.toast.show({text:"已经到底了，没有更多数据了！"});e&&(o.$refs.myraisecontractscroller.donePullup(),o.$refs.myraisecontractscroller.donePulldown())})},refreshMyCopyContract:function(){this.sendRequestCopyToMe(0,!0)},loadMoreMyCopyContract:function(){this.sendRequestCopyToMe(this.myCopyContractOffset,!0)},sendRequestCopyToMe:function(t,e){var o=this,a="/contract/copy/"+this.userid+"/10/"+t;y.b.get(a).then(function(a){var n=a.data.code;if(1e3===n){var s=a.data.data;0===t?o.mycopycontracts=s:s.forEach(function(t){o.mycopycontracts.push(t)}),o.myCopyContractOffset=o.mycopycontracts.length}else 1004===n&&o.$vux.toast.show({text:"已经到底了，没有更多数据了！"});e&&(o.$refs.mycopycontractscroller.donePullup(),o.$refs.mycopycontractscroller.donePulldown())})},showReviewPopupHandle:function(){this.showReviewPopup=!0,this.contractType=1,this.sendRequestForMyReview(0,!1)},showRaisePopupHandle:function(){this.showRaisePopup=!0,this.sendRequestFromMime(0,!1)},showMakecopyPopupHandle:function(){this.showMakecopyPopup=!0,this.sendRequestCopyToMe(0,!1)},showHideCollapse:function(){this.showContractMenu=!this.showContractMenu,this.contractCollapse=this.showContractMenu?"收起":"展开"},showHideToolCollapse:function(){this.showToolMenu=!this.showToolMenu,this.toolCollapse=this.showToolMenu?"收起":"展开"},agreeContract:function(t){var e=this;this.$vux.loading.show({text:"加载中..."}),this.disbledAgreeBtn=!0;var o={contractid:t.PanoProjectContractKey,number:t.Number,contracttype:t.Type,senderopenid:t.SenderOpenid,approveropenid:t.ApproverOpenid,approvername:t.ApproverName,sendername:t.SenderName,statuscode:1003};y.b.post("/contract/update",o).then(function(t){e.$vux.loading.hide(),e.disbledAgreeBtn=!1;var o=t.data.code;1e3===o?(e.$vux.toast.show({text:"合同审批成功!",time:5e3}),e.showContractPopupDetail=!1):1008===o?(e.showContractPopupDetail=!1,e.showSubscrible=!0,e.$vux.toast.show({text:"合同审批成功!",time:5e3})):e.$vux.toast.show({type:"warn",text:"合同审批失败!"})}).catch(function(t){e.$vux.loading.hide(),e.disbledAgreeBtn=!1,alert("审核异常,异常代码: "+t),e.$vux.toast.show({type:"warn",text:"合同审批失败!"})})},declineContract:function(){var t=this;this.$vux.loading.show({text:"加载中..."}),this.showDeclinedSubmitBtn=!1;var e=this.declinedContractDetail,o={contractid:e.PanoProjectContractKey,number:e.Number,contracttype:e.Type,senderopenid:e.SenderOpenid,approveropenid:e.ApproverOpenid,approvername:e.ApproverName,sendername:e.SenderName,statuscode:1002,reason:this.declinedReason};y.b.post("/contract/update",o).then(function(e){t.$vux.loading.hide();var o=e.data.code;1e3===o?(t.$vux.toast.show({time:5e3,text:"拒办审批成功!"}),t.showContractPopupDetail=!1):1008===o?(t.showContractPopupDetail=!1,t.showSubscrible=!0,t.$vux.toast.show({time:5e3,text:"拒办审批成功!"})):t.$vux.toast.show({type:"warn",text:"合同审批失败!"})}).catch(function(e){t.showDeclinedSubmitBtn=!0,t.$vux.loading.hide(),alert("审核异常,异常代码: "+e),t.$vux.toast.show({type:"warn",text:"合同审批失败!"})})},agreeBatchContract:function(){var t=this;this.$vux.loading.show({text:"加载中..."});var e={contractids:this.batchContractsModel,statuscode:1003};y.b.post("/contract/batch/update",e).then(function(e){t.$vux.loading.hide();var o=e.data.code;1e3===o?(t.$vux.toast.show({text:"合同批量审批成功!",time:5e3}),t.showBatchContractPickupDlg=!1):1008===o?(t.showBatchContractPickupDlg=!1,t.showSubscrible=!0,t.$vux.toast.show({text:"合同批量审批成功!",time:5e3})):t.$vux.toast.show({type:"warn",text:"合同批量审批失败!"})}).catch(function(e){t.$vux.loading.hide(),alert("批量审核异常,异常代码: "+e),t.$vux.toast.show({type:"warn",text:"合同批量审批失败!"})})},declineBatchContract:function(){var t=this;this.$vux.loading.show({text:"加载中..."});var e={contractids:this.batchContractsModel,statuscode:1002,reason:this.batchDeclinedReason};this.showBatchDeclinedSubmitBtn=!1,y.b.post("/contract/batch/update",e).then(function(e){t.$vux.loading.hide();var o=e.data.code;1e3===o?(t.$vux.toast.show({time:5e3,text:"拒办批量审批成功!"}),t.showBatchContractPickupDlg=!1):1008===o?(t.showBatchContractPickupDlg=!1,t.showSubscrible=!0,t.$vux.toast.show({time:5e3,text:"拒办批量审批成功!"})):t.$vux.toast.show({type:"warn",text:"合同批量审批失败!"})}).catch(function(e){t.showBatchDeclinedSubmitBtn=!0,t.$vux.loading.hide(),alert("批量审核异常,异常代码: "+e),t.$vux.toast.show({type:"warn",text:"合同批量审批失败!"})})},todoContract:function(t){var e=this;this.$vux.loading.show({text:"加载中..."});var o={contractid:t.PanoProjectContractKey,number:t.Number,contracttype:t.Type,senderopenid:t.SenderOpenid,approveropenid:t.ApproverOpenid,approvername:t.ApproverName,sendername:t.SenderName,statuscode:1001};y.b.post("/contract/update",o).then(function(t){e.$vux.loading.hide();var o=t.data.code;1e3===o?(e.$vux.toast.show({time:5e3,text:"催办审批成功!"}),e.showContractPopupDetail=!1):1008===o?(e.showContractPopupDetail=!1,e.showSubscrible=!0,e.$vux.toast.show({time:5e3,text:"催办审批成功!"})):e.$vux.toast.show({type:"warn",text:"合同审批失败!"})}).catch(function(t){e.$vux.loading.hide(),alert("审核异常,异常代码: "+t),e.$vux.toast.show({type:"warn",text:"合同审批失败!"})})},showBatchPickupHandle:function(){var t=this;this.showBatchContractPickupDlg=!0;var e=this.mycontracts;this.batchContracts=[],this.batchContractsModel=[],e.forEach(function(e){var o=e.Status,a=e.PanoProjectContractKey,n=1e3===o?"待审批":1001===o?"已提交":"被拒绝";1003!==o&&(t.batchContracts.push({key:a.toString(),value:"("+n+") 编号:"+e.Number+",发起人:"+e.SenderName+",创建时间: "+e.ChangeDate}),t.batchContractsModel.push(a.toString()))})}},mounted:function(){this.$store.dispatch("UpdateShowHeader",!0),this.$store.dispatch("UpdateShowTabbar",!1);var t=g.a.get(f.a.StoreUserInfoKey);this.userid=t.customerdata.userid;var e=this.$route.params.showtype;e&&(1===(e=parseInt(e))?this.showReviewPopupHandle():2===e?this.showRaisePopupHandle():3===e&&this.showMakecopyPopupHandle())}}),D={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0"},attrs:{slot:"header","left-options":{showBack:!0,backText:"返回",preventGoBack:!0},title:"审批"},on:{"on-click-back":function(e){t.$router.push({name:"ucenter"})}},slot:"header"}),t._v(" "),o("br"),t._v(" "),o("grid",{attrs:{cols:3,"show-lr-borders":!0}},[o("grid-item",{staticClass:"grid-center",attrs:{label:"我审批的"},nativeOn:{click:function(e){return t.showReviewPopupHandle(e)}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#review"}})])]),t._v(" "),o("grid-item",{staticClass:"grid-center",attrs:{label:"我发起的"},nativeOn:{click:function(e){return t.showRaisePopupHandle(e)}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#raise"}})])]),t._v(" "),o("grid-item",{staticClass:"grid-center",attrs:{label:"抄送我的"},nativeOn:{click:function(e){return t.showMakecopyPopupHandle(e)}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#makecopy"}})])])],1),t._v(" "),o("cell",{attrs:{title:"审批","border-intent":!1,value:t.contractCollapse},nativeOn:{click:function(e){return t.showHideCollapse(e)}}}),t._v(" "),t.showContractMenu?[o("grid",{attrs:{"show-lr-borders":!1,"show-vertical-dividers":!1}},[o("grid-item",{attrs:{label:"合同审批"},nativeOn:{click:function(e){t.$router.push({name:"pcontractadd",params:{type:"1000"}})}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#hetong"}})])]),t._v(" "),o("grid-item",{attrs:{label:"材料请款"},nativeOn:{click:function(e){t.$router.push({name:"pcontractmaterialadd"})}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#cailiaojinchang"}})])]),t._v(" "),o("grid-item",{attrs:{label:"工程请款"},nativeOn:{click:function(e){t.$router.push({name:"pcontractfundadd"})}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#gongchengkuan"}})])])],1)]:t._e(),t._v(" "),o("cell",{attrs:{title:"审批工具","border-intent":!1,value:t.toolCollapse},nativeOn:{click:function(e){return t.showHideToolCollapse(e)}}}),t._v(" "),t.showToolMenu?[o("grid",{attrs:{"show-lr-borders":!1,"show-vertical-dividers":!1}},[o("grid-item",{attrs:{label:"签字流"},nativeOn:{click:function(e){t.$router.push({name:"pcontractworkflow"})}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#liucheng"}})])]),t._v(" "),o("grid-item",{attrs:{label:"我的签名"},nativeOn:{click:function(e){t.$router.push({name:"pcontractsignature"})}}},[o("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[o("use",{attrs:{"xlink:href":"#qianming"}})])])],1)]:t._e(),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showReviewPopup,callback:function(e){t.showReviewPopup=e},expression:"showReviewPopup"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"100"},attrs:{title:"我审批的列表","left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(e){t.showReviewPopup=!1}}},[t.batchApprove?o("span",{staticStyle:{"font-size":"16px"},attrs:{slot:"right"},on:{click:t.showBatchPickupHandle},slot:"right"},[t._v("\n          "+t._s(t.batchApproveText)+"\n        ")]):o("spinner",{attrs:{slot:"right",type:"android",size:"28px"},slot:"right"})],1),t._v(" "),t.mycontracts.length>0?o("scroller",{ref:"mycontractscroller",staticStyle:{"margin-top":"46px"},attrs:{"lock-x":"","scrollbar-y":"","use-pulldown":"","use-pullup":"","pullup-config":{content:"上拉加载更多",downContent:"松开进行加载",upContent:"上拉加载更多",loadingContent:"更新分配给我的加载中...",clsPrefix:"xs-plugin-pullup-"},"pulldown-config":{content:"下拉刷新",downContent:"下拉刷新",upContent:"释放刷新",loadingContent:"加载我的列表中...",clsPrefix:"xs-plugin-pulldown-"}},on:{"on-pullup-loading":t.loadMoreMyContract,"on-pulldown-loading":t.refreshMyContract}},[o("div",[o("group",t._l(t.mycontracts,function(e,a){return o("cell",{key:a,attrs:{"inline-desc":"签约时间: "+e.SignDate+",创建时间: "+e.ChangeDate,"is-link":""},nativeOn:{click:function(o){t.showDetailContractInfo(e)}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("span",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(a+1+". 编号: "+e.Number+",发起人: "+e.SenderName))]),t._v(" "),1e3===e.Status?o("badge",{staticStyle:{"background-color":"#b2b224"},attrs:{text:"待审批"}}):1001===e.Status?o("badge",{staticStyle:{"background-color":"#44fe1d"},attrs:{text:"已提交"}}):t._e(),t._v(" "),1002===e.Status?o("badge",{staticStyle:{"background-color":"#b20d09"},attrs:{text:"被拒绝"}}):t._e(),t._v(" "),1003===e.Status?o("badge",{staticStyle:{"background-color":"#12b20c"},attrs:{text:"通过"}}):t._e()],1)])}))],1)]):o("div",[o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("load-more",{attrs:{"show-loading":!1,tip:"没有分配给我的待审批数据"}})],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showRaisePopup,callback:function(e){t.showRaisePopup=e},expression:"showRaisePopup"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"100"},attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(e){t.showRaisePopup=!1}}},[t._v("\n        我发起的审批列表\n      ")]),t._v(" "),t.myraisecontracts.length>0?o("scroller",{ref:"myraisecontractscroller",staticStyle:{"margin-top":"46px"},attrs:{"lock-x":"","scrollbar-y":"","use-pulldown":"","use-pullup":"","pullup-config":{content:"上拉加载更多",downContent:"松开进行加载",upContent:"上拉加载更多",loadingContent:"更新我发起的列表中...",clsPrefix:"xs-plugin-pullup-"},"pulldown-config":{content:"下拉刷新",downContent:"下拉刷新",upContent:"释放刷新",loadingContent:"加载我发起的列表中...",clsPrefix:"xs-plugin-pulldown-"}},on:{"on-pullup-loading":t.loadMoreMyRaiseContract,"on-pulldown-loading":t.refreshMyRaiseContract}},[o("div",[o("group",t._l(t.myraisecontracts,function(e,a){return o("cell",{key:a,attrs:{"inline-desc":"签约时间: "+e.SignDate+",创建时间: "+e.ChangeDate,"is-link":""},nativeOn:{click:function(o){t.showDetailContractInfo(e)}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("span",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(a+1+". 编号: "+e.Number+",发起人: "+e.SenderName))]),t._v(" "),1e3===e.Status?o("badge",{staticStyle:{"background-color":"#b2b224"},attrs:{text:"待审批"}}):1001===e.Status?o("badge",{staticStyle:{"background-color":"#44fe1d"},attrs:{text:"已提交"}}):t._e(),t._v(" "),1002===e.Status?o("badge",{staticStyle:{"background-color":"#b20d09"},attrs:{text:"被拒绝"}}):t._e(),t._v(" "),1003===e.Status?o("badge",{staticStyle:{"background-color":"#12b20c"},attrs:{text:"通过"}}):t._e()],1)])}))],1)]):o("div",[o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("load-more",{attrs:{"show-loading":!1,tip:"没有我发起的数据"}})],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showMakecopyPopup,callback:function(e){t.showMakecopyPopup=e},expression:"showMakecopyPopup"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"100"},attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(e){t.showMakecopyPopup=!1}}},[t._v("\n        抄送我的列表\n      ")]),t._v(" "),t.mycopycontracts.length>0?o("scroller",{ref:"mycopycontractscroller",staticStyle:{"margin-top":"46px"},attrs:{"lock-x":"","scrollbar-y":"","use-pulldown":"","use-pullup":"","pullup-config":{content:"上拉加载更多",downContent:"松开进行加载",upContent:"上拉加载更多",loadingContent:"更新抄送我的加载中...",clsPrefix:"xs-plugin-pullup-"},"pulldown-config":{content:"下拉刷新",downContent:"下拉刷新",upContent:"释放刷新",loadingContent:"加载抄送我的列表中...",clsPrefix:"xs-plugin-pulldown-"}},on:{"on-pullup-loading":t.loadMoreMyCopyContract,"on-pulldown-loading":t.refreshMyCopyContract}},[o("div",[o("group",t._l(t.mycopycontracts,function(e,a){return o("cell",{key:a,attrs:{"inline-desc":"签约时间: "+e.SignDate+",创建时间: "+e.ChangeDate,"is-link":""},nativeOn:{click:function(o){t.showDetailContractInfo(e)}}},[o("span",{attrs:{slot:"title"},slot:"title"},[o("span",{staticStyle:{"vertical-align":"middle"}},[t._v(t._s(a+1+". 编号: "+e.Number+",发起人: "+e.SenderName))]),t._v(" "),1e3===e.Status?o("badge",{staticStyle:{"background-color":"#b2b224"},attrs:{text:"待审批"}}):1001===e.Status?o("badge",{staticStyle:{"background-color":"#44fe1d"},attrs:{text:"已提交"}}):t._e(),t._v(" "),1002===e.Status?o("badge",{staticStyle:{"background-color":"#b20d09"},attrs:{text:"被拒绝"}}):t._e(),t._v(" "),1003===e.Status?o("badge",{staticStyle:{"background-color":"#12b20c"},attrs:{text:"通过"}}):t._e()],1)])}))],1)]):o("div",[o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("load-more",{attrs:{"show-loading":!1,tip:"没有抄送我的数据"}})],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showContractPopupDetail,callback:function(e){t.showContractPopupDetail=e},expression:"showContractPopupDetail"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"100"},attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:t.myContractDetail.Number?t.myContractDetail.Number:"审批单详情"},on:{"on-click-back":function(e){t.showContractPopupDetail=!1}}}),t._v(" "),o("flexbox",{staticStyle:{"margin-top":"50px","padding-bottom":"3px"}},[t.showReviewPopup&&1003!==t.myContractDetail.Status?o("flexbox-item",[o("x-button",{attrs:{type:"primary",disabled:t.disbledAgreeBtn},nativeOn:{click:function(e){t.agreeContract(t.myContractDetail)}}},[t._v("同意")])],1):t._e(),t._v(" "),t.showReviewPopup&&1003!==t.myContractDetail.Status?o("flexbox-item",[o("x-button",{attrs:{type:"warn"},nativeOn:{click:function(e){t.showDeclinedReasonDlg=!0,t.declinedContractDetail=t.myContractDetail}}},[t._v("拒办")])],1):t._e(),t._v(" "),t.showRaisePopup&&1003!==t.myContractDetail.Status?o("flexbox-item",[o("x-button",{attrs:{type:"default"},nativeOn:{click:function(e){t.todoContract(t.myContractDetail)}}},[t._v("催办")])],1):t._e()],1),t._v(" "),o("form-preview",{attrs:{"header-label":"编号","header-value":""!==t.myContractDetail.Number?t.myContractDetail.Number:"无","body-items":[{label:"审批单当前状态",value:1e3===t.myContractDetail.Status?"待审批":1001===t.myContractDetail.Status?"审批单已提交":1002===t.myContractDetail.Status?"审批单被拒绝":1003==t.myContractDetail.Status?"审批通过":"待审批"},{label:"发起人",value:t.myContractDetail.SenderName},{label:"审批人/抄送人",value:t.myContractDetail.ApproverName?t.myContractDetail.ApproverName:t.myContractDetail.MakecopyName},{label:"签约日期",value:t.myContractDetail.SignDate},{label:"创建时间",value:t.myContractDetail.ChangeDate},{label:"我方负责人",value:t.myContractDetail.FromPrincipal?t.myContractDetail.FromPrincipal:"无"},{label:"对方负责人",value:t.myContractDetail.ToPrincipal?t.myContractDetail.ToPrincipal:"无"}]}}),t._v(" "),o("group",[o("cell",{attrs:{title:"材料明细",value:"点击查看材料明细","is-link":""},nativeOn:{click:function(e){t.showMaterialDetailPage(t.myContractDetail)}}})],1),t._v(" "),t.myContractDetailFile.length>0?o("group",{attrs:{title:"合同附件/图片"}},t._l(t.myContractDetailFile,function(e,a){return o("div",{key:a,staticStyle:{"text-align":"center"}},[o("x-img",{staticClass:"ximg-file",attrs:{src:e.src,"default-src":e.src,"webp-src":e.msrc+"?type=webp","error-class":"ximg-error",offset:-100,container:"#vux_view_box_body"},on:{"on-success":t.successLoadImage,"on-error":t.errorLoadImage}})],1)})):t._e()],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showBatchContractPickupDlg,callback:function(e){t.showBatchContractPickupDlg=e},expression:"showBatchContractPickupDlg"}},[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"100"},attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"批量审批详情"},on:{"on-click-back":function(e){t.showBatchContractPickupDlg=!1}}}),t._v(" "),o("group",[o("flexbox",{staticStyle:{"margin-top":"40px","padding-bottom":"3px"}},[o("flexbox-item",[o("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.agreeBatchContract(e)}}},[t._v("同意")])],1),t._v(" "),o("flexbox-item",[o("x-button",{attrs:{type:"warn"},nativeOn:{click:function(e){t.showBatchDeclinedReasonDlg=!0}}},[t._v("拒办")])],1)],1)],1),t._v(" "),o("div",{staticStyle:{"margin-top":"10px","padding-bottom":"3px"}},[o("checklist",{attrs:{title:"确认勾选需要批量审批的审批单",options:t.batchContracts},model:{value:t.batchContractsModel,callback:function(e){t.batchContractsModel=e},expression:"batchContractsModel"}})],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showDeclinedReasonDlg,callback:function(e){t.showDeclinedReasonDlg=e},expression:"showDeclinedReasonDlg"}},[o("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"拒办审批单明细"},on:{"on-click-back":function(e){t.showDeclinedReasonDlg=!1}}}),t._v(" "),o("group",[o("x-textarea",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{"show-counter":!0,height:300,min:3,max:1500,placeholder:"输入拒办该审批单的理由(非必填)"},model:{value:t.declinedReason,callback:function(e){t.declinedReason="string"==typeof e?e.trim():e},expression:"declinedReason"}})],1),t._v(" "),o("group",[t.showDeclinedSubmitBtn?o("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.declineContract(e)}}},[t._v("提交")]):o("spinner",{attrs:{slot:"right",type:"android",size:"28px"},slot:"right"})],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showBatchDeclinedReasonDlg,callback:function(e){t.showBatchDeclinedReasonDlg=e},expression:"showBatchDeclinedReasonDlg"}},[o("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"批量拒办审批单明细"},on:{"on-click-back":function(e){t.showBatchDeclinedReasonDlg=!1}}}),t._v(" "),o("group",[o("x-textarea",{directives:[{name:"focus",rawName:"v-focus"}],attrs:{"show-counter":!0,height:300,min:3,max:1500,placeholder:"输入拒办该审批单的理由(非必填)"},model:{value:t.batchDeclinedReason,callback:function(e){t.batchDeclinedReason="string"==typeof e?e.trim():e},expression:"batchDeclinedReason"}})],1),t._v(" "),o("group",[t.showBatchDeclinedSubmitBtn?o("x-button",{attrs:{type:"primary"},nativeOn:{click:function(e){return t.declineBatchContract(e)}}},[t._v("提交")]):o("spinner",{attrs:{slot:"right",type:"android",size:"28px"},slot:"right"})],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("previewer",{ref:"previewer",attrs:{list:t.myContractDetailFile}})],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showDetailMaterialDlg,callback:function(e){t.showDetailMaterialDlg=e},expression:"showDetailMaterialDlg"}},[o("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"审批单材料明细"},on:{"on-click-back":function(e){t.showDetailMaterialDlg=!1}}}),t._v(" "),t.materials.count>0?o("group",[o("group-title",{staticStyle:{"font-size":"13px"}},[t._v("当前审批单"+t._s(t.contractnumber)+"共有"),o("b",[t._v(t._s(t.materials.count))]),t._v("个进场材料")]),t._v(" "),o("div",t._l(t.materials.items,function(e,a){return o("div",{key:a,staticClass:"materialtitle"},[o("flexbox",[o("flexbox-item",[o("group-title",{staticStyle:{"font-size":"14px !important"}},[t._v("进场日期："+t._s(e.date))])],1)],1),t._v(" "),o("swipeout",t._l(e.result,function(e,a){return o("swipeout-item",{key:a,attrs:{threshold:.5,"underlay-color":"#ccc"}},[o("div",{staticClass:"project-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[o("cell",{key:a,attrs:{title:"名称: "+e.Name+", 数量: "+e.Quantity+", 进场单价: "+e.Price+"(单位: "+e.Unit+")","inline-desc":"最后更新时间: "+e.ChangeDate,"is-link":"","border-intent":!1,"arrow-direction":e["showdetail"+e.row]?"up":"down"},nativeOn:{click:function(o){t.showDetailMaterial(e)}}},[1e3===e.status?o("badge",{staticStyle:{"background-color":"#b2b224"},attrs:{slot:"icon",text:"待审批"},slot:"icon"}):1001===e.status?o("badge",{staticStyle:{"background-color":"#88df25"},attrs:{slot:"icon",text:"已提交"},slot:"icon"}):1002===e.status?o("badge",{staticStyle:{"background-color":"#b20d09"},attrs:{slot:"icon",text:"被拒绝"},slot:"icon"}):1003===e.status?o("badge",{staticStyle:{"background-color":"#18b20e"},attrs:{slot:"icon",text:"通过"},slot:"icon"}):t._e()],1),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:e["showdetail"+e.row],expression:"result['showdetail'+result.row]"}]},[o("form-preview",{attrs:{"header-label":"对应预算材料名称","header-value":e.Name,"body-items":[{label:"材料进场日期",value:e.ApplyDate?e.ApplyDate:e.ChangeDate},{label:"进场单价",value:e.Price},{label:"数量",value:e.Quantity},{label:"计量单位",value:e.Unit},{label:"材料对应的规格,型号,产地",value:e.From?e.From:"无"},{label:"交验结果",value:e.Description?e.Description:"无"},{label:"提交的审核单编号",value:e.ContractNumber?e.ContractNumber:"无"}]}})],1)],1)])}))],1)}))],1):o("div",[o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("br"),t._v(" "),o("load-more",{attrs:{"show-loading":!1,tip:"当前审批单无材料数据!","background-color":"#fbf9fe"}})],1)],1)],1),t._v(" "),o("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[o("popup",{attrs:{height:"100%"},model:{value:t.showSubscrible,callback:function(e){t.showSubscrible=e},expression:"showSubscrible"}},[o("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"关注公众号提示"},on:{"on-click-back":t.backSubscrible}}),t._v(" "),o("msg",{attrs:{title:"操作成功",description:"",buttons:t.subscribleBtns,icon:"success"}},[o("div",{attrs:{slot:"description"},slot:"description"},[o("span",[t._v("您可以关注公众号"),o("b",[t._v("“美丽乡村游”")]),t._v("实时获取审批单最新状态!")]),t._v(" "),o("x-img",{attrs:{src:"./static/img/qrcode.jpg","default-src":"/pano/static/img/qrcode.jpg"}})],1)])],1)],1)],2)},staticRenderFns:[]};var S=o("./node_modules/vue-loader/lib/component-normalizer.js")(k,D,!1,function(t){o('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-6a4e4b68","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoContract.vue')},"data-v-6a4e4b68",null);e.default=S.exports}});