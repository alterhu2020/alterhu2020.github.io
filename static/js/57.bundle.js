webpackJsonp([57],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2db6336c","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/MaterialMachineEnter.vue':function(t,e){},"./src/pages/MaterialMachineEnter.vue":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("./node_modules/babel-runtime/core-js/json/stringify.js"),o=a.n(i),s=a("./node_modules/babel-runtime/helpers/slicedToArray.js"),n=a.n(s),r=a("./node_modules/babel-runtime/core-js/object/entries.js"),l=a.n(r),c=a("./node_modules/vux/src/components/badge/index.vue"),u=a("./node_modules/vux/src/components/button-tab/button-tab.vue"),d=a("./node_modules/vux/src/components/button-tab/button-tab-item.vue"),h=a("./node_modules/vux/src/components/checklist/index.vue"),m=a("./node_modules/vux/src/components/flexbox/flexbox.vue"),p=a("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),v=a("./node_modules/vux/src/components/form-preview/index.vue"),b=a("./node_modules/vux/src/components/grid/grid.vue"),f=a("./node_modules/vux/src/components/grid/grid-item.vue"),g=a("./node_modules/vux/src/components/group-title/index.vue"),x=a("./node_modules/vux/src/components/load-more/index.vue"),w=a("./node_modules/vux/src/components/popup/index.vue"),_=a("./node_modules/vux/src/components/previewer/index.vue"),y=a("./node_modules/vux/src/components/search/index.vue"),k=a("./node_modules/vux/src/components/swipeout/swipeout.vue"),M=a("./node_modules/vux/src/components/swipeout/swipeout-button.vue"),j=a("./node_modules/vux/src/components/swipeout/swipeout-item.vue"),B=a("./node_modules/vux/src/components/swiper/swiper.vue"),$=a("./node_modules/vux/src/components/swiper/swiper-item.vue"),S=a("./node_modules/vux/src/components/x-number/index.vue"),D=a("./node_modules/vux/src/components/x-switch/index.vue"),P=a("./node_modules/vux/src/components/x-textarea/index.vue"),O=a("./node_modules/vux/src/components/datetime/index.vue"),C=a("./node_modules/vux/src/components/icon/index.vue"),A=a("./src/components/sticky.js"),N=a("./node_modules/vue-feather-icons/dist/vue-feather-icons.es.js"),T=a("./src/webconfig.js"),I=a("./src/utils/StoreUtils.js"),U=a("./src/api/index.js"),q=a("./node_modules/vue/dist/vue.esm.js"),F=a("./src/utils/StringUtils.js"),z=a("./src/components/SelectProjectDialog.vue"),E=a("./src/utils/PlatformUtils.js"),H=a("./src/utils/ElectronUtils.js"),R=(A.a,u.a,d.a,N.d,w.a,S.a,D.a,P.a,x.a,b.a,f.a,g.a,B.a,$.a,j.a,M.a,k.a,c.a,m.a,p.a,_.a,h.a,v.a,y.a,O.a,C.a,z.a,{name:"MaterialMachineEnter",metaInfo:{title:"机械动态"},directives:{sticky:A.a},components:{ButtonTab:u.a,ButtonTabItem:d.a,PlusIcon:N.d,Popup:w.a,XNumber:S.a,XSwitch:D.a,XTextarea:P.a,LoadMore:x.a,Grid:b.a,GridItem:f.a,GroupTitle:g.a,Swiper:B.a,SwiperItem:$.a,SwipeoutItem:j.a,SwipeoutButton:M.a,Swipeout:k.a,Badge:c.a,Flexbox:m.a,FlexboxItem:p.a,Previewer:_.a,Checklist:h.a,FormPreview:v.a,Search:y.a,Datetime:O.a,Icon:C.a,SelectProjectDialog:z.a},data:function(){return{showmenuOptions:!1,menuOptions:!1,searchResults:[],searchModel:"",material:{type:1e3,name:"",budgetid:null,date:"",price:0,quantity:1,unit:"",from:"",bills:[],desc:""},showBudgetMaterialPopup:!1,selectedBudgetName:"请选择",billImages:I.a.get(T.a.StoreMaterial)?I.a.get(T.a.StoreMaterial).bills:[],budgetMaterials:[],filterBudgetMaterials:[],budgetMaterialsModel:[],updateMaterialTitle:"",showUpdateMaterialDlg:!1,showAddBtn:!1,canmaterial:!1,tab:I.a.get(T.a.StoreMaterialTab)?I.a.get(T.a.StoreMaterialTab):0,budgets:{count:0,items:[]},materials:{count:0,items:[]},plans:{count:0,items:[]},shouldHover:!0,showProjectSelectDlg:!1,project:{},materialid:null,materialArrowDirection:"up",materialPlanArrowDirection:"up",materialBudgetArrowDirection:"up"}},methods:{updateMaterialBackHandle:function(){this.showUpdateMaterialDlg=!1,this.showmenuOptions=this.canmaterial,this.showAddBtn=this.canmaterial},switchProject:function(){this.showProjectSelectDlg=!0,this.showAddBtn=!1},clickCellPlanArrowFlag:function(){this.materialPlanArrowDirection="up"===this.materialPlanArrowDirection?"down":"up"},clickCellBudgetArrowFlag:function(){this.materialBudgetArrowDirection="up"===this.materialBudgetArrowDirection?"down":"up"},clickCellArrowFlag:function(){this.materialArrowDirection="up"===this.materialArrowDirection?"down":"up"},clickMenuOptions:function(t){if("excel"===t)this.$router.push({name:"pmaterialsm",params:{projectid:this.project.key}});else if("open"===t)if(Object(E.b)()){var e,a=this,i=this.$route.params.projectid;e=i?""+location.href:location.href+"/"+this.project.key.toString(),this.$copyText(e).then(function(){a.$vux.alert.show({buttonText:"好的",title:"机械动态提示",content:"地址复制成功! 你可在电脑端打开地址: "+e+" 进行机械动态的操作!"})},function(t){alert("不支持复制功能！"),console.log(t)})}else this.$vux.toast.show({time:3e3,text:"暂不支持桌面版操作！"})},hideMenuOptions:function(){this.showAddBtn=this.canmaterial},searchFocus:function(){this.searchResults=[]},cancelSearch:function(){},clickSearchResult:function(t){this.filterBudgetMaterials=this.budgetMaterials.filter(function(e){return e.value===t.title}),this.budgetMaterialsModel=[this.filterBudgetMaterials[0].key],this.selectedTenderName=this.filterBudgetMaterials[0].value},inputSearchChange:function(t){var e=this;e.searchResults=[],this.budgetMaterials.forEach(function(a){Object(F.c)(a.value,t)&&e.searchResults.push({title:a.value,other:a.key})})},deleteMaterial:function(t,e){var a=this,i="",o="";0===this.tab?(i="进场机械"+t.Name,o="/machine/del/m/"+t.key):1===this.tab&&(i="预算机械"+t.Name,o="/machine/del/b/"+t.key),this.$vux.confirm.show({title:"删除"+i+"提示",content:"确定删除"+i+"?",onCancel:function(){},onConfirm:function(){a.$vux.loading.show({text:"删除"+i+"中..."}),U.b.delete(o).then(function(t){a.$vux.loading.hide(),1e3===t.data.code&&(1===a.tab?(a.budgets.items.splice(e,1),--a.budgets.count):0===a.tab&&(a.materials.items.splice(e,1),--a.materials.count),a.$vux.toast.show({text:"删除"+i+"成功!"}))}).catch(function(t){a.$vux.loading.hide(),alert("删除机械出错,错误代码: "+t)})}})},updateMaterialDlg:function(t){this.showAddBtn=!1,this.showmenuOptions=!1,this.showUpdateMaterialDlg=!0,this.materialid=t.key,0===this.tab?(this.updateMaterialTitle="进场机械信息修改",this.material.type=1006,this.material.date=t.ApplyDate,this.material.name=t.Name,this.material.price=parseFloat(t.Price),this.material.quantity=parseFloat(t.Quantity),this.material.unit=t.Unit,this.material.from=t.From,this.material.desc=t.Description,this.material.bills=t.Bills,this.billImages=t.Bills,this.material.budgetid=t.budgetid,this.fetchBudgetMaterials(t.budgetid)):1===this.tab&&(this.updateMaterialTitle="预算机械信息修改",this.material.type=1005,this.material.name=t.Name,this.material.price=parseFloat(t.Price),this.material.quantity=parseFloat(t.Quantity),this.material.unit=t.Unit)},showBudgetOptionsDlg:function(){this.showBudgetMaterialPopup=!0},selectMaterialChange:function(t,e){this.showBudgetMaterialPopup=!1,this.selectedBudgetName=e[0],this.material.budgetid=e[0]},goNewBudgetPage:function(){this.$router.push({name:"pmaterialadd",params:{projectid:this.project.key,type:1005}})},fetchBudgetMaterials:function(t){var e=this;this.project.key&&(this.$vux.loading.show({text:"正在获取对应进场机械信息..."}),U.b.get("/machine/get/bb/"+this.project.key).then(function(a){if(e.$vux.loading.hide(),1e3===a.data.code){var i=a.data.data;i.items.forEach(function(t){var e=t.Name+"(单位: "+t.Unit+")",a=t.key;t.key=a,t.value=e}),e.budgetMaterials=i.items,t?(e.budgetMaterialsModel=[t],e.selectedBudgetName=e.budgetMaterials.filter(function(e){return e.key===t})[0].value):e.budgetMaterialsModel=[e.budgetMaterials[0].key]}}).catch(function(t){e.$vux.loading.hide(),alert("获取机械出错,错误代码: "+t)}))},uploadBillImage:function(){var t=this,e=T.a.ApiServerURI+"/v1/upload/file";console.log("上传的地址是: "+e),this.$device.isWechat?q.default.wechat.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(a){var i=a.localIds[0];q.default.wechat.uploadImage({localId:i.toString(),isShowProgressTips:1,success:function(a){var i=a.serverId,o=new FormData;l()({type:6}).forEach(function(t){var e=n()(t,2),a=e[0],i=e[1];o.append(a,i)}),o.append("mediaid",i),U.b.post(e,o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){if(1e3===e.data.code){t.loading=!1;var a=e.data.data.url;t.$vux.toast.show({text:"图片上传成功!"}),t.billImages.push({src:a,msrc:a,w:1200,h:900}),t.material.bills=t.billImages,I.a.set(T.a.StoreMaterial,t.material)}}).catch(function(e){t.loading=!1,t.onError(e,i)})},cancel:function(){t.loading=!1},fail:function(e){t.loading=!1,alert("微信接口异常出错无法上传,错误代码:"+o()(e)),t.$vux.toast.show({type:"warn",text:"微信接口异常出错无法上传,错误代码:"+o()(e)})}})}}):this.$vux.toast.show({type:"warn",time:6e3,text:"上传图片只能在微信手机端操作，你可以先保存当前录入信息，然后再在手机上修改操作！"})},saveMaterial:function(){var t=this,e={type:this.material.type,materialid:this.materialid,name:this.material.name,price:this.material.price,quantity:this.material.quantity,unit:this.material.unit},a={type:this.material.type,materialid:this.materialid,budgetid:this.budgetMaterialsModel[0],date:this.material.date,price:this.material.price,quantity:this.material.quantity,from:this.material.from,bills:this.material.bills},i={},o=!1;if(1===this.tab){i=e;var s="预算机械录入提示";if(null===this.project.key)return void this.$vux.alert.show({title:s,content:"无法定位项目名称无法录入!"});if(!this.material.name||0>=this.material.name.length)return void this.$vux.alert.show({title:s,content:"预算机械名称不能为空!"});if(""===this.material.quantity||isNaN(this.material.quantity))return void this.$vux.alert.show({title:s,content:"预算机械数量不能为空,必须大于等于零!"});if(!this.material.unit||0>=this.material.unit.length)return void this.$vux.alert.show({title:s,content:"预算机械计量单位不能为空!"});o=this.project.key&&0<this.material.name.length&&""!==this.material.quantity&&0<this.material.unit.length}else if(0===this.tab){i=a;var n="进场机械修改提示";if(null===this.material.budgetid)return void this.$vux.alert.show({title:n,content:"必须选择一个进场机械!"});if(""===this.material.quantity||isNaN(this.material.quantity))return void this.$vux.alert.show({title:n,content:"进场机械数量不能为空,必须大于等于零!"});o=null!==this.material.budgetid&&""!==this.material.quantity}o?(this.$vux.loading.show({text:"正在保存机械信息..."}),U.b.post("/machine/update",i).then(function(e){t.$vux.loading.hide(),1e3===e.data.code&&(I.a.remove(T.a.StoreMaterial),t.$vux.toast.show({text:"更新机械信息成功,三秒后跳转到机械列表!"}),Object(E.b)()?t.$router.go(0):Object(H.b)())}).catch(function(e){t.$vux.loading.hide(),alert("保存机械信息出错,错误代码: "+e)})):this.$vux.alert.show({content:"请检查你的输入是否合法,机械名称,机械数量必须大于等于零,机械计量单位不能为空!"})},selectProject:function(t){this.project=t,this.showProjectSelectDlg=!1,this.showmenuOptions=this.canmaterial,this.showAddBtn=this.canmaterial,0===this.tab?this.fetchComplate():1===this.tab&&this.fetchContract()},backPage:function(){this.$router.push({name:"ucenter"})},addMaterial:function(){if(Object(E.b)()){var t="";0===this.tab?t="pmaterialadd/"+this.project.key+"/1006":1===this.tab&&(t="pmaterialadd/"+this.project.key+"/1005"),window.location.href=T.a.ServerBaseUrl+t}else this.$router.push({name:"pmaterialadd",params:{projectid:this.project.key,type:0===this.tab?1006:1005}})},clickTab:function(){0===this.tab?(this.fetchComplate(),I.a.set(T.a.StoreMaterialTab,0)):(this.fetchContract(),I.a.set(T.a.StoreMaterialTab,1))},fetchComplate:function(){var t=this;this.materials.count=0,this.materials.items=[],this.project.key&&(this.$vux.loading.show({text:"正在获取进场机械..."}),U.b.get("/machine/get/m/"+this.project.key).then(function(e){if(t.$vux.loading.hide(),1e3===e.data.code){var a=e.data.data;t.projectname=a.projectname,t.materials.items=a.items,t.materials.count=a.count}}).catch(function(e){t.$vux.loading.hide(),alert("获取进场机械出错,错误代码: "+e)}))},fetchContract:function(){var t=this;this.budgets.count=0,this.budgets.items=[],this.project.key&&(this.$vux.loading.show({text:"正在获取预算机械..."}),U.b.get("/machine/get/b/"+this.project.key).then(function(e){if(t.$vux.loading.hide(),1e3===e.data.code){var a=e.data.data;t.projectname=a.projectname,t.budgets.items=a.items,t.budgets.count=a.count}}).catch(function(e){t.$vux.loading.hide(),alert("获取预算机械出错,错误代码: "+e)}))},sendNotification:function(t){var e=this,a=t.date,i=t.result.length;this.$vux.confirm.show({hideOnBlur:!0,title:"进场机械提醒提示",content:"确认进场日期："+a+"，进场机械数量："+i+"，将会微信通知项目所有人当前进场机械状态?",onCancel:function(){},onConfirm:function(){var t=I.a.get(T.a.StoreUserInfoKey),o=t.customerdata.companyid,s=t.customerdata.nickname;U.b.post("/machine/notification/"+o,{nickname:s,date:a,number:i}).then(function(t){1e3===t.data.code&&e.$vux.toast.show({time:5e3,position:"bottom",text:"机械进场通知已经发送成功！"})})}})}},watch:{},mounted:function(){this.$store.dispatch("UpdateShowHeader",!1),this.$store.dispatch("UpdateShowTabbar",!1);var t=this.$route.params.projectid;if(t)this.canmaterial=!0,this.showAddBtn=this.canmaterial,this.showmenuOptions=this.canmaterial,this.project.key=t,this.project.value=I.a.get(T.a.StoreProject)?I.a.get(T.a.StoreProject).value:"未知项目",0===this.tab?this.fetchComplate():1===this.tab&&this.fetchContract();else{var e=I.a.get(T.a.StoreUserInfoKey);e&&(this.canmaterial=e.customerdata.canmaterial,this.showAddBtn=this.canmaterial,this.showmenuOptions=this.canmaterial);var a=I.a.get(T.a.StoreProject);a?(this.project=a,0===this.tab?this.fetchComplate():1===this.tab&&this.fetchContract()):(this.showProjectSelectDlg=!0,this.showmenuOptions=!1)}}}),Q={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("x-header",{attrs:{slot:"header","left-options":{showBack:!0,backText:"返回"},title:"机械现场管理"},slot:"header"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.showmenuOptions,expression:"showmenuOptions"}],attrs:{slot:"right"},on:{click:function(e){t.menuOptions=!t.menuOptions,t.showAddBtn=!1}},slot:"right"},[a("svg",{staticClass:"vux-x-icon vux-x-icon-navicon",staticStyle:{fill:"#fff",position:"relative",top:"-8px",left:"-3px"},attrs:{type:"navicon",size:"35",xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 512 512"}},[a("path",{attrs:{d:"M96 241h320v32H96zm0-96h320v32H96zm0 192h320v32H96z"}})])])]),t._v(" "),a("group-title",[t._v("当前项目:"+t._s(t.project.value?t.project.value:"未知")+"   "),a("a",{staticStyle:{color:"#00a7f5"},on:{click:function(e){return e.preventDefault(),t.switchProject(e)}}},[t._v("切换项目")])]),t._v(" "),a("button-tab",{directives:[{name:"sticky",rawName:"v-sticky",value:{zIndex:100,stickyTop:2,className:"sticky-buttons"},expression:"{ zIndex: 100, stickyTop: 2, className: 'sticky-buttons' }"}],model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("button-tab-item",{on:{"on-item-click":function(e){t.clickTab()}}},[t._v("进场机械")]),t._v(" "),a("button-tab-item",{on:{"on-item-click":function(e){t.clickTab()}}},[t._v("预算机械")])],1),t._v(" "),t.showAddBtn?a("div",{staticClass:"fixbtn",class:[{hover:t.shouldHover}],on:{mouseenter:function(e){t.shouldHover=!0},mouseleave:function(e){t.shouldHover=!1},click:t.addMaterial}},[t._t("default",[a("plus-icon",{staticStyle:{color:"white"}})])],2):t._e(),t._v(" "),0===t.tab?[t.materials.count>0?a("group",[a("group-title",{staticStyle:{"font-size":"13px"}},[t._v("共有"),a("b",[t._v(t._s(t.materials.count))]),t._v("个进场机械")]),t._v(" "),a("div",t._l(t.materials.items,function(e,i){return a("div",{key:i,staticClass:"materialtitle"},[a("flexbox",[a("flexbox-item",{attrs:{span:7}},[a("group-title",{staticStyle:{"font-size":"14px !important"}},[t._v("进场日期："+t._s(e.date))])],1),t._v(" "),t.canmaterial?a("flexbox-item",[a("x-button",{attrs:{type:"primary",mini:""},nativeOn:{click:function(a){t.sendNotification(e)}}},[t._v("进场消息提醒")])],1):t._e()],1),t._v(" "),a("swipeout",t._l(e.result,function(e,i){return a("swipeout-item",{key:i,attrs:{threshold:.5,"underlay-color":"#ccc"}},[t.canmaterial?a("div",{attrs:{slot:"right-menu"},slot:"right-menu"},[a("swipeout-button",{attrs:{type:"primary"},nativeOn:{click:function(a){t.updateMaterialDlg(e,i)}}},[t._v("修改")]),t._v(" "),a("swipeout-button",{attrs:{type:"warn"},nativeOn:{click:function(a){t.deleteMaterial(e,i)}}},[t._v("删除")])],1):t._e(),t._v(" "),a("div",{staticClass:"project-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[a("cell",{key:i,attrs:{title:"名称: "+e.Name+", 数量: "+e.Quantity+", 进场价格: "+e.Price+"(单位: "+e.Unit+")","inline-desc":"最后进场时间: "+e.ChangeDate,"is-link":"","border-intent":!1,"arrow-direction":t.materialArrowDirection},nativeOn:{click:function(a){t.clickCellArrowFlag(e)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"down"===t.materialArrowDirection,expression:"materialArrowDirection==='down'"}]},[a("form-preview",{attrs:{"header-label":"对应预算机械名称","header-value":e.Name,"body-items":[{label:"机械进场日期",value:e.ApplyDate?e.ApplyDate:e.ChangeDate},{label:"进场单价",value:e.Price},{label:"进场数量",value:e.Quantity},{label:"计量单位",value:e.Unit}]}})],1)],1)])}))],1)}))],1):a("div",[a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("load-more",{attrs:{"show-loading":!1,tip:"当前项目无进场机械数据!","background-color":"#fbf9fe"}})],1)]:t._e(),t._v(" "),1===t.tab?[t.budgets.count>0?a("group",[a("group-title",{staticStyle:{"font-size":"13px"}},[t._v("共有"),a("b",[t._v(t._s(t.budgets.count))]),t._v("个预算机械")]),t._v(" "),a("div",t._l(t.budgets.items,function(e,i){return a("group",{key:i,staticClass:"materialtitle",attrs:{title:"预算录入日期："+e.date}},[a("swipeout",t._l(e.result,function(e,i){return a("swipeout-item",{key:i,attrs:{threshold:.5,"underlay-color":"#ccc"}},[t.canmaterial?a("div",{attrs:{slot:"right-menu"},slot:"right-menu"},[a("swipeout-button",{attrs:{type:"primary"},nativeOn:{click:function(a){t.updateMaterial(e)}}},[t._v("修改")]),t._v(" "),a("swipeout-button",{attrs:{type:"warn"},nativeOn:{click:function(a){t.deleteMaterial(e,i)}}},[t._v("删除")])],1):t._e(),t._v(" "),a("div",{staticClass:"project-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[a("cell",{key:i,attrs:{title:"名称: "+e.Name+", 数量: "+e.Quantity+", 预算价格: "+e.Price+"(单位: "+e.Unit+")","inline-desc":"最后更新时间:"+e.ChangeDate,"is-link":"","border-intent":!1,"arrow-direction":t.materialBudgetArrowDirection},nativeOn:{click:function(a){t.clickCellBudgetArrowFlag(e)}}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"down"===t.materialBudgetArrowDirection,expression:"materialBudgetArrowDirection==='down'"}]},[a("form-preview",{attrs:{"header-label":"预算机械名称","header-value":e.Name,"body-items":[{label:"预算录入日期",value:e.ChangeDate},{label:"预算单价",value:e.Price},{label:"预算数量",value:e.Quantity},{label:"计量单位",value:e.Unit}]}})],1)],1)])}))],1)}))],1):a("div",[a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("load-more",{attrs:{"show-loading":!1,tip:"当前项目无预算机械数据!","background-color":"#fbf9fe"}})],1)]:t._e(),t._v(" "),a("select-project-dialog",{attrs:{show:t.showProjectSelectDlg},on:{"on-click-back":function(e){t.showProjectSelectDlg=!1,t.showAddBtn=t.canmaterial},"on-select-project":t.selectProject,"on-click-empty-button":function(e){t.$router.push({name:"pupload"})}}}),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:t.showUpdateMaterialDlg,callback:function(e){t.showUpdateMaterialDlg=e},expression:"showUpdateMaterialDlg"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":t.updateMaterialBackHandle}},[t._v("\n        "+t._s(t.updateMaterialTitle)+"\n      ")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab,expression:"tab===0"}]},[a("cell",{attrs:{title:"项目名称"}},[t._v(t._s(t.project.value))]),t._v(" "),a("group",{attrs:{title:"进场机械清单信息"}},[a("cell",{attrs:{title:"选择一个预算机械","inline-desc":"进场机械需要与预算机械保持一致(必选)",value:t.selectedBudgetName,"is-link":""},nativeOn:{click:function(e){return t.showBudgetOptionsDlg(e)}}}),t._v(" "),a("cell",{attrs:{title:"进场日期"}},[a("datetime",{attrs:{placeholder:"请输入进场机械的申请时间",format:"YYYY-MM-DD","min-year":2018},model:{value:t.material.date,callback:function(e){t.$set(t.material,"date",e)},expression:"material.date"}})],1),t._v(" "),a("cell",{attrs:{title:"机械价格"}},[a("x-input",{attrs:{placeholder:"输入该机械的价格(可选)",min:0},model:{value:t.material.price,callback:function(e){t.$set(t.material,"price",e)},expression:"material.price"}})],1),t._v(" "),a("cell",{attrs:{title:"数量"}},[a("x-input",{attrs:{min:0,width:"150px"},model:{value:t.material.quantity,callback:function(e){t.$set(t.material,"quantity",e)},expression:"material.quantity"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button"},nativeOn:{click:function(e){return t.saveMaterial(e)}}},[t._v("保存")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===t.tab,expression:"tab===1"}]},[a("cell",{attrs:{title:"项目名称"}},[t._v(t._s(t.project.value))]),t._v(" "),a("group",{attrs:{title:"预算机械清单信息"}},[a("cell",{attrs:{title:"机械名称"}},[a("x-input",{attrs:{type:"text",placeholder:"请输入该机械的名称"},model:{value:t.material.name,callback:function(e){t.$set(t.material,"name",e)},expression:"material.name"}})],1),t._v(" "),a("cell",{attrs:{title:"机械价格"}},[a("x-input",{attrs:{placeholder:"请输入该机械的价格"},model:{value:t.material.price,callback:function(e){t.$set(t.material,"price",e)},expression:"material.price"}})],1),t._v(" "),a("cell",{attrs:{title:"数量"}},[a("x-input",{attrs:{width:"150px"},model:{value:t.material.quantity,callback:function(e){t.$set(t.material,"quantity",e)},expression:"material.quantity"}})],1),t._v(" "),a("cell",{attrs:{title:"计量单位"}},[a("x-input",{attrs:{placeholder:"请输入对应数量的计量单位"},model:{value:t.material.unit,callback:function(e){t.$set(t.material,"unit",e)},expression:"material.unit"}})],1)],1),t._v(" "),a("br"),t._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button"},nativeOn:{click:function(e){return t.saveMaterial(e)}}},[t._v("保存")])],1)],1)],1),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:t.showBudgetMaterialPopup,callback:function(e){t.showBudgetMaterialPopup=e},expression:"showBudgetMaterialPopup"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(e){t.showBudgetMaterialPopup=!1}}},[t._v("\n        当前项目入库的预算机械列表\n      ")]),t._v(" "),t.budgetMaterials.length>0?a("div",[a("search",{ref:"search",attrs:{placeholder:"输入要查询的预算机械名称",position:"absolute","auto-scroll-to-top":"",top:"46px",results:t.searchResults},on:{"on-focus":t.searchFocus,"on-change":t.inputSearchChange,"on-result-click":t.clickSearchResult,"on-cancel":t.cancelSearch},model:{value:t.searchModel,callback:function(e){t.searchModel=e},expression:"searchModel"}}),t._v(" "),a("checklist",{attrs:{title:"至少勾选一个预算机械名称",max:1,options:t.budgetMaterials},on:{"on-change":t.selectMaterialChange},model:{value:t.budgetMaterialsModel,callback:function(e){t.budgetMaterialsModel=e},expression:"budgetMaterialsModel"}})],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.budgetMaterials.length,expression:"budgetMaterials.length === 0"}]},[a("load-more",{staticStyle:{"padding-top":"30px"},attrs:{"show-loading":!1,tip:"当前项目没有任何入库的预算机械!","background-color":"#fbf9fe"}}),t._v(" "),a("flexbox",[a("flexbox-item"),t._v(" "),a("flexbox-item",[a("x-button",{attrs:{type:"primary","action-type":"button",mini:""},nativeOn:{click:function(e){return t.goNewBudgetPage(e)}}},[t._v("新建预算机械\n            ")])],1),t._v(" "),a("flexbox-item")],1)],1)],1)],1),t._v(" "),a("actionsheet",{attrs:{menus:{open:"复制地址(电脑端编辑)",excel:"汇总统计"},"close-on-clicking-mask":!0,"show-cancel":""},on:{"on-click-menu":t.clickMenuOptions,"on-after-hide":t.hideMenuOptions},model:{value:t.menuOptions,callback:function(e){t.menuOptions=e},expression:"menuOptions"}})],2)},staticRenderFns:[]};var G=a("./node_modules/vue-loader/lib/component-normalizer.js")(R,Q,!1,function(t){a('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2db6336c","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/MaterialMachineEnter.vue')},"data-v-2db6336c",null);e.default=G.exports}});