<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tomcat Linux安装及其环境配置 | 堆栈云</title>
    <meta name="description" content="人生处万类，知识最为贤。 —— 韩愈">
    <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="堆栈云">
  <link rel="stylesheet" href="/fonts/fonts.css">
  <link rel="icon" href="/favicon.ico">
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="apple-touch-icon" href="/img/logo.png">
  <meta property="keywords" content="堆栈云,java,博客,技术培训,前端培训,后端培训,ionic,springboot,vue,小程序,安卓app,苹果App,技术博客,分享,vuejs,python,灵鸽,爬虫,python爬虫">
  <meta property="description" content="堆栈云，点滴记录贵在坚持">
  <script id="cookieinfo" src="https://cookieinfoscript.com/js/cookieinfo.min.js" data-message="我们使用cookies来提高用户体验,继续浏览网站表示同意我们使用cookies." data-linkmsg="了解更多" data-bg="#645862" data-fg="#FFFFFF" data-link="#F1D600" data-cookie="CookieInfoScript" data-text-align="left" data-close-text="知道了!"></script>
  <script async="true" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <script async="true" src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>(adsbygoogle = window.adsbygoogle || []).push({  google_ad_client: 'ca-pub-1893384651266286',  enable_page_level_ads: true });</script>
    <meta property="article:modified_time" content="Wed Sep 18 2019 13:45:55 GMT+0800 (GMT+08:00)"><meta property="og:site_name" content="堆栈云"><meta property="og:title" content="Tomcat Linux安装及其环境配置"><meta property="og:type" content="article"><meta property="og:url" content="/blog/setup/tomcat.html"><meta name="twitter:title" content="Tomcat Linux安装及其环境配置"><meta name="twitter:url" content="/blog/setup/tomcat.html"><meta name="twitter:card" content="summary_large_image">
    <link rel="preload" href="/assets/css/0.styles.e064409b.css" as="style"><link rel="preload" href="/assets/js/app.017aad9b.js" as="script"><link rel="preload" href="/assets/js/4.aba833a4.js" as="script"><link rel="preload" href="/assets/js/3.107e6c4e.js" as="script"><link rel="preload" href="/assets/js/56.8b874b04.js" as="script">
    <link rel="stylesheet" href="/assets/css/0.styles.e064409b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">堆栈云</span></a> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/CHANGELOG.html" class="nav-link">历史更新</a></div><div class="nav-item"><a href="/contact-me/" class="nav-link">留言板</a></div><div class="nav-item"><a href="https://code.pingbook.top/ant-design-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ant-design-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://code.pingbook.top/ionic-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ionic-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><a href="/CHANGELOG.html" class="nav-link">历史更新</a></div><div class="nav-item"><a href="/contact-me/" class="nav-link">留言板</a></div><div class="nav-item"><a href="https://code.pingbook.top/ant-design-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ant-design-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://code.pingbook.top/ionic-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ionic-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>前序</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/" class="sidebar-link">关于博客</a></li><li><a href="/blog/synax.html" class="sidebar-link">语法参考手册</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>技术版本更新</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/release/jdk.html" class="sidebar-link">JDK版本新特性</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>环境配置和部署</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/setup/wordpress.html" class="sidebar-link">Wordpress Linux命令其环境配置</a></li><li><a href="/blog/setup/raspberry.html" class="sidebar-link">Raspberry Linux安装及其环境配置</a></li><li><a href="/blog/setup/linux.html" class="sidebar-link">Debian Linux命令其环境配置</a></li><li><a href="/blog/setup/nginx.html" class="sidebar-link">Nginx Linux安装及其环境配置</a></li><li><a href="/blog/setup/python.html" class="sidebar-link">Python Linux安装及其环境配置</a></li><li><a href="/blog/setup/mysql.html" class="sidebar-link">Debian MYSQL8安装及其环境配置</a></li><li><a href="/blog/setup/node-nuxt.html" class="sidebar-link">nuxt生产环境安装及其配置</a></li><li><a href="/blog/setup/uwsgi.html" class="sidebar-link">Uwsgi Linux安装及其环境配置</a></li><li><a href="/blog/setup/tomcat.html" class="active sidebar-link">Tomcat Linux安装及其环境配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#jdk-和-tomcat-安装-更新到2019年8月10日" class="sidebar-link">JDK 和 tomcat 安装[更新到2019年8月10日]</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#tomcat启动脚本" class="sidebar-link">tomcat启动脚本</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#查看tomcat启动状态" class="sidebar-link">查看tomcat启动状态</a></li><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#setenv-sh文件-配置tomcat于springboot的profile参数" class="sidebar-link">setenv.sh文件 配置tomcat于springboot的profile参数</a></li><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#tomcat的配置，配置bio-nio-也就是最大连接数和处理连接数的线程池的大小：" class="sidebar-link">tomcat的配置，配置BIO/NIO,也就是最大连接数和处理连接数的线程池的大小：</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#severe-could-not-contact-localhost-8005-base-port-8005-and-offset-0" class="sidebar-link">SEVERE: Could not contact [localhost:8005] (base port [8005] and offset [0])</a></li><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#initial-server-setup-with-debian-9-初始化debian系统" class="sidebar-link">initial-server-setup-with-debian-9 初始化debian系统</a></li><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#caused-by-org-springframework-jmx-export-unabletoregistermbeanexception-unable-to-register-mbean-hikaridatasource-null-with-key-datasource-nested-exception-is-javax-management-instancealreadyexistsexception-com-zaxxer-hikari-name-datasource-type-hikaridatasource" class="sidebar-link">Caused by: org.springframework.jmx.export.UnableToRegisterMBeanException: Unable to register MBean [HikariDataSource (null)] with key 'dataSource'; nested exception is javax.management.InstanceAlreadyExistsException: com.zaxxer.hikari:name=dataSource,type=HikariDataSource</a></li><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#the-web-application-to-have-started-a-thread-named-abandoned-connection-cleanup-thread-but-has-failed-to-stop-it-this-is-very-likely-to-create-a-memory-leak-stack-trace-of-thread" class="sidebar-link">The web application to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:</a></li><li class="sidebar-sub-header"><a href="/blog/setup/tomcat.html#tomcat-this-web-application-instance-has-been-stopped-already-could-not-load-the-following-stack-trace-is-thrown-for-debugging-purposes-as-well-as-to-attempt-to-terminate-the-thread-which-caused-the-illegal-access" class="sidebar-link">tomcat this web application instance has been stopped already. Could not load []. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.</a></li></ul></li></ul></li><li><a href="/blog/setup/redis.html" class="sidebar-link">Redis Linux安装及其环境配置</a></li><li><a href="/blog/setup/sqlalchemy.html" class="sidebar-link">SQLAlchemy Linux安装及其环境配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>2019年归档</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/2019/how-to-remove-search-index-forever.html" class="sidebar-link">/blog/2019/how-to-remove-search-index-forever.html</a></li><li><a href="/blog/2019/spring-list-params-same-key.html" class="sidebar-link">springboot List param或者http Get请求相同的参数名称覆盖不能发送</a></li><li><a href="/blog/2019/how-to-cross-gfw.html" class="sidebar-link">可用的科学上网,翻墙方式(2019年最新更新)</a></li><li><a href="/blog/2019/07-04-what.html" class="sidebar-link">7月4日整理</a></li><li><a href="/blog/2019/06-29-what.html" class="sidebar-link">6月29日整理</a></li><li><a href="/blog/2019/06-26-what.html" class="sidebar-link">6月26日整理</a></li><li><a href="/blog/2019/06-22-what.html" class="sidebar-link">6月22日整理</a></li><li><a href="/blog/2019/06-21-what.html" class="sidebar-link">6月21日整理</a></li><li><a href="/blog/2019/06-17-what.html" class="sidebar-link">6月17日整理</a></li><li><a href="/blog/2019/06-13-what.html" class="sidebar-link">6月13日整理</a></li><li><a href="/blog/2019/06-12-what.html" class="sidebar-link">6月12日整理</a></li><li><a href="/blog/2019/06-09-what.html" class="sidebar-link">6月9日整理</a></li><li><a href="/blog/2019/06-02-what.html" class="sidebar-link">6月2日整理</a></li><li><a href="/blog/2019/06-01-what.html" class="sidebar-link">6月1日整理</a></li><li><a href="/blog/2019/05-31-what.html" class="sidebar-link">5月31日整理</a></li><li><a href="/blog/2019/05-29-what.html" class="sidebar-link">5月29日整理</a></li><li><a href="/blog/2019/05-26-what.html" class="sidebar-link">5月26日整理</a></li><li><a href="/blog/2019/05-25-what.html" class="sidebar-link">5月25日整理</a></li><li><a href="/blog/2019/05-24-what.html" class="sidebar-link">5月24日整理</a></li><li><a href="/blog/2019/05-22-what.html" class="sidebar-link">5月22日整理</a></li><li><a href="/blog/2019/05-20-what.html" class="sidebar-link">5月20日整理</a></li><li><a href="/blog/2019/05-15-what.html" class="sidebar-link">5月15日整理</a></li><li><a href="/blog/2019/05-14-what.html" class="sidebar-link">5月14日整理</a></li><li><a href="/blog/2019/05-11-what.html" class="sidebar-link">5月11日整理</a></li><li><a href="/blog/2019/05-10-what.html" class="sidebar-link">5月10日整理</a></li><li><a href="/blog/2019/05-09-what.html" class="sidebar-link">5月9日整理</a></li><li><a href="/blog/2019/05-06-what.html" class="sidebar-link">5月6日整理</a></li><li><a href="/blog/2019/05-04-what.html" class="sidebar-link">5月4日整理</a></li><li><a href="/blog/2019/05-02-what.html" class="sidebar-link">5月2日整理</a></li><li><a href="/blog/2019/04-30-what.html" class="sidebar-link">4月30日整理</a></li><li><a href="/blog/2019/04-29-what.html" class="sidebar-link">4月29日整理</a></li><li><a href="/blog/2019/04-28-what.html" class="sidebar-link">4月28日整理</a></li><li><a href="/blog/2019/04-26-what.html" class="sidebar-link">4月26日整理</a></li></ul></section></li><li><a href="/blog/todo/" class="sidebar-link">亟待处理</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/tools/idea.html" class="sidebar-link">【开发工具】IDEA</a></li><li><a href="/blog/tools/vscode.html" class="sidebar-link">【开发工具】VS Code</a></li><li><a href="/blog/tools/ps.html" class="sidebar-link">【设计工具】PhotoShop</a></li></ul></section></li><li><a href="/blog/video/" class="sidebar-link">优秀影视作品集</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>友情链接</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="https://mybatis.plus/" target="_blank" rel="noopener noreferrer" class="sidebar-link">【后端】Mybatis Plus<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="http://www.ruanyifeng.com/blog/" target="_blank" rel="noopener noreferrer" class="sidebar-link">【前端】阮一峰博客<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://www.jianshu.com/u/4ca93d60a9fe" target="_blank" rel="noopener noreferrer" class="sidebar-link">【前端】IT晴天<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener noreferrer" class="sidebar-link">【前端】awesome vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://ionicframework.com/docs/components" target="_blank" rel="noopener noreferrer" class="sidebar-link">【前端】Ionic Vue Components<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://github.com/vueComponent/ant-design-vue-awesome" target="_blank" rel="noopener noreferrer" class="sidebar-link">【前端】awesome ant-design-vue<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://github.com/ulivz/awesome-vuepress" target="_blank" rel="noopener noreferrer" class="sidebar-link">【前端】awesome-vuepress<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><a href="https://tool.lu/" target="_blank" rel="noopener noreferrer" class="sidebar-link">【其它】程序员的工具集<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h2 id="jdk-和-tomcat-安装-更新到2019年8月10日"><a href="#jdk-和-tomcat-安装-更新到2019年8月10日" aria-hidden="true" class="header-anchor">#</a> JDK 和 tomcat 安装[更新到2019年8月10日]</h2> <p><a href="https://www.digitalocean.com/community/tutorials/install-tomcat-9-debian-9" target="_blank" rel="noopener noreferrer">JDK安装步骤参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ol><li>JDK11安装步骤</li></ol> <div class="language- extra-class"><pre class="language-text"><code>$ wget https://github.com/AdoptOpenJDK/openjdk11-binaries/releases/download/jdk-11.0.4%2B11/OpenJDK11U-jdk_x64_linux_hotspot_11.0.4_11.tar.gz
$  tar -zxvf OpenJDK11U-jdk_x64_linux_hotspot_11.0.4_11.tar.gz 
$ nano /etc/profile
export JAVA_HOME=/home/jdk-11.0.4+11
export PATH=$JAVA_HOME/bin:$PATH

$ . /etc/profile
$ java -version
</code></pre></div><ol start="2"><li>JDK8安装步骤</li></ol> <div class="language-shell extra-class"><pre class="language-shell"><code>$  <span class="token function">wget</span>  https://download.oracle.com/otn-pub/java/jdk/8u191-b12/2787e4a523244c269598db4e85c51e0c/jdk-8u191-linux-x64.tar.gz
$  <span class="token function">mkdir</span> /opt/jdk
$  <span class="token function">tar</span> -C /opt/jdk  -zxf /home/jdk-8u191-linux-x64.tar.gz
$  update-alternatives --install /usr/bin/java java /opt/jdk/jdk1.8.0_191/bin/java 1
$  update-alternatives --install /usr/bin/javac javac /opt/jdk/jdk1.8.0_191/bin/javac 1
$  java -version
$  javac 
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>$  wget http://mirrors.advancedhosters.com/apache/tomcat/tomcat-9/v9.0.14/bin/apache-tomcat-9.0.14.tar.gz
$  useradd -rs /bin/false tomcat 注意如果部署到nginx最好这个用户是nginx的用户www-data用户，这样创建文件的时候UMask不会错误。
$  mkdir /opt/tomcat
$  chown -R www-data:www-data apache-tomcat
</code></pre></div><h3 id="tomcat启动脚本"><a href="#tomcat启动脚本" aria-hidden="true" class="header-anchor">#</a> tomcat启动脚本</h3> <div class="language- extra-class"><pre class="language-text"><code>[Unit]
Description=Tomcat9
After=network.target

[Service]
Type=forking
User=www-data
Group=www-data
# 创建文件的默认属性设置
UMask=0022

Environment=CATALINA_PID=/opt/tomcat/apache-tomcat-9.0.14/tomcat9.pid
Environment=TOMCAT_JAVA_HOME=/usr/bin/java
Environment=CATALINA_HOME=/opt/tomcat/apache-tomcat-9.0.14
Environment=CATALINA_BASE=/opt/tomcat/apache-tomcat-9.0.14
Environment=CATALINA_OPTS=
Environment=&quot;JAVA_OPTS=-Dfile.encoding=UTF-8 -Dnet.sf.ehcache.skipUpdateCheck=true -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+UseParNewGC -XX:MaxPermSize=528m -Xms512m -Xmx512m&quot;

ExecStart=/opt/tomcat/apache-tomcat-9.0.14/bin/startup.sh
ExecStop=/bin/kill -15 $MAINPID

# 重启参数
RestartSec=10
Restart=always

[Install]
WantedBy=multi-user.target
</code></pre></div><h2 id="查看tomcat启动状态"><a href="#查看tomcat启动状态" aria-hidden="true" class="header-anchor">#</a> 查看tomcat启动状态</h2> <div class="language- extra-class"><pre class="language-text"><code># systemctl daemon-reload
# systemctl start tomcat
# systemctl enable tomcat
# tail -f -n 150 /opt/tomcat/apache-tomcat-9.0.14/logs/catalina.2018-12-24.log

## Systemctl error
systemctl failed error log: 
&gt; journalctl -xe
</code></pre></div><h2 id="setenv-sh文件-配置tomcat于springboot的profile参数"><a href="#setenv-sh文件-配置tomcat于springboot的profile参数" aria-hidden="true" class="header-anchor">#</a> <code>setenv.sh</code>文件 配置tomcat于<code>springboot</code>的profile参数</h2> <div class="language- extra-class"><pre class="language-text"><code># REM 切换不同的spring环境
# SET JAVA_OPTS=%JAVA_OPTS% -Dspring.profiles.active=dev
#  ----------------------------------linux 配置脚本 -------------------------------------------------
# REM 参考地址： https://www.javacodegeeks.com/2012/06/spring-31-profiles-and-tomcat.html, 设置内存
JAVA_OPTS=&quot;$JAVA_OPTS -Xms2512M -Xmx2512M -XX:PermSize=64M -XX:MaxNewSize=128M -XX:MaxPermSize=128M -Dspring.profiles.active=prod&quot;
# REM 参考文档： https://stackoverflow.com/questions/18812762/the-apr-based-apache-tomcat-native-library-was-not-found-on-the-java-library-pat
# REM 错误信息： The APR based Apache Tomcat Native library was not found on the java.library.path
# REM 配置脚本： 下面的是针对Linux环境的，默认安装apr和tomcat-native包后的地址，Linux安装步骤参考gist中说明
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/apr/lib
</code></pre></div><h2 id="tomcat的配置，配置bio-nio-也就是最大连接数和处理连接数的线程池的大小："><a href="#tomcat的配置，配置bio-nio-也就是最大连接数和处理连接数的线程池的大小：" aria-hidden="true" class="header-anchor">#</a> tomcat的配置，配置BIO/NIO,也就是最大连接数和处理连接数的线程池的大小：</h2> <div class="language- extra-class"><pre class="language-text"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!--
  Licensed to the Apache Software Foundation (ASF) under one or more
  contributor license agreements.  See the NOTICE file distributed with
  this work for additional information regarding copyright ownership.
  The ASF licenses this file to You under the Apache License, Version 2.0
  (the &quot;License&quot;); you may not use this file except in compliance with
  the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--&gt;
&lt;!-- Note:  A &quot;Server&quot; is not itself a &quot;Container&quot;, so you may not
     define subcomponents such as &quot;Valves&quot; at this level.
     Documentation at /docs/config/server.html
 --&gt;
&lt;Server port=&quot;8005&quot; shutdown=&quot;SHUTDOWN&quot;&gt;
  &lt;Listener className=&quot;org.apache.catalina.startup.VersionLoggerListener&quot; /&gt;
  &lt;!-- Security listener. Documentation at /docs/config/listeners.html
  &lt;Listener className=&quot;org.apache.catalina.security.SecurityListener&quot; /&gt;
  --&gt;
  &lt;!--APR library loader. Documentation at /docs/apr.html --&gt;
  &lt;Listener className=&quot;org.apache.catalina.core.AprLifecycleListener&quot; SSLEngine=&quot;on&quot; /&gt;
  &lt;!-- Prevent memory leaks due to use of particular java/javax APIs--&gt;
  &lt;Listener className=&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot; /&gt;
  &lt;Listener className=&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot; /&gt;
  &lt;Listener className=&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot; /&gt;

  &lt;!-- Global JNDI resources
       Documentation at /docs/jndi-resources-howto.html
  --&gt;
  &lt;GlobalNamingResources&gt;
    &lt;!-- Editable user database that can also be used by
         UserDatabaseRealm to authenticate users
    --&gt;
    &lt;Resource name=&quot;UserDatabase&quot; auth=&quot;Container&quot;
              type=&quot;org.apache.catalina.UserDatabase&quot;
              description=&quot;User database that can be updated and saved&quot;
              factory=&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;
              pathname=&quot;conf/tomcat-users.xml&quot; /&gt;
  &lt;/GlobalNamingResources&gt;

  &lt;!-- A &quot;Service&quot; is a collection of one or more &quot;Connectors&quot; that share
       a single &quot;Container&quot; Note:  A &quot;Service&quot; is not itself a &quot;Container&quot;,
       so you may not define subcomponents such as &quot;Valves&quot; at this level.
       Documentation at /docs/config/service.html
   --&gt;
  &lt;Service name=&quot;Catalina&quot;&gt;
    &lt;!-- &lt;Executor name=&quot;tomcatThreadPool&quot; 
        namePrefix=&quot;tomcat-thread-&quot;
        maxThreads=&quot;200&quot;
        minSpareThreads=&quot;4&quot;/&gt; --&gt;
 
    &lt;!-- A &quot;Connector&quot; represents an endpoint by which requests are received
         and responses are returned. Documentation at :
         Java HTTP Connector: /docs/config/http.html
         Java AJP  Connector: /docs/config/ajp.html
         APR (HTTP/AJP) Connector: /docs/apr.html
         Define a non-SSL/TLS HTTP/1.1 Connector on port 8080
         参考文档参数： https://tomcat.apache.org/tomcat-9.0-doc/config/http.html
         采用线程池的技术来控制tomcat，不用再重新开启一个线程针对每个http请求
          1. maxThreads default=200，代表初始的处理器请求的线程池大小，worker数量 ,并发数量
          2. minSpareThreads default=25, 空闲使用中的线程池数量
          3. maxConnections 允许的最多tcp连接数
          4. acceptCount 超过maxConnections后运行的最多客户端         
    --&gt;
    &lt;Connector 
               port=&quot;8080&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;
               maxConnections=&quot;20000&quot;
               acceptCount=&quot;100&quot;
               maxThreads=&quot;1000&quot;
               minSpareThreads=&quot;4&quot;
               connectionTimeout=&quot;20000&quot;
               redirectPort=&quot;8443&quot; /&gt;
    &lt;!-- A &quot;Connector&quot; using the shared thread pool--&gt;
    &lt;!--
    &lt;Connector executor=&quot;tomcatThreadPool&quot;
               port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;
               connectionTimeout=&quot;20000&quot;
               redirectPort=&quot;8443&quot; /&gt;
    --&gt;
    &lt;!-- Define a SSL/TLS HTTP/1.1 Connector on port 8443
         This connector uses the NIO implementation. The default
         SSLImplementation will depend on the presence of the APR/native
         library and the useOpenSSL attribute of the
         AprLifecycleListener.
         Either JSSE or OpenSSL style configuration may be used regardless of
         the SSLImplementation selected. JSSE style configuration is used below.
    --&gt;
    &lt;!--
    &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot;
               maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot;&gt;
        &lt;SSLHostConfig&gt;
            &lt;Certificate certificateKeystoreFile=&quot;conf/localhost-rsa.jks&quot;
                         type=&quot;RSA&quot; /&gt;
        &lt;/SSLHostConfig&gt;
    &lt;/Connector&gt;
    --&gt;
    &lt;!-- Define a SSL/TLS HTTP/1.1 Connector on port 8443 with HTTP/2
         This connector uses the APR/native implementation which always uses
         OpenSSL for TLS.
         Either JSSE or OpenSSL style configuration may be used. OpenSSL style
         configuration is used below.
    --&gt;
    &lt;!--
    &lt;Connector port=&quot;8443&quot; protocol=&quot;org.apache.coyote.http11.Http11AprProtocol&quot;
               maxThreads=&quot;150&quot; SSLEnabled=&quot;true&quot; &gt;
        &lt;UpgradeProtocol className=&quot;org.apache.coyote.http2.Http2Protocol&quot; /&gt;
        &lt;SSLHostConfig&gt;
            &lt;Certificate certificateKeyFile=&quot;conf/localhost-rsa-key.pem&quot;
                         certificateFile=&quot;conf/localhost-rsa-cert.pem&quot;
                         certificateChainFile=&quot;conf/localhost-rsa-chain.pem&quot;
                         type=&quot;RSA&quot; /&gt;
        &lt;/SSLHostConfig&gt;
    &lt;/Connector&gt;
    --&gt;

    &lt;!-- Define an AJP 1.3 Connector on port 8009 --&gt;
    &lt;Connector port=&quot;8009&quot; protocol=&quot;AJP/1.3&quot; redirectPort=&quot;8443&quot; /&gt;


    &lt;!-- An Engine represents the entry point (within Catalina) that processes
         every request.  The Engine implementation for Tomcat stand alone
         analyzes the HTTP headers included with the request, and passes them
         on to the appropriate Host (virtual host).
         Documentation at /docs/config/engine.html --&gt;

    &lt;!-- You should set jvmRoute to support load-balancing via AJP ie :
    &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot; jvmRoute=&quot;jvm1&quot;&gt;
    --&gt;
    &lt;Engine name=&quot;Catalina&quot; defaultHost=&quot;localhost&quot;&gt;

      &lt;!--For clustering, please take a look at documentation at:
          /docs/cluster-howto.html  (simple how to)
          /docs/config/cluster.html (reference documentation) --&gt;
      &lt;!--
      &lt;Cluster className=&quot;org.apache.catalina.ha.tcp.SimpleTcpCluster&quot;/&gt;
      --&gt;

      &lt;!-- Use the LockOutRealm to prevent attempts to guess user passwords
           via a brute-force attack --&gt;
      &lt;Realm className=&quot;org.apache.catalina.realm.LockOutRealm&quot;&gt;
        &lt;!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key &quot;UserDatabase&quot;.  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  --&gt;
        &lt;Realm className=&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;
               resourceName=&quot;UserDatabase&quot;/&gt;
      &lt;/Realm&gt;

      &lt;Host name=&quot;localhost&quot;  appBase=&quot;/www/yitieyilu.com/yitieyiluopen&quot;
            unpackWARs=&quot;true&quot; autoDeploy=&quot;true&quot;&gt;

        &lt;!-- SingleSignOn valve, share authentication between web applications
             Documentation at: /docs/config/valve.html --&gt;
        &lt;!--
        &lt;Valve className=&quot;org.apache.catalina.authenticator.SingleSignOn&quot; /&gt;
        --&gt;

        &lt;!-- Access log processes all example.
             Documentation at: /docs/config/valve.html
             Note: The pattern used is equivalent to using pattern=&quot;common&quot; --&gt;
        &lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;
               prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;
               pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;
        
        &lt;!-- 对应所有的安装包文件, 此处不配置--&gt;

      &lt;/Host&gt;
    &lt;/Engine&gt;
  &lt;/Service&gt;
&lt;/Server&gt;

</code></pre></div><p>https://linuxconfig.org/how-to-install-tomcat-9-on-debian-9-stretch-linux 推荐操作步骤
https://gist.github.com/jniltinho/a7bd30288342a5d352e6, 这里的tomcat.service中的<code>CATALINA_OPTS</code>配置可能导致不能启动tomcat</p> <p>tomcat install failed:</p> <div class="language- extra-class"><pre class="language-text"><code> systemctl status tomcat
● tomcat.service - Tomcat9
   Loaded: loaded (/etc/systemd/system/tomcat.service; enabled; vendor preset: enabled)
   Active: failed (Result: exit-code) since Wed 2018-06-27 12:31:36 CST; 13s ago
  Process: 1289 ExecStart=/usr/local/tomcat9/bin/startup.sh (code=exited, status=2)

6月 27 12:31:36 BQA startup.sh[1289]: Using CATALINA_BASE:   /usr/local/tomcat9
6月 27 12:31:36 BQA startup.sh[1289]: Using CATALINA_HOME:   /usr/local/tomcat9
6月 27 12:31:36 BQA startup.sh[1289]: Using CATALINA_TMPDIR: /usr/local/tomcat9/temp
6月 27 12:31:36 BQA startup.sh[1289]: Using JRE_HOME:        /usr
6月 27 12:31:36 BQA startup.sh[1289]: Using CLASSPATH:       /usr/local/tomcat9/bin/bootstrap.jar:/usr/local/tomcat9/bin/tomcat-juli.jar
6月 27 12:31:36 BQA startup.sh[1289]: Using CATALINA_PID:    /tmp/tomcat/tomcat9.pid
6月 27 12:31:36 BQA systemd[1]: tomcat.service: Control process exited, code=exited status=2
6月 27 12:31:36 BQA systemd[1]: Failed to start Tomcat9.
6月 27 12:31:36 BQA systemd[1]: tomcat.service: Unit entered failed state.
6月 27 12:31:36 BQA systemd[1]: tomcat.service: Failed with result 'exit-code'.
root@BQA:/usr/local/tomcat9/bin# 
</code></pre></div><p>tomcat start,but met 404, 可能文件有问题,重新安装按照上面的操作步骤.</p> <div class="language- extra-class"><pre class="language-text"><code>org.apache.jasper.JasperException: org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.index_jsp
	org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:572)
	org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:390)
	org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:386)
	org.apache.jasper.servlet.JspServlet.service(JspServlet.java:330)
	javax.servlet.http.HttpServlet.service(HttpServlet.java:741)
	org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
Root Cause

org.apache.jasper.JasperException: java.lang.ClassNotFoundException: org.apache.jsp.index_jsp
</code></pre></div><h3 id="severe-could-not-contact-localhost-8005-base-port-8005-and-offset-0"><a href="#severe-could-not-contact-localhost-8005-base-port-8005-and-offset-0" aria-hidden="true" class="header-anchor">#</a> SEVERE: Could not contact [localhost:8005] (base port [8005] and offset [0])</h3> <blockquote></blockquote> <h3 id="initial-server-setup-with-debian-9-初始化debian系统"><a href="#initial-server-setup-with-debian-9-初始化debian系统" aria-hidden="true" class="header-anchor">#</a> initial-server-setup-with-debian-9 初始化debian系统</h3> <blockquote><p>建用户和ufw</p></blockquote> <h4 id="错误参数"><a href="#错误参数" aria-hidden="true" class="header-anchor">#</a> -----------------------------------------------------错误参数-----------------------------------------------------------------------------------</h4> <h3 id="caused-by-org-springframework-jmx-export-unabletoregistermbeanexception-unable-to-register-mbean-hikaridatasource-null-with-key-datasource-nested-exception-is-javax-management-instancealreadyexistsexception-com-zaxxer-hikari-name-datasource-type-hikaridatasource"><a href="#caused-by-org-springframework-jmx-export-unabletoregistermbeanexception-unable-to-register-mbean-hikaridatasource-null-with-key-datasource-nested-exception-is-javax-management-instancealreadyexistsexception-com-zaxxer-hikari-name-datasource-type-hikaridatasource" aria-hidden="true" class="header-anchor">#</a> Caused by: org.springframework.jmx.export.UnableToRegisterMBeanException: Unable to register MBean [HikariDataSource (null)] with key 'dataSource'; nested exception is javax.management.InstanceAlreadyExistsException: com.zaxxer.hikari:name=dataSource,type=HikariDataSource</h3> <h1 id="同一个tomcat容器部署多个war包报错：-unable-to-register-mbean-hikaridatasource-null-with-key-datasource-nested-exception-is-javax-management-instancealreadyexistsexception"><a href="#同一个tomcat容器部署多个war包报错：-unable-to-register-mbean-hikaridatasource-null-with-key-datasource-nested-exception-is-javax-management-instancealreadyexistsexception" aria-hidden="true" class="header-anchor">#</a> 同一个tomcat容器部署多个war包报错： : Unable to register MBean [HikariDataSource (null)] with key 'dataSource'; nested exception is javax.management.InstanceAlreadyExistsException:</h1> <p>spring.jmx.enabled=true
spring.jmx.default-domain=com.yitieyilu.core</p> <h3 id="the-web-application-to-have-started-a-thread-named-abandoned-connection-cleanup-thread-but-has-failed-to-stop-it-this-is-very-likely-to-create-a-memory-leak-stack-trace-of-thread"><a href="#the-web-application-to-have-started-a-thread-named-abandoned-connection-cleanup-thread-but-has-failed-to-stop-it-this-is-very-likely-to-create-a-memory-leak-stack-trace-of-thread" aria-hidden="true" class="header-anchor">#</a> The web application to have started a thread named [Abandoned connection cleanup thread] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:</h3> <blockquote><p>将jdbcjar改成provide放在tomcat的lib目录</p></blockquote> <h3 id="tomcat-this-web-application-instance-has-been-stopped-already-could-not-load-the-following-stack-trace-is-thrown-for-debugging-purposes-as-well-as-to-attempt-to-terminate-the-thread-which-caused-the-illegal-access"><a href="#tomcat-this-web-application-instance-has-been-stopped-already-could-not-load-the-following-stack-trace-is-thrown-for-debugging-purposes-as-well-as-to-attempt-to-terminate-the-thread-which-caused-the-illegal-access" aria-hidden="true" class="header-anchor">#</a> tomcat this web application instance has been stopped already. Could not load []. The following stack trace is thrown for debugging purposes as well as to attempt to terminate the thread which caused the illegal access.</h3> <blockquote><p>重启tomcat，缓存的问题</p></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新:</span> <span class="time">9/18/2019, 1:45:55 PM</span></div> <div style="text-align: center; margin-left: 20px;color: #2c3e50;font-weight: 300;font-size: 15px;"><span id="busuanzi_container_page_pv">
        本文浏览量
        <span id="busuanzi_value_page_pv"></span>次
      </span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog/setup/uwsgi.html" class="prev">Uwsgi Linux安装及其环境配置</a></span> <span class="next"><a href="/blog/setup/redis.html">Redis Linux安装及其环境配置</a>→
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.017aad9b.js" defer></script><script src="/assets/js/4.aba833a4.js" defer></script><script src="/assets/js/3.107e6c4e.js" defer></script><script src="/assets/js/56.8b874b04.js" defer></script>
  </body>
</html>
