webpackJsonp([16],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-530e89bf","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/RulesHome.vue':function(e,t){},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-c625a4a0","scoped":false,"hasInlineConfig":false}!./node_modules/vux-loader/src/after-less-loader.js!./node_modules/less-loader/index.js?{"minimize":true,"sourceMap":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/vux/src/components/marquee/marquee.vue':function(e,t){},"./node_modules/vux/src/components/marquee/marquee-item.vue":function(e,t,o){"use strict";var s={render:function(){var e=this.$createElement;return(this._self._c||e)("li",[this._t("default")],2)},staticRenderFns:[]},n=o("./node_modules/vue-loader/lib/component-normalizer.js")({name:"marquee-item",mounted:function(){var e=this;this.$nextTick(function(){e.$parent.destroy(),e.$parent.init(),e.$parent.start()})}},s,!1,null,null,null);t.a=n.exports},"./node_modules/vux/src/components/marquee/marquee.vue":function(e,t,o){"use strict";Number,Number,String,Number;var s={name:"marquee",props:{interval:{type:Number,default:2e3},duration:{type:Number,default:300},direction:{type:String,default:"up"},itemHeight:Number},beforeDestroy:function(){this.destroy()},data:function(){return{currenTranslateY:0,height:"",length:0,currentIndex:0,noAnimate:!1}},methods:{destroy:function(){this.timer&&clearInterval(this.timer)},init:function(){this.destroy(),this.cloneNode&&this.$refs.box.removeChild(this.cloneNode),this.cloneNode=null;var e=this.$refs.box.firstElementChild;return!!e&&(this.length=this.$refs.box.children.length,this.height=this.itemHeight||e.offsetHeight,"up"===this.direction?(this.cloneNode=e.cloneNode(!0),this.$refs.box.appendChild(this.cloneNode)):(this.cloneNode=this.$refs.box.lastElementChild.cloneNode(!0),this.$refs.box.insertBefore(this.cloneNode,e)),!0)},start:function(){var e=this;"down"===this.direction&&this.go(!1),this.timer=setInterval(function(){"up"===e.direction?(e.currentIndex+=1,e.currenTranslateY=-e.currentIndex*e.height):(e.currentIndex-=1,e.currenTranslateY=-(e.currentIndex+1)*e.height),e.currentIndex===e.length?setTimeout(function(){e.go(!0)},e.duration):-1===e.currentIndex?setTimeout(function(){e.go(!1)},e.duration):e.noAnimate=!1},this.interval+this.duration)},go:function(e){this.noAnimate=!0,e?(this.currentIndex=0,this.currenTranslateY=0):(this.currentIndex=this.length-1,this.currenTranslateY=-(this.currentIndex+1)*this.height)}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vux-marquee",style:{height:this.height+"px"}},[t("ul",{ref:"box",staticClass:"vux-marquee-box",style:{transform:"translate3d(0,"+this.currenTranslateY+"px,0)",transition:"transform "+(this.noAnimate?0:this.duration)+"ms"}},[this._t("default")],2)])},staticRenderFns:[]};var i=o("./node_modules/vue-loader/lib/component-normalizer.js")(s,n,!1,function(e){o('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-c625a4a0","scoped":false,"hasInlineConfig":false}!./node_modules/vux-loader/src/after-less-loader.js!./node_modules/less-loader/index.js?{"minimize":true,"sourceMap":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/vux/src/components/marquee/marquee.vue')},null,null);t.a=i.exports},"./src/pages/RulesHome.vue":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("./node_modules/vux/src/components/group-title/index.vue"),n=o("./node_modules/vux/src/components/marquee/marquee.vue"),i=o("./node_modules/vux/src/components/marquee/marquee-item.vue"),l=o("./node_modules/vux/src/components/scroller/index.vue"),r=o("./node_modules/vux/src/components/search/index.vue"),a=o("./src/utils/DateUtils.js"),u=o("./src/api/index.js"),d=o("./src/components/sticky.js"),c=(r.a,s.a,n.a,i.a,l.a,d.a,{name:"RulesHome",components:{Search:r.a,GroupTitle:s.a,Marquee:n.a,MarqueeItem:i.a,Scroller:l.a},directives:{sticky:d.a},data:function(){return{keyword:"",searchResults:[],lastUpdateTime:Object(a.b)("YYYY-MM-DD"),ruleList:[],ruleStartOffset:0,ruleLimit:20}},methods:{getResult:function(){},resultClick:function(e){this.goRuleDetail(e)},onFocus:function(){},onCancel:function(){},searchRule:function(){var e=this;if(console.log("查询的关键字是："+this.keyword),""!==this.keyword){this.searchResults=[],this.$vux.loading.show({text:"正在查询中..."});var t={keyword:this.keyword};u.b.post("/rule/search",t).then(function(t){e.$vux.loading.hide();var o=t.data.code;1e3===o?(console.log("获取正确的数据"),t.data.data.forEach(function(t,o){e.searchResults.push({title:o+1+"."+t.docname+"("+t.indexnumber+")",desc:"编号: "+t.indexnumber+", 更新日期: "+t.addtime.split(" ")[0],docid:t.docid,docname:t.docname,docpath:t.docpath})})):1002===o&&e.$vux.toast.show({type:"warn",time:4e3,text:"当前的查询条件没有查询结果！"})}).catch(function(t){alert("查询失败："+t),e.$vux.loading.hide()})}},fetchRules:function(e,t,o){var s=this;u.b.post("/rule/commons",{offset:e,limit:t}).then(function(t){if(1e3===t.data.code){console.log("获取正确的数据");var n=t.data.data;0===e?(s.ruleList=[],n.forEach(function(e){s.ruleList.push({src:"./static/img/pdf.png",fallbackSrc:"http://placeholder.qiniudn.com/60x60/3cc51f/ffffff",title:s.ruleList.length+1+". "+e.docname,desc:"编号: "+e.indexnumber+", 更新日期: "+e.addtime.split(" ")[0],docid:e.docid,docname:e.docname,docpath:e.docpath})})):n.forEach(function(e){s.ruleList.push({src:"./static/img/pdf.png",fallbackSrc:"http://placeholder.qiniudn.com/60x60/3cc51f/ffffff",title:s.ruleList.length+1+". "+e.docname,desc:"编号: "+e.indexnumber+",更新日期: "+e.addtime.split(" ")[0],docid:e.docid,docname:e.docname,docpath:e.docpath})})}o&&(s.$refs.rulescroller.donePullup(),s.$refs.rulescroller.donePulldown())})},loadMoreRules:function(){var e=this.ruleList.length;this.fetchRules(e+1,this.ruleLimit,!0)},refreshRules:function(){this.fetchRules(0,this.ruleLimit,!0)},goRuleDetail:function(e){var t="miniprogram"===window.__wxjs_environment,o=e.docpath,s=e.docname;if(t){var n="/pages/ruledetail/index?docid="+e.docid+"&docname="+s+"&docpath="+o;this.$wechat.miniProgram.navigateTo({url:n,success:function(){console.log("打开页面"+n+"成功！")},fail:function(){alert("无法打开页面"+n)}})}else this.$vux.confirm.show({title:"下载规范文档",content:"是否下载"+s+"?",onShow:function(){},onHide:function(){},onCancel:function(){},onConfirm:function(){window.open("https://static.yitieyilu.com/upload/"+o)}})},goCollectionPage:function(){if("miniprogram"===window.__wxjs_environment){var e="/pages/collections/index";this.$wechat.miniProgram.navigateTo({url:e,success:function(){console.log("打开页面"+e+"成功！")},fail:function(){alert("无法打开页面"+e)}})}else this.$vux.toast.show({type:"warn",time:4e3,text:"查看我的收藏只支持在手机小程序端打开！"})}},mounted:function(){this.fetchRules(0,this.ruleLimit,!1)}}),m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("x-header",{staticStyle:{width:"100%",position:"absolute",left:"0",top:"0","z-index":"100"},attrs:{slot:"header","left-options":{showBack:!0,backText:"返回"},title:"常用施工规范"},slot:"header"},[o("span",{staticStyle:{"font-size":"16px"},attrs:{slot:"right"},on:{click:e.goCollectionPage},slot:"right"},[e._v("\n          我的收藏\n    ")])]),e._v(" "),o("search",{directives:[{name:"sticky",rawName:"v-sticky",value:{zIndex:100,stickyTop:46,className:"sticky-buttons"},expression:"{ zIndex: 100, stickyTop: 46, className: 'sticky-buttons' }"}],ref:"search",staticStyle:{"margin-top":"46px"},attrs:{placeholder:"请输入关键字搜索",results:e.searchResults,position:"absolute","auto-scroll-to-top":"",top:"0px"},on:{"result-click":e.resultClick,"on-change":e.getResult,"on-focus":e.onFocus,"on-cancel":e.onCancel,"on-submit":e.searchRule},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}}),e._v(" "),o("marquee",[o("marquee-item",{staticStyle:{"margin-left":"11px"}},[e._v("国家规范及施工标准图集实时更新!")])],1),e._v(" "),o("scroller",{ref:"rulescroller",attrs:{height:"-55","lock-x":"","scrollbar-y":"","use-pulldown":"","use-pullup":"","pullup-config":{content:"上拉加载更多",downContent:"松开进行加载",upContent:"上拉加载更多",loadingContent:"加载常用规范数据...",clsPrefix:"xs-plugin-pullup-"},"pulldown-config":{content:"下拉刷新",downContent:"下拉刷新",upContent:"释放刷新",loadingContent:"加载常用规范数据...",clsPrefix:"xs-plugin-pulldown-"}},on:{"on-pullup-loading":e.loadMoreRules,"on-pulldown-loading":e.refreshRules}},[o("div",{staticClass:"result"},[o("panel",{staticClass:"resultpanel",attrs:{header:"施工常用国家规范列表",list:e.ruleList,type:"1"},on:{"on-click-item":e.goRuleDetail}})],1)])],1)},staticRenderFns:[]};var h=o("./node_modules/vue-loader/lib/component-normalizer.js")(c,m,!1,function(e){o('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-530e89bf","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/RulesHome.vue')},"data-v-530e89bf",null);t.default=h.exports}});