webpackJsonp([63],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-05968232","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/after-less-loader.js!./node_modules/less-loader/index.js?{"minimize":true,"sourceMap":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoApprove.vue':function(e,t){},"./src/pages/PanoApprove.vue":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o("./node_modules/vux/src/components/load-more/index.vue"),s=o("./src/components/SwipePanoPanel.vue"),a=o("./src/api/index.js"),d=o("./src/utils/PlatformUtils.js"),i=o("./src/utils/ElectronUtils.js"),l=(n.a,s.a,{name:"Product",metaInfo:{title:"实景审核",titleTemplate:null},components:{LoadMore:n.a,SwipePanel:s.a},data:function(){return{panolist:[],swipebuttons:[{text:"审核",type:"warn",onClick:this.handleApprovePano.bind(this)},{text:"推荐到列表",type:"primary",onClick:this.handleRecommandPano.bind(this)}]}},methods:{fetchPendingPanoList:function(){var e=this;this.$vux.loading.show({text:"数据加载中..."}),a.b.get("/product/pending/1001").then(function(t){if(e.$vux.loading.hide(),1e3===t.data.code){var o=t.data.data;o&&(e.panolist=o)}}).catch(function(t){e.$vux.loading.hide(),e.$vux.alert.show({content:"获取实景列表异常,请稍后重试!"+t}),setTimeout(function(){e.$vux.alert.hide()},3e3)})},handleApprovePano:function(e,t){var o=this,n=t.panoid,s=this;a.b.put("/product/approve/"+n).then(function(n){1e3===n.data.code?(1===t.recommanded&&(s.panolist.splice(e,1),o.$vux.toast.show({text:"审核通过!"})),Object(d.b)()?o.$router.go(0):Object(i.b)()):o.$vux.toast.show({type:"warn",text:"审核失败!"})}).catch(function(e){o.$vux.loading.hide(),o.$vux.alert.show({content:"审核实景异常,请稍后重试!"+e}),setTimeout(function(){o.$vux.alert.hide()},3e3)})},handleRecommandPano:function(e,t){var o=this,n=t.panoid;10===t.status?a.b.put("/product/recommand/"+n).then(function(e){1e3===e.data.code?o.$vux.toast.show({text:"推荐到VR实景列表成功!"}):o.$vux.toast.show({type:"warn",text:"推荐失败!"})}).catch(function(e){o.$vux.loading.hide(),o.$vux.alert.show({content:"推荐数据异常,请稍后重试!"+e}),setTimeout(function(){o.$vux.alert.hide()},3e3)}):this.$vux.toast.show({type:"warn",text:"推荐到VR实景列表需要先审核实景作品,请先审核该作品!"})},handlePullDownLoading:function(){},handlePullUpLoadingMore:function(){}},created:function(){},mounted:function(){this.fetchPendingPanoList()}}),r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!1}}},[this._v("最新未审核实景列表\n  ")]),this._v(" "),this.panolist.length>0?t("SwipePanel",{attrs:{list:this.panolist,swipebuttons:this.swipebuttons}}):t("load-more",{attrs:{"show-loading":!1,tip:"暂无未审核的实景数据","background-color":"#fbf9fe"}})],1)},staticRenderFns:[]};var u=o("./node_modules/vue-loader/lib/component-normalizer.js")(l,r,!1,function(e){o('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-05968232","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/after-less-loader.js!./node_modules/less-loader/index.js?{"minimize":true,"sourceMap":true}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoApprove.vue')},"data-v-05968232",null);t.default=u.exports}});