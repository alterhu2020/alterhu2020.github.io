webpackJsonp([53],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-44ae91a7","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoContractSignature.vue':function(e,t){},"./src/pages/PanoContractSignature.vue":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/vux/src/components/spinner/index.vue"),s=n("./node_modules/vux/src/components/group-title/index.vue"),a=n("./node_modules/vux/src/components/load-more/index.vue"),r=n("./node_modules/vux/src/components/flexbox/flexbox.vue"),i=n("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),u=n("./node_modules/vux/src/components/x-img/index.vue"),d=n("./node_modules/vux/src/components/previewer/index.vue"),l=n("./node_modules/vux/src/components/badge/index.vue"),c=n("./src/utils/StoreUtils.js"),v=n("./src/webconfig.js"),p=n("./src/api/index.js"),m=(s.a,o.a,a.a,r.a,i.a,u.a,d.a,l.a,{name:"SignaturePadList",data:function(){return{signatures:[],previewList:[],options:{getThumbBoundsFn:function(e){var t=document.querySelectorAll(".previewimg")[e],n=window.pageYOffset||document.documentElement.scrollTop,o=t.getBoundingClientRect();return{x:o.left,y:o.top+n,w:o.width}}}}},components:{GroupTitle:s.a,Spinner:o.a,LoadMore:a.a,Flexbox:r.a,FlexboxItem:i.a,XImg:u.a,Previewer:d.a,Badge:l.a},mounted:function(){this.$store.dispatch("UpdateShowHeader",!1),this.$store.dispatch("UpdateShowTabbar",!1);var e=c.a.get(v.a.StoreUserInfoKey);e&&(this.userid=e.customerdata.userid),this.fetchMySignatureHandle()},methods:{fetchMySignatureHandle:function(){var e=this;this.signatures=[],this.previewList=[],this.userid&&p.b.get("/signature/"+this.userid).then(function(t){1e3===t.data.code&&t.data.data.forEach(function(t){e.signatures.push(t),e.previewList.push({msrc:t.Base64,src:t.Base64,w:600,h:400})})}).catch(function(e){alert("获取签名报错："+e)})},updateSignature:function(e){this.$router.push({name:"psignatureadd",params:{name:e.Name,base64:e.Base64,isdefault:e.IsDefault,signatureid:e.SignaureId}})},deleteSignature:function(e,t){var n=this;this.$vux.confirm.show({hideOnBlur:!0,title:"确认删除签名提示",content:"确认继续删除签名操作?",onCancel:function(){},onConfirm:function(){n.$vux.loading.show({text:"正在删除签名中..."}),p.b.delete("/signature/del/"+e.SignaureId).then(function(e){n.$vux.loading.hide(),1e3===e.data.code&&(n.signatures.splice(t,1),n.$vux.toast.show({type:"success",time:3e3,text:"删除签名成功！"}))}).catch(function(e){n.$vux.loading.hide(),alert("获取签名报错："+e)})}})}}}),x={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("x-header",{attrs:{title:"我的签名","left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.$router.push({name:"pcontract"})}}},[n("span",{staticStyle:{"font-size":"16px"},attrs:{slot:"right"},on:{click:function(t){e.$router.push({name:"psignatureadd"})}},slot:"right"},[e._v("\n           新建签名\n        ")])]),e._v(" "),n("div",[n("group-title",[e._v("我的签名列表")]),e._v(" "),e.signatures.length>0?n("swipeout",e._l(e.signatures,function(t,o){return n("swipeout-item",{key:o,attrs:{threshold:.5,"underlay-color":"#ccc"}},[n("div",{attrs:{slot:"right-menu"},slot:"right-menu"},[n("swipeout-button",{attrs:{type:"primary"},nativeOn:{click:function(n){e.updateSignature(t,o)}}},[e._v("修改")]),e._v(" "),n("swipeout-button",{attrs:{type:"warn"},nativeOn:{click:function(n){e.deleteSignature(t,o)}}},[e._v("删除")])],1),e._v(" "),n("div",{staticClass:"project-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[n("div",[1===t.IsDefault?n("badge",{staticStyle:{"background-color":"#0bb20c","margin-bottom":"50px",position:"relative"},attrs:{text:"默认"}}):e._e(),e._v(" "),n("img",{staticClass:"previewimg",attrs:{src:t.Base64},on:{click:function(t){e.$refs.previewer.show(o)}}})],1)])])})):n("div",[n("br"),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("load-more",{attrs:{"show-loading":!1,tip:"没有任何签名数据,点击新建签名!","background-color":"#fbf9fe"}}),e._v(" "),n("flexbox",[n("flexbox-item",{attrs:{span:4}}),e._v(" "),n("flexbox-item",{attrs:{span:8}},[n("x-button",{attrs:{type:"primary","action-type":"button",mini:""},nativeOn:{click:function(t){e.$router.push({name:"psignatureadd"})}}},[e._v("新建签名\n          ")])],1),e._v(" "),n("flexbox-item",{attrs:{span:1}})],1)],1)],1),e._v(" "),n("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[n("previewer",{ref:"previewer",staticClass:"view",attrs:{list:e.previewList,options:e.options}})],1)],1)},staticRenderFns:[]};var f=n("./node_modules/vue-loader/lib/component-normalizer.js")(m,x,!1,function(e){n('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-44ae91a7","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/PanoContractSignature.vue')},"data-v-44ae91a7",null);t.default=f.exports}});