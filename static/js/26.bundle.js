webpackJsonp([26],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2ad96173","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/LaborDialog.vue':function(e,t){},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-bd9f6214","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/LaborsHome.vue':function(e,t){},"./src/components/LaborDialog.vue":function(e,t,a){"use strict";var r=a("./node_modules/babel-runtime/core-js/json/stringify.js"),o=a.n(r),n=a("./node_modules/vux/src/components/datetime/index.vue"),s=a("./node_modules/vux/src/components/spinner/index.vue"),d=a("./src/components/SearchCheckList.vue"),l=a("./src/utils/StoreUtils.js"),i=a("./src/webconfig.js"),c=a("./src/utils/DateUtils.js"),u=a("./src/api/index.js"),h=(n.a,s.a,d.a,Boolean,Boolean,Boolean,Object,Object,String,{name:"LaborDialog",components:{Datetime:n.a,Spinner:s.a,SearchCheckList:d.a},data:function(){return{currentAddMe:this.addme,currentAdd:this.add,currentAddLaborData:this.addLaborData,showLaborSubmitButton:!0,showAddLaborDlgForUsersPickUpDlg:!1,storeUsers:[],users:[],usersModel:[],selectedAddLaborName:"请选择",showAddLaborDlgForBranchesPickUpDlg:!1,storeBranches:[],branches:[],branchesModel:[],selectedBranchName:"请选择",currentUpdate:this.update,currentUpdateLaborData:this.updateLaborData}},props:{add:{type:Boolean,default:!1},addme:{type:Boolean,default:!1},update:{type:Boolean,default:!1},addLaborData:{type:Object,default:function(){return{userid:"",username:"",branchid:null,newBranchName:null,unit:"工日",price:"",startdate:Object(c.b)("YYYY-MM-DD"),enddate:""}}},updateLaborData:{type:Object,default:function(){return{laborid:null,userid:null,branchid:null,newBranchName:null,price:"",startdate:"",enddate:""}}},updateKeyword:{type:String,default:"修改人工"}},watch:{add:function(e){this.currentAdd=e},currentAdd:function(e){e&&(this.showLaborSubmitButton=!0,this.fetchUsersAndBranches())},addme:function(e){this.currentAddMe=e},currentAddMe:function(e){e&&(this.showLaborSubmitButton=!0,this.fetchBranches())},update:function(e){this.currentUpdate=e},currentUpdate:function(e){e&&(this.showLaborSubmitButton=!0,this.fetchBranches())},addLaborData:function(e){this.currentAddLaborData=e}},methods:{saveLaborPriceChange:function(){},addBackButton:function(){this.$emit("on-click-add-back")},updateBackButton:function(){this.$emit("on-click-update-back")},fetchUsersAndBranches:function(){var e=this;this.companyid&&(this.users=[],this.usersModel=[],u.b.get("/labor/users/"+this.companyid).then(function(t){1e3===t.data.code&&(t.data.data.forEach(function(t){e.users.push({key:t.userkey.toString(),value:t.nickname})}),e.usersModel.push(e.users[0].key))}).catch(function(e){alert("获取人工信息出错: "+e)})),this.fetchBranches()},fetchBranches:function(){var e=this;this.branches=[],u.b.get("/labor/branches").then(function(t){1e3===t.data.code&&(t.data.data.forEach(function(t){e.branches.push({key:t.branchid.toString(),value:t.branchname})}),e.add&&(e.branchesModel=[e.branches[0].key]),e.update&&(e.branchesModel=[e.updateLaborData.branchid.toString()]),e.addme&&(e.branchesModel=[e.branches[0].key]))}).catch(function(e){alert("获取工种列表出错: "+e)})},usersCheckChange:function(e,t){0<e.length&&(this.selectedAddLaborName=t.toString(),this.currentAddLaborData.username=t[0].toString(),this.currentAddLaborData.userid=e[0])},branchCheckChange:function(e,t){console.log("value is: "+o()(e)+","+o()(t)),0<e.length&&(this.currentAdd&&(this.selectedBranchName=t.toString(),this.currentAddLaborData.newBranchName=null,this.currentAddLaborData.branchid=e[0]),this.currentAddMe&&(this.selectedBranchName=t.toString(),this.currentAddLaborData.newBranchName=null,this.currentAddLaborData.branchid=e[0]),this.currentUpdate&&(this.selectedBranchName=t.toString(),this.updateLaborData.newBranchName=null,this.currentUpdateLaborData.branchid=e[0]))},saveBranchName:function(e){this.showAddLaborDlgForBranchesPickUpDlg=!1,this.currentAdd&&(this.currentAddLaborData.branchid=null,this.currentAddLaborData.newBranchName=e,this.selectedBranchName=e),this.currentAddMe&&(this.currentAddLaborData.branchid=null,this.currentAddLaborData.newBranchName=e,this.selectedBranchName=e),this.currentUpdate&&(this.currentUpdateLaborData.branchid=null,this.currentUpdateLaborData.newBranchName=e,this.selectedBranchName=e)},handleAddLabor:function(){var e=this;this.showLaborSubmitButton=!1,console.log("结果是： "+o()(this.currentAddLaborData));var t=l.a.get(i.a.StoreProject);return t?0===this.currentAddLaborData.userid.length?(this.$vux.toast.show({type:"warn",time:5e3,text:"没有选择员工姓名，员工姓名不能为空！"}),void(this.showLaborSubmitButton=!0)):null===this.currentAddLaborData.branchid&&""===this.currentAddLaborData.branchname?(this.$vux.toast.show({type:"warn",time:5e3,text:"没有选择工种名称姓名，工种名称不能为空！"}),void(this.showLaborSubmitButton=!0)):""===this.currentAddLaborData.price||isNaN(this.currentAddLaborData.price)?(this.$vux.toast.show({type:"warn",time:5e3,text:"工种单价必须大于等于零！"}),void(this.showLaborSubmitButton=!0)):0>=this.currentAddLaborData.startdate.length?(this.$vux.toast.show({type:"warn",time:5e3,text:"工种对应的进场日期不能为空！"}),void(this.showLaborSubmitButton=!0)):(this.$vux.loading.show({text:"正在提交数据..."}),console.log("提交的数据是： "+o()(this.currentAddLaborData)),void u.b.post("/labor",{labor:this.currentAddLaborData,projectid:t.key}).then(function(t){e.$vux.loading.hide();var a=t.data.code;1e3===a?e.$emit("after-add",e.currentAddLaborData):1004===a&&(e.showLaborSubmitButton=!0,e.$vux.toast.show({type:"warn",time:5e3,text:"当前录入的人工已经存在，不能重复添加,请重新输入！"}))}).catch(function(t){alert("创建人工失败，错误码："+t),e.$vux.loading.hide(),e.showLaborSubmitButton=!0})):(this.$vux.toast.show({type:"warn",time:5e3,text:"没有选择正确的项目，项目名称不能为空！"}),void(this.showLaborSubmitButton=!0))},handleUpdateLabor:function(){var e=this;this.showLaborSubmitButton=!1;var t=l.a.get(i.a.StoreProject);return t?null===this.currentUpdateLaborData.branchid&&""===this.currentUpdateLaborData.branchname?(this.$vux.toast.show({type:"warn",time:5e3,text:"没有选择工种名称姓名，工种名称不能为空！"}),void(this.showLaborSubmitButton=!0)):""===this.currentUpdateLaborData.price||isNaN(this.currentUpdateLaborData.price)?(this.$vux.toast.show({type:"warn",time:5e3,text:"工种单价必须大于等于零！"}),void(this.showLaborSubmitButton=!0)):0>=this.currentUpdateLaborData.startdate.length?(this.$vux.toast.show({type:"warn",time:5e3,text:"工种对应的进场日期不能为空！"}),void(this.showLaborSubmitButton=!0)):(this.$vux.loading.show({text:"正在提交数  据..."}),console.log("提交的数据是： "+o()(this.currentUpdateLaborData)),void u.b.put("/labor/update",{labor:this.currentUpdateLaborData,projectid:t.key}).then(function(t){e.$vux.loading.hide();var a=t.data.code;1e3===a?e.$emit("after-update",e.currentUpdateLaborData):1004===a&&(e.showLaborSubmitButton=!0,e.$vux.toast.show({type:"warn",time:5e3,text:"当前录入的人工已经存在，不能重复添加,请重新输入！"}))}).catch(function(t){alert("创建人工失败，错误码："+t),e.$vux.loading.hide(),e.showLaborSubmitButton=!0})):(this.$vux.toast.show({type:"warn",time:5e3,text:"没有选择正确的项目，项目名称不能为空！"}),void(this.showLaborSubmitButton=!0))},hideDateTime:function(e){"cancel"===e&&((this.currentAdd||this.currentAddMe)&&(this.currentAddLaborData.enddate=""),this.currentUpdate&&(this.currentUpdateLaborData.enddate=""))}},mounted:function(){var e=l.a.get(i.a.StoreUserInfoKey);this.companyid=e.customerdata.companyid}}),b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.currentAdd,callback:function(t){e.currentAdd=t},expression:"currentAdd"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"增加人工"},on:{"on-click-back":e.addBackButton}},[e.showLaborSubmitButton?a("span",{staticStyle:{"font-size":"18px"},attrs:{slot:"right"},on:{click:e.handleAddLabor},slot:"right"},[e._v("\n        保存\n      ")]):a("spinner",{attrs:{slot:"right",type:"android",size:"28px"},slot:"right"})],1),e._v(" "),a("group",{attrs:{title:"增加人工基本信息"}},[a("cell",{attrs:{title:"选择一个人工姓名","inline-desc":"请选择一个人工动态(必选)",value:e.selectedAddLaborName,"is-link":""},nativeOn:{click:function(t){e.showAddLaborDlgForUsersPickUpDlg=!0}}}),e._v(" "),a("cell",{attrs:{title:"选择一个工种名称","inline-desc":"请选择一个工种名称(必选)",value:e.selectedBranchName,"is-link":""},nativeOn:{click:function(t){e.showAddLaborDlgForBranchesPickUpDlg=!0}}}),e._v(" "),a("x-input",{attrs:{title:"人工单位",placeholder:"输入人工的单位，默认是工日"},model:{value:e.currentAddLaborData.unit,callback:function(t){e.$set(e.currentAddLaborData,"unit",t)},expression:"currentAddLaborData.unit"}}),e._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{staticClass:"price",attrs:{label:"人工单价"}},[a("el-input",{model:{value:e.currentAddLaborData.price,callback:function(t){e.$set(e.currentAddLaborData,"price",t)},expression:"currentAddLaborData.price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1)],1),e._v(" "),a("datetime",{attrs:{"min-year":2018,format:"YYYY-MM-DD",title:"进场日期",placeholder:"输入人工的进场日期"},model:{value:e.currentAddLaborData.startdate,callback:function(t){e.$set(e.currentAddLaborData,"startdate",t)},expression:"currentAddLaborData.startdate"}}),e._v(" "),a("datetime",{attrs:{"min-year":2018,format:"YYYY-MM-DD",title:"离场日期","start-date":e.currentAddLaborData.startdate,placeholder:"输入人工的离场日期"},on:{"on-hide":e.hideDateTime},model:{value:e.currentAddLaborData.enddate,callback:function(t){e.$set(e.currentAddLaborData,"enddate",t)},expression:"currentAddLaborData.enddate"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.currentAddMe,callback:function(t){e.currentAddMe=t},expression:"currentAddMe"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"增加人工"},on:{"on-click-back":e.addBackButton}},[e.showLaborSubmitButton?a("span",{staticStyle:{"font-size":"18px"},attrs:{slot:"right"},on:{click:e.handleAddLabor},slot:"right"},[e._v("\n        保存\n      ")]):a("spinner",{attrs:{slot:"right",type:"android",size:"28px"},slot:"right"})],1),e._v(" "),a("group",{attrs:{title:"增加人工基本信息"}},[a("cell",{attrs:{title:"人工姓名"}},[e._v(e._s(e.currentAddLaborData.username))]),e._v(" "),a("cell",{attrs:{title:"选择一个工种名称","inline-desc":"请选择一个工种名称(必选)",value:e.selectedBranchName,"is-link":""},nativeOn:{click:function(t){e.showAddLaborDlgForBranchesPickUpDlg=!0}}}),e._v(" "),a("x-input",{attrs:{title:"人工单位",placeholder:"输入人工的单位，默认是工日"},model:{value:e.currentAddLaborData.unit,callback:function(t){e.$set(e.currentAddLaborData,"unit",t)},expression:"currentAddLaborData.unit"}}),e._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{staticClass:"price",attrs:{label:"人工单价"}},[a("el-input",{model:{value:e.currentAddLaborData.price,callback:function(t){e.$set(e.currentAddLaborData,"price",t)},expression:"currentAddLaborData.price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1)],1),e._v(" "),a("datetime",{attrs:{"min-year":2018,format:"YYYY-MM-DD",title:"进场日期",placeholder:"输入人工的进场日期"},model:{value:e.currentAddLaborData.startdate,callback:function(t){e.$set(e.currentAddLaborData,"startdate",t)},expression:"currentAddLaborData.startdate"}}),e._v(" "),a("datetime",{attrs:{"min-year":2018,format:"YYYY-MM-DD",title:"离场日期","start-date":e.currentAddLaborData.startdate,placeholder:"输入人工的离场日期"},on:{"on-hide":e.hideDateTime},model:{value:e.currentAddLaborData.enddate,callback:function(t){e.$set(e.currentAddLaborData,"enddate",t)},expression:"currentAddLaborData.enddate"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.currentUpdate,callback:function(t){e.currentUpdate=t},expression:"currentUpdate"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:e.updateKeyword},on:{"on-click-back":e.updateBackButton}},[e.showLaborSubmitButton?a("span",{staticStyle:{"font-size":"18px"},attrs:{slot:"right"},on:{click:e.handleUpdateLabor},slot:"right"},[e._v("\n        保存\n      ")]):a("spinner",{attrs:{slot:"right",type:"android",size:"28px"},slot:"right"})],1),e._v(" "),a("group",{attrs:{title:e.updateKeyword+"基本信息"}},[a("cell",{attrs:{title:"人工姓名"}},[e._v(e._s(e.currentUpdateLaborData.username))]),e._v(" "),a("cell",{attrs:{title:"选择一个工种名称","inline-desc":"请选择一个工种名称(必选)",value:e.selectedBranchName,"is-link":""},nativeOn:{click:function(t){e.showAddLaborDlgForBranchesPickUpDlg=!0}}}),e._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",{staticClass:"price",attrs:{label:"人工单价"}},[a("el-input",{model:{value:e.currentUpdateLaborData.price,callback:function(t){e.$set(e.currentUpdateLaborData,"price",t)},expression:"currentUpdateLaborData.price"}},[a("template",{slot:"append"},[e._v("元")])],2)],1)],1),e._v(" "),a("datetime",{attrs:{"min-year":2018,format:"YYYY-MM-DD",title:"进场日期",placeholder:"输入人工的进场日期"},model:{value:e.currentUpdateLaborData.startdate,callback:function(t){e.$set(e.currentUpdateLaborData,"startdate",t)},expression:"currentUpdateLaborData.startdate"}}),e._v(" "),a("datetime",{attrs:{"min-year":2018,format:"YYYY-MM-DD",title:"离场日期","start-date":e.currentUpdateLaborData.startdate,placeholder:"输入人工的离场日期"},model:{value:e.currentUpdateLaborData.enddate,callback:function(t){e.$set(e.currentUpdateLaborData,"enddate",t)},expression:"currentUpdateLaborData.enddate"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showAddLaborDlgForUsersPickUpDlg,callback:function(t){e.showAddLaborDlgForUsersPickUpDlg=t},expression:"showAddLaborDlgForUsersPickUpDlg"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showAddLaborDlgForUsersPickUpDlg=!1}}},[e._v("\n        可选人工列表\n      ")]),e._v(" "),a("search-check-list",{attrs:{data:e.users,keyword:"人工",max:1},on:{"on-change":e.usersCheckChange},model:{value:e.usersModel,callback:function(t){e.usersModel=t},expression:"usersModel"}})],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showAddLaborDlgForBranchesPickUpDlg,callback:function(t){e.showAddLaborDlgForBranchesPickUpDlg=t},expression:"showAddLaborDlgForBranchesPickUpDlg"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showAddLaborDlgForBranchesPickUpDlg=!1}}},[e._v("\n        可选人工工种名称列表\n      ")]),e._v(" "),a("search-check-list",{attrs:{data:e.branches,keyword:"工种",max:1,canadd:""},on:{"on-change":e.branchCheckChange,"save-name":e.saveBranchName},model:{value:e.branchesModel,callback:function(t){e.branchesModel=t},expression:"branchesModel"}})],1)],1)])},staticRenderFns:[]};var p=a("./node_modules/vue-loader/lib/component-normalizer.js")(h,b,!1,function(e){a('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2ad96173","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/components/LaborDialog.vue')},"data-v-2ad96173",null);t.a=p.exports},"./src/pages/LaborsHome.vue":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("./node_modules/vux/src/components/flexbox/flexbox.vue"),o=a("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),n=a("./node_modules/vux/src/components/datetime/index.vue"),s=a("./node_modules/vux/src/components/spinner/index.vue"),d=a("./node_modules/vux/src/components/group-title/index.vue"),l=a("./node_modules/vux/src/components/form-preview/index.vue"),i=a("./node_modules/vux/src/components/load-more/index.vue"),c=a("./src/utils/StoreUtils.js"),u=a("./src/webconfig.js"),h=a("./src/utils/DateUtils.js"),b=a("./src/api/index.js"),p=a("./src/components/SearchCheckList.vue"),m=a("./src/components/LaborDialog.vue"),v=a("./src/components/SelectProjectDialog.vue"),f=(r.a,o.a,n.a,p.a,s.a,m.a,v.a,d.a,l.a,i.a,{name:"LaborsHome",data:function(){return{showAddLaborDlg:!1,addLaborData:{userid:"",username:"",branchid:null,newBranchName:null,unit:"工日",price:0,startdate:Object(h.b)("YYYY-MM-DD"),enddate:""},showProjectSelectDlg:!1,project:{},userinfo:{},userinfoid:null,amount:0,hideamount:"****",needAddLabor:!0,laborResult:{laborid:null,balance:0,price:"",branch:"",totaldays:0,startdate:"",enddate:Object(h.b)("YYYY-MM-DD")},showLaborDetailDlg:!1,laborDetaillaborid:null,laborExpenseHistory:[],laborDetailDlgHeaderTitle:"",laborTotalFormHeader:0,laborTotalFormHeaderBody:[],laborMonthFormHeader:0,laborMonthFormHeaderBody:[]}},components:{Flexbox:r.a,FlexboxItem:o.a,Datetime:n.a,SearchCheckList:p.a,Spinner:s.a,LaborDialog:m.a,SelectProjectDialog:v.a,GroupTitle:d.a,FormPreview:l.a,LoadMore:i.a},methods:{selectProject:function(e){this.project=e,this.showProjectSelectDlg=!1,this.fetchMyLaborData()},switchProject:function(){this.showProjectSelectDlg=!0},toggleHideAmount:function(){var e=c.a.get(u.a.StoreLaborAmountFlag);void 0===e?(this.amount=this.hideamount,c.a.set(u.a.StoreLaborAmountFlag,!0)):e?(this.amount=this.laborResult.balance,c.a.set(u.a.StoreLaborAmountFlag,!1)):(this.amount=this.hideamount,c.a.set(u.a.StoreLaborAmountFlag,!0))},covertLaborDetailAmount:function(e){var t=e.expensetypekey;return 1002===t?e.days+"天":1003===t?e.hours+"小时":e.fees+"元"},addLaborDlg:function(){this.showAddLaborDlg=!0,this.addLaborData.username=this.userinfo.nickname,console.log("useris: "+this.userinfoid),this.addLaborData.userid=this.userinfoid},afterAddLabor:function(){this.showAddLaborDlg=!1,this.fetchMyLaborData()},fetchMyLaborData:function(){var e=this;b.b.get("/labor/user/"+this.project.key+"/"+this.userinfo.userid).then(function(t){var a=t.data.code;1e3===a?(e.needAddLabor=!1,e.laborResult=t.data.data,e.userinfoid=e.laborResult.userid):1002===a?(e.needAddLabor=!0,e.userinfoid=t.data.data.userid):1001===a&&(e.needAddLabor=!1,e.laborResult=t.data.data,e.laborResult.balance="未进场",e.laborResult.totaldays="未进场",e.userinfoid=e.laborResult.userid),console.log("return is: "+e.userinfoid);var r=c.a.get(u.a.StoreLaborAmountFlag);e.amount=void 0===r?e.laborResult.balance:r?e.hideamount:e.laborResult.balance}).catch(function(t){alert("获取失败"+t),e.needAddLabor=!0})},handleShowLaborDetailDlg:function(){var e=this;this.showLaborDetailDlg=!0,this.laborTotalFormHeaderBody=[],this.laborMonthFormHeaderBody=[],b.b.post("/labor/detail",this.laborResult).then(function(t){var a=t.data.code;if(1e3===a){var r=t.data.data.month,o=t.data.data.total,n=t.data.data.history,s=r.days,d=r.price,l=r.balance,i=r.prices,c=r.absentdays,u=r.overtimehours,h=o.days,b=o.absentdays,p=o.overtimehours,m=o.prices,v=o.balance;e.laborDetailDlgHeaderTitle=""===e.laborResult.enddate?"今天":e.laborResult.enddate,e.laborTotalFormHeader=v,e.laborMonthFormHeader=l,e.laborTotalFormHeaderBody.push({label:"进场日期",value:e.laborResult.startdate}),e.laborTotalFormHeaderBody.push({label:"离场日期",value:e.laborDetailDlgHeaderTitle}),e.laborTotalFormHeaderBody.push({label:"单价(每工日)",value:d}),e.laborTotalFormHeaderBody.push({label:"总工日",value:h}),e.laborTotalFormHeaderBody.push({label:"缺勤(天)",value:b}),e.laborTotalFormHeaderBody.push({label:"加班小时",value:p}),e.laborTotalFormHeaderBody.push({label:"工资总额(元)",value:m}),e.laborMonthFormHeaderBody.push({label:"本月总工日(截止到今天)",value:s}),e.laborMonthFormHeaderBody.push({label:"本月缺勤(天)",value:c}),e.laborMonthFormHeaderBody.push({label:"本月加班小时",value:u}),e.laborMonthFormHeaderBody.push({label:"本月工资总额(元)",value:i}),e.laborMonthFormHeaderBody.push({label:"本月工资余额(元)",value:l}),e.laborExpenseHistory=n}else if(1001===a){var f=t.data.data.price,D=t.data.data.history;e.laborDetailDlgHeaderTitle=""===e.laborResult.enddate?"今天":e.laborResult.enddate,e.laborTotalFormHeader="未到进场日期",e.laborMonthFormHeader="未到进场日期",e.laborTotalFormHeaderBody.push({label:"进场日期",value:e.laborResult.startdate}),e.laborTotalFormHeaderBody.push({label:"离场日期",value:e.laborDetailDlgHeaderTitle}),e.laborTotalFormHeaderBody.push({label:"单价(每工日)",value:f}),e.laborExpenseHistory=D}}).catch(function(e){alert("获取人工支出费用明细出错，错误码："+e)})}},mounted:function(){this.$store.dispatch("UpdateShowTabbar",!0);var e=c.a.get(u.a.StoreProject);e?this.project=e:this.showProjectSelectDlg=!0;var t=c.a.get(u.a.StoreUserInfoKey);this.userinfo=t.customerdata,this.fetchMyLaborData()}}),D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("x-header",{attrs:{slot:"header","left-options":{showBack:!0,backText:"我的",preventGoBack:!0},title:"人工动态"},on:{"on-click-back":function(t){e.$router.push({name:"ucenter"})}},slot:"header"},[a("span",{staticStyle:{"font-size":"18px !important","font-weight":"400"},attrs:{slot:"right"},on:{click:function(t){e.$router.push({name:"laborshelp"})}},slot:"right"},[a("svg",{staticClass:"icon",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"icon","aria-hidden":"true"},slot:"icon"},[a("use",{attrs:{"xlink:href":"#bangzhu"}})])])]),e._v(" "),a("flexbox",{staticStyle:{"background-color":"darkcyan"},attrs:{orient:"vertical",gutter:20,wrap:"wrap"}},[a("flexbox-item",{staticClass:"header"},[e._v("\n       "+e._s(e.userinfo.nickname)+", 您当前人工余款(元)\n    ")]),e._v(" "),a("flexbox-item",{staticClass:"amount",nativeOn:{click:function(t){return e.toggleHideAmount(t)}}},[a("span",[e._v(e._s(0===e.amount?"暂无数据":"￥"+e.amount))])]),e._v(" "),a("flexbox-item",{staticClass:"footer"},[e._v("\n      总工日: "+e._s(0===e.laborResult.totaldays?"暂无数据":e.laborResult.totaldays+"工日")+", 数据截止离场日期: "+e._s(e.laborResult.enddate?e.laborResult.enddate:"今天")+"\n    ")])],1),e._v(" "),a("br"),e._v(" "),a("select-project-dialog",{attrs:{show:e.showProjectSelectDlg},on:{"on-click-back":function(t){e.showProjectSelectDlg=!1},"on-select-project":e.selectProject,"on-click-empty-button":function(t){e.$router.push({name:"pupload"})}}}),e._v(" "),a("group-title",[e._v("当前项目:"+e._s(e.project.value?e.project.value:"未知")+"   "),a("a",{staticStyle:{color:"#00a7f5"},on:{click:function(t){return t.preventDefault(),e.switchProject(t)}}},[e._v("切换项目")])]),e._v(" "),a("group",[e.needAddLabor?a("x-button",{staticStyle:{"border-radius":"99px"},attrs:{type:"primary"},nativeOn:{click:function(t){return e.addLaborDlg(t)}}},[e._v("添加人工")]):a("cell",{attrs:{title:e.userinfo.nickname,"inline-desc":"工种名称: "+e.laborResult.branch+",进场日期: "+e.laborResult.startdate+",离场日期: "+(e.laborResult.enddate?e.laborResult.enddate:"无"),"is-link":""},nativeOn:{click:function(t){return e.handleShowLaborDetailDlg(t)}}},[e._v("单价:"+e._s(e.laborResult.price)+"元/工日")])],1),e._v(" "),a("labor-dialog",{attrs:{addme:e.showAddLaborDlg,"add-labor-data":e.addLaborData},on:{"on-click-add-back":function(t){e.showAddLaborDlg=!1},"after-add":e.afterAddLabor}}),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showLaborDetailDlg,callback:function(t){e.showLaborDetailDlg=t},expression:"showLaborDetailDlg"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"人工费用明细"},on:{"on-click-back":function(t){e.showLaborDetailDlg=!1}}}),e._v(" "),a("group-title",[e._v("以下数据截止离场日期: "+e._s(e.laborDetailDlgHeaderTitle))]),e._v(" "),a("form-preview",{attrs:{"header-label":"余款(元)","header-value":e.laborTotalFormHeader,"body-items":e.laborTotalFormHeaderBody}}),e._v(" "),a("form-preview",{attrs:{"header-label":"本月余款(元)","header-value":e.laborMonthFormHeader,"body-items":e.laborMonthFormHeaderBody}}),e._v(" "),a("group",{attrs:{title:"支出费用明细"}},[e.laborExpenseHistory.length>0?a("swipeout",e._l(e.laborExpenseHistory,function(t,r){return a("swipeout-item",{key:r,attrs:{threshold:.5,"underlay-color":"#ccc"}},[a("div",{staticClass:"demo-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[a("cell",{attrs:{title:t.expensetype,"inline-desc":t.comments?"["+t.comments+"]":""}},[a("div",[a("span",[e._v(e._s(e.covertLaborDetailAmount(t)))]),a("br"),e._v(" "),a("span",[e._v(e._s(t.date))])])])],1)])})):a("div",[a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("load-more",{attrs:{"show-loading":!1,tip:"没有任何费用明细记录!","background-color":"#fbf9fe"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var L=a("./node_modules/vue-loader/lib/component-normalizer.js")(f,D,!1,function(e){a('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-bd9f6214","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/LaborsHome.vue')},"data-v-bd9f6214",null);t.default=L.exports}});