webpackJsonp([43],{'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-73ecf451","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/MaterialEnter.vue':function(e,t){},"./src/pages/MaterialEnter.vue":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("./node_modules/babel-runtime/core-js/json/stringify.js"),o=a.n(i),s=a("./node_modules/babel-runtime/helpers/slicedToArray.js"),r=a.n(s),n=a("./node_modules/babel-runtime/core-js/object/entries.js"),l=a.n(n),c=a("./node_modules/vux/src/components/badge/index.vue"),u=a("./node_modules/vux/src/components/button-tab/button-tab.vue"),p=a("./node_modules/vux/src/components/button-tab/button-tab-item.vue"),d=a("./node_modules/vux/src/components/checklist/index.vue"),h=a("./node_modules/vux/src/components/datetime/index.vue"),v=a("./node_modules/vux/src/components/flexbox/flexbox.vue"),m=a("./node_modules/vux/src/components/flexbox/flexbox-item.vue"),f=a("./node_modules/vux/src/components/form-preview/index.vue"),b=a("./node_modules/vux/src/components/grid/grid.vue"),g=a("./node_modules/vux/src/components/grid/grid-item.vue"),w=a("./node_modules/vux/src/components/group-title/index.vue"),x=a("./node_modules/vux/src/components/icon/index.vue"),k=a("./node_modules/vux/src/components/load-more/index.vue"),y=a("./node_modules/vux/src/components/msg/index.vue"),_=a("./node_modules/vux/src/components/popup/index.vue"),M=a("./node_modules/vux/src/components/previewer/index.vue"),S=a("./node_modules/vux/src/components/search/index.vue"),B=a("./node_modules/vux/src/components/swipeout/swipeout.vue"),C=a("./node_modules/vux/src/components/swipeout/swipeout-button.vue"),j=a("./node_modules/vux/src/components/swipeout/swipeout-item.vue"),D=a("./node_modules/vux/src/components/swiper/swiper.vue"),A=a("./node_modules/vux/src/components/swiper/swiper-item.vue"),$=a("./node_modules/vux/src/components/x-img/index.vue"),O=a("./node_modules/vux/src/components/x-number/index.vue"),P=a("./node_modules/vux/src/components/x-switch/index.vue"),N=a("./node_modules/vux/src/components/x-textarea/index.vue"),U=a("./src/components/sticky.js"),I=a("./node_modules/vue-feather-icons/dist/vue-feather-icons.es.js"),T=a("./src/webconfig.js"),R=a("./src/utils/StoreUtils.js"),q=a("./src/api/index.js"),F=a("./node_modules/vue/dist/vue.esm.js"),E=a("./src/utils/StringUtils.js"),z=a("./src/components/SelectProjectDialog.vue"),H=a("./src/utils/PlatformUtils.js"),Q=a("./src/utils/ElectronUtils.js"),G=(U.a,u.a,p.a,I.d,_.a,O.a,P.a,N.a,k.a,b.a,g.a,w.a,D.a,A.a,j.a,C.a,B.a,c.a,v.a,m.a,M.a,d.a,f.a,S.a,h.a,x.a,z.a,y.a,$.a,{name:"MaterialEnter",metaInfo:{title:"材料进场"},directives:{sticky:U.a},components:{ButtonTab:u.a,ButtonTabItem:p.a,PlusIcon:I.d,Popup:_.a,XNumber:O.a,XSwitch:P.a,XTextarea:N.a,LoadMore:k.a,Grid:b.a,GridItem:g.a,GroupTitle:w.a,Swiper:D.a,SwiperItem:A.a,SwipeoutItem:j.a,SwipeoutButton:C.a,Swipeout:B.a,Badge:c.a,Flexbox:v.a,FlexboxItem:m.a,Previewer:M.a,Checklist:d.a,FormPreview:f.a,Search:S.a,Datetime:h.a,Icon:x.a,SelectProjectDialog:z.a,Msg:y.a,XImg:$.a},data:function(){return{disabledSaveBtn:!1,showmenuOptions:!1,menuOptions:!1,searchResults:[],searchModel:"",material:{type:1e3,name:"",budgetid:null,date:"",price:0,quantity:1,unit:"",from:"",bills:[],desc:""},showBudgetMaterialPopup:!1,selectedBudgetName:"请选择",billImages:[],budgetMaterials:[],filterBudgetMaterials:[],budgetMaterialsModel:[],updateMaterialTitle:"",showUpdateMaterialDlg:!1,showAddBtn:!1,actionSpan:7,canmaterial:!1,canmaterialapprove:!1,tab:R.a.get(T.a.StoreMaterialTab)?R.a.get(T.a.StoreMaterialTab):0,budgets:{count:0,items:[]},materials:{count:0,items:[]},plans:{count:0,items:[]},shouldHover:!0,showProjectSelectDlg:!1,project:{},materialid:null,materialArrowDirection:"up",materialPlanArrowDirection:"up",materialBudgetArrowDirection:"up",showApproveConfirmDlg:!1,approvedMaterialsDate:null,approvedMaterials:[],approvedMaterialsModel:[],approvedBatchDates:[],approvedBatchDatesModel:[],makecopyersSearchModel:"",makecopyersSearchResults:[],makeCopyersModel:[],makeCopyers:[],storedMakeCopyers:[],showMakecopyPickUpDialog:!1,selectMakecopyNames:"请选择抄送人",approversSearchModel:"",approversSearchResults:[],approversModel:[],approvers:[],storedApprovers:[],showApprovePickUpDialog:!1,selectApproverName:"请选择审批人",userid:null,checkAllOptions:["全选/非全选"],checkAllModel:[],showSubscrible:!1,subscribleBtns:[],showBatchOptions:!1,showBatchConfirmDlg:!1,billResult:[]}},methods:{showDetailMaterialImage:function(e,t){this.billResult=e,this.$refs.detailpreviewer.show(t)},subscribleGongzhonghao:function(){Object(H.b)()?window.location.href="https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU4MzU3MzMxOQ==&scene=126&subscene=0#wechat_redirect":this.$vux.toast.show({time:3e3,text:"暂不支持桌面版操作！"})},updateMaterialBackHandle:function(){this.showUpdateMaterialDlg=!1,this.showmenuOptions=this.canmaterial||this.canmaterialapprove,this.showAddBtn=this.canmaterial},switchProject:function(){this.showProjectSelectDlg=!0,this.showAddBtn=!1},clickCellPlanArrowFlag:function(){this.materialPlanArrowDirection="up"===this.materialPlanArrowDirection?"down":"up"},clickCellBudgetArrowFlag:function(){this.materialBudgetArrowDirection="up"===this.materialBudgetArrowDirection?"down":"up"},clickCellArrowFlag:function(){this.materialArrowDirection="up"===this.materialArrowDirection?"down":"up"},clickMenuOptions:function(e){if("excel"===e)this.$router.push({name:"pmaterials",params:{projectid:this.project.key}});else if("open"!==e)"batch"===e&&(this.showBatchOptions=!0,this.showAddBtn=!1);else if(Object(H.b)()){var t,a=this,i=this.$route.params.projectid;t=i?""+location.href:""+location.href+this.project.key.toString(),this.$copyText(t).then(function(){a.$vux.alert.show({buttonText:"好的",title:"项目完成工程量提示",content:"地址复制成功! 你可在电脑端打开地址: "+t+" 进行完成工程量的操作!"})},function(e){alert("不支持复制功能！"),console.log(e)})}else this.$vux.toast.show({time:3e3,text:"暂不支持桌面版操作！"})},hideMenuOptions:function(){this.showBatchOptions||(this.showAddBtn=this.canmaterial)},searchFocus:function(){this.searchResults=[]},cancelSearch:function(){},clickSearchResult:function(e){this.filterBudgetMaterials=this.budgetMaterials.filter(function(t){return t.value===e.title}),this.budgetMaterialsModel=[this.filterBudgetMaterials[0].key],this.selectedTenderName=this.filterBudgetMaterials[0].value},inputSearchChange:function(e){var t=this;t.searchResults=[],this.budgetMaterials.forEach(function(a){Object(E.c)(a.value,e)&&t.searchResults.push({title:a.value,other:a.key})})},deleteMaterial:function(e,t){var a=this,i="",o="";0===this.tab?(i="进场材料"+e.Name,o="/material/del/m/"+e.key):1===this.tab&&(i="预算材料"+e.Name,o="/material/del/b/"+e.key),this.$vux.confirm.show({title:"删除"+i+"提示",content:"确定删除"+i+"?",onCancel:function(){},onConfirm:function(){a.$vux.loading.show({text:"删除"+i+"中..."}),q.b.delete(o).then(function(e){a.$vux.loading.hide(),1e3===e.data.code&&(1===a.tab?(a.budgets.items.splice(t,1),--a.budgets.count):0===a.tab&&(a.materials.items.splice(t,1),--a.materials.count),a.$vux.toast.show({text:"删除"+i+"成功!"}),Object(H.b)()?a.$router.go(0):Object(Q.b)())}).catch(function(e){a.$vux.loading.hide(),alert("删除材料出错,错误代码: "+e)})}})},updateMaterialDlg:function(e){this.showAddBtn=!1,this.showmenuOptions=!1,this.showUpdateMaterialDlg=!0,this.materialid=e.key,0===this.tab?(this.updateMaterialTitle="进场材料信息修改",this.material.type=1e3,this.material.date=e.ApplyDate,this.material.name=e.Name,this.material.price=parseFloat(e.Price),this.material.quantity=parseFloat(e.Quantity),this.material.unit=e.Unit,this.material.from=e.From,this.material.desc=e.Description,this.material.bills=e.Bills,this.billImages=e.Bills,this.material.budgetid=e.budgetid,this.fetchBudgetMaterials(e.budgetid)):1===this.tab&&(this.updateMaterialTitle="预算材料信息修改",this.material.type=1001,this.material.name=e.Name,this.material.price=parseFloat(e.Price),this.material.quantity=parseFloat(e.Quantity),this.material.unit=e.Unit)},showBudgetOptionsDlg:function(){this.showBudgetMaterialPopup=!0},selectMaterialChange:function(e,t){this.showBudgetMaterialPopup=!1,0<e.length?(this.selectedBudgetName=t[0],this.material.budgetid=t[0]):this.selectedBudgetName="请选择"},goNewBudgetPage:function(){this.$router.push({name:"pmaterialadd",params:{projectid:this.project.key,type:1001}})},fetchBudgetMaterials:function(e){var t=this;this.$vux.loading.show({text:"正在获取对应进场材料信息..."}),q.b.get("/material/get/bb/"+this.project.key).then(function(a){if(t.$vux.loading.hide(),1e3===a.data.code){var i=a.data.data;i.items.forEach(function(e){var t=e.Name+"(单位: "+e.Unit+")",a=e.key;e.key=a,e.value=t}),t.budgetMaterials=i.items,e?(t.budgetMaterialsModel=[e],t.selectedBudgetName=t.budgetMaterials.filter(function(t){return t.key===e})[0].value):t.budgetMaterialsModel=[t.budgetMaterials[0].key]}}).catch(function(e){t.$vux.loading.hide(),alert("获取材料出错,错误代码: "+e)})},uploadBillImage:function(){var e=this,t=T.a.ApiServerURI+"/v1/upload/file";console.log("上传的地址是: "+t),this.$device.isWechat?F.default.wechat.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(a){var i=a.localIds[0];F.default.wechat.uploadImage({localId:i.toString(),isShowProgressTips:1,success:function(a){var i=a.serverId,o=new FormData;l()({type:6}).forEach(function(e){var t=r()(e,2),a=t[0],i=t[1];o.append(a,i)}),o.append("mediaid",i),o.append("projectid",e.project.key),q.b.post(t,o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(1e3===t.data.code){e.loading=!1;var a=t.data.data.url;e.$vux.toast.show({text:"合格证或者材质化验单上传成功!"}),e.billImages.push({src:a,msrc:a,w:1200,h:900}),e.material.bills=e.billImages,R.a.set(T.a.StoreMaterial,e.material)}}).catch(function(t){e.loading=!1,e.onError(t,i)})},cancel:function(){e.loading=!1},fail:function(t){e.loading=!1,alert("微信接口异常出错无法上传,错误代码:"+o()(t)),e.$vux.toast.show({type:"warn",text:"微信接口异常出错无法上传,错误代码:"+o()(t)})}})}}):this.$vux.toast.show({type:"warn",time:6e3,text:"上传合格证或材质化验单只能在微信手机端操作，你可以先保存当前录入信息，然后再在手机上修改操作！"})},saveMaterial:function(){var e=this,t={type:1001,materialid:this.materialid,name:this.material.name,price:this.material.price,quantity:this.material.quantity,unit:this.material.unit},a={type:1e3,materialid:this.materialid,budgetid:this.budgetMaterialsModel[0],date:this.material.date,price:this.material.price,quantity:this.material.quantity,from:this.material.from,bills:this.material.bills,desc:this.material.desc},i={},o=!1;if(1===this.tab){i=t;var s="预算材料录入提示";if(null===this.project.key)return void this.$vux.alert.show({title:s,content:"无法定位项目名称无法录入!"});if(!this.material.name||0>=this.material.name.length)return void this.$vux.alert.show({title:s,content:"预算材料名称不能为空!"});if(""===this.material.quantity||isNaN(this.material.quantity))return void this.$vux.alert.show({title:s,content:"预算材料数量不能为空,必须大于等于零!"});if(!this.material.unit||0>=this.material.unit.length)return void this.$vux.alert.show({title:s,content:"预算材料计量单位不能为空!"});o=this.project.key&&0<this.material.name.length&&""!==this.material.quantity&&0<this.material.unit.length}else if(0===this.tab){i=a;var r="进场材料修改提示";if(null===this.material.budgetid)return void this.$vux.alert.show({title:r,content:"必须选择一个进场材料!"});if(""===this.material.quantity||isNaN(this.material.quantity))return void this.$vux.alert.show({title:r,content:"进场材料数量不能为空,必须大于等于零!"});o=null!==this.material.budgetid&&""!==this.material.quantity}o?(this.$vux.loading.show({text:"正在保存材料信息..."}),this.disabledSaveBtn=!0,q.b.post("/material/update",i).then(function(t){e.$vux.loading.hide(),e.disabledSaveBtn=!1,1e3===t.data.code&&(R.a.remove(T.a.StoreMaterial),e.$vux.toast.show({text:"更新材料信息成功,三秒后跳转到材料列表!"}),Object(H.b)()?e.$router.go(0):Object(Q.b)())}).catch(function(t){e.$vux.loading.hide(),e.disabledSaveBtn=!1,alert("保存材料信息出错,错误代码: "+t)})):this.$vux.alert.show({content:"请检查你的输入是否合法,材料名称,材料数量必须大于等于零,材料计量单位不能为空!"})},selectProject:function(e){this.project=e,this.showProjectSelectDlg=!1,this.showmenuOptions=this.canmaterial||this.canmaterialapprove,this.showAddBtn=this.canmaterial,0===this.tab?this.fetchComplate():1===this.tab&&this.fetchContract()},backPage:function(){this.$router.push({name:"ucenter"})},addMaterial:function(){if(Object(H.b)()){var e="";0===this.tab?e="pmaterialadd/"+this.project.key+"/1000":1===this.tab&&(e="pmaterialadd/"+this.project.key+"/1001"),window.location.href=T.a.ServerBaseUrl+e}else this.$router.push({name:"pmaterialadd",params:{projectid:this.project.key,type:0===this.tab?1e3:1001}})},clickTab:function(){0===this.tab?(this.fetchComplate(),R.a.set(T.a.StoreMaterialTab,0)):(this.fetchContract(),R.a.set(T.a.StoreMaterialTab,1))},fetchComplate:function(){var e=this;this.materials.count=0,this.materials.items=[],this.project.key&&(this.$vux.loading.show({text:"正在获取进场材料..."}),q.b.get("/material/get/m/"+this.project.key).then(function(t){if(e.$vux.loading.hide(),1e3===t.data.code){var a=t.data.data;e.project.value=a.projectname;var i=a.items;e.materials.count=a.count,i.forEach(function(e){var t=[];e.result.forEach(function(e){var a=e.status;t.push(a),e["showdetail"+e.row]=!1}),e.status=t.some(function(e){return 1e3===e})?1e3:t.some(function(e){return 1001===e})?1001:t.some(function(e){return 1002===e})?1002:t.some(function(e){return 1003===e})?1003:1e3,console.log("状态是： "+e.status)}),e.materials.items=i}}).catch(function(t){e.$vux.loading.hide(),alert("获取进场材料出错,错误代码: "+t)}))},fetchContract:function(){var e=this;this.budgets.count=0,this.budgets.items=[],this.project.key&&(this.$vux.loading.show({text:"正在获取预算材料..."}),q.b.get("/material/get/b/"+this.project.key).then(function(t){if(e.$vux.loading.hide(),1e3===t.data.code){var a=t.data.data;e.project.value=a.projectname,e.budgets.items=a.items,e.budgets.count=a.count}}).catch(function(t){e.$vux.loading.hide(),alert("获取预算材料出错,错误代码: "+t)}))},showProjectSelectOptionDlg:function(){this.showProjectSelectDlg=!0,this.showmenuOptions=!1},sendNotification:function(e){var t=this,a=e.date,i=e.result.length;this.$vux.confirm.show({hideOnBlur:!0,title:"材料进场提醒提示",content:"确认进场日期："+a+"，进场材料数量："+i+"，将会微信通知项目所有人当前进场材料状态?",onCancel:function(){},onConfirm:function(){var e=R.a.get(T.a.StoreUserInfoKey),o=e.customerdata.companyid,s=e.customerdata.nickname;q.b.post("/material/notification/"+o,{nickname:s,date:a,number:i}).then(function(e){1e3===e.data.code&&t.$vux.toast.show({time:5e3,position:"bottom",text:"材料进场通知已经发送成功！"})})}})},approveMaterial:function(e){var t=this;this.showApproveConfirmDlg=!0,this.showAddBtn=!1,this.approvedMaterialsDate=e.date,this.approvedMaterials=[],this.approvedMaterialsModel=[],e.result.forEach(function(e){if(1e3===e.status||1001===e.status||1002===e.status){var a=e.key.toString();t.approvedMaterials.push({key:a,value:e.Name+", 数量: "+e.Quantity+", 进场单价: "+e.Price+"(单位: "+e.Unit+")"}),t.approvedMaterialsModel.push(a)}}),this.fetchCompanyUsers()},hideApproveConfirmDlg:function(){this.showAddBtn=this.canmaterial||this.canmaterialapprove},hideBatchConfirmDlg:function(){this.showAddBtn=this.canmaterial||this.canmaterialapprove},approveMaterialNow:function(){var e=this;this.showApproveConfirmDlg=!1;var t=e.approvedMaterialsModel.length,a=e.approversModel.length;return 0>=t?void this.$vux.alert.show({content:"至少勾选一个需要审批的材料!"}):1===a?void this.$vux.confirm.show({hideOnBlur:!0,title:"确认提交进场材料审批提示",content:"进场材料单将会提交给勾选的审批人，确认继续审批操作?",onCancel:function(){},onConfirm:function(){var t=null,a=[];if(e.storedApprovers.some(function(a,i){if(a.key===e.approversModel[0].toString())return t=e.storedApprovers[i],!0}),e.makeCopyersModel.forEach(function(t){e.storedMakeCopyers.some(function(i,o){if(i.key===t.toString())return a.push(e.storedMakeCopyers[o]),!0})}),t&&0<a.length){var i={date:e.approvedMaterialsDate,userid:e.userid,materials:e.approvedMaterialsModel,approver:t,makecopyers:a};q.b.post("/material/submit",i).then(function(t){var a=t.data.code;1e3===a?(e.$vux.toast.show({time:3e3,text:"您的审批单已经提交成功，请耐心等待审批结果！"}),setTimeout(function(){e.$router.push({name:"pcontract",params:{showtype:2}})},1e3)):1008===a&&(console.log("提交信息发现没有关注公众号！"),e.showSubscrible=!0,e.showAddBtn=!1,e.$vux.toast.show({time:2e3,text:"您的审批单已经提交成功，请耐心等待审批结果！"}))}).catch(function(e){alert("提交审批单出错，错误代码： "+e)})}else alert("获取审批人和抄送人信息失败！")}}):void this.$vux.alert.show({content:"必须勾选一个审批人!"})},approveBatchMaterialNow:function(){var e=this,t=e.approvedBatchDatesModel.length,a=e.approversModel.length;return 0>=t?void this.$vux.alert.show({content:"至少勾选一个需要审批的进场日期!"}):1===a?void this.$vux.confirm.show({hideOnBlur:!0,title:"确认批量提交审批提示",content:"进场材料单将会提交给勾选的审批人，确认继续审批操作?",onCancel:function(){},onConfirm:function(){var t=this,a=null,i=[];if(e.storedApprovers.some(function(t,i){if(t.key===e.approversModel[0].toString())return a=e.storedApprovers[i],!0}),e.makeCopyersModel.forEach(function(t){e.storedMakeCopyers.some(function(a,o){if(a.key===t.toString())return i.push(e.storedMakeCopyers[o]),!0})}),a&&0<i.length){var o=[],s=[];e.approvedBatchDatesModel.forEach(function(t){var a=e.materials.items[t];o.push(a.date),a.result.forEach(function(e){s.push(e.key)})});var r={dates:o,userid:e.userid,materials:s,approver:a,makecopyers:i};q.b.post("/material/batch/submit",r).then(function(a){var i=a.data.code;1e3===i?(e.$vux.toast.show({time:3e3,text:"您的批量审批单已经提交成功，请耐心等待审批结果！"}),setTimeout(function(){e.$router.push({name:"pcontract",params:{showtype:2}})},2e3)):1008===i&&(t.showSubscrible=!0,t.showAddBtn=!1,e.$vux.toast.show({time:3e3,text:"您的批量审批单已经提交成功，请耐心等待审批结果！"}))}).catch(function(e){alert("提交批量审批单出错，错误代码： "+e)})}else alert("获取批量审批人和抄送人信息失败！")}}):void this.$vux.alert.show({content:"必须勾选一个审批人!"})},batchCommit:function(){var e=this;this.approvedBatchDates=[],this.approvedBatchDatesModel=[],this.materials.items.forEach(function(t,a){var i=t.date.toString(),o=!1,s=[];t.result.forEach(function(e){s.push(e.status)});var r=s.every(function(e){return 1e3===e})?1e3:s.some(function(e){return 1001===e})?1001:s.some(function(e){return 1002===e})?1002:s.some(function(e){return 1003===e})?1003:1e3;(1e3==r||1002==r)&&(o=!0),o&&(e.approvedBatchDates.push({key:a,value:"进场日期: "+i}),e.approvedBatchDatesModel.push(a))}),0<this.approvedBatchDates.length?(this.showBatchConfirmDlg=!0,this.showAddBtn=!1,this.fetchCompanyUsers()):this.$vux.toast.show({time:3e3,text:"当前进场材料没有需要批量审批的进场日期！"})},batchApproved:function(){this.$router.push({name:"pcontract",params:{showtype:1}})},sendApproveMaterial:function(){this.$router.push({name:"pcontract",params:{showtype:1}})},makecopyersCancelSearch:function(){this.makeCopyers=this.storedMakeCopyers},makecopyersClickSearchResult:function(e){var t=e.title,a=e.other;this.makeCopyersModel.push(a),this.selectMakecopyNames=t},makecopyersInputSearchChange:function(e){var t=this;t.makecopyersSearchResults=[],this.makeCopyers.forEach(function(a){Object(E.c)(a.value,e)&&t.makecopyersSearchResults.push({title:a.value,other:a.key})})},makecopyersSearchFocus:function(){this.makecopyersSearchResults=[]},approversCancelSearch:function(){this.approvers=this.storedApprovers},approversClickSearchResult:function(e){var t=e.title,a=e.other;this.approversModel.push(a),this.selectApproverName=t},approversInputSearchChange:function(e){var t=this;t.approversSearchResults=[],this.approvers.forEach(function(a){Object(E.c)(a.value,e)&&t.approversSearchResults.push({title:a.value,other:a.key})})},approversSearchFocus:function(){this.approversSearchResults=[]},selectMakecopyChange:function(e,t){this.selectMakecopyNames=0>=e.length?"请选择抄送人":3<=e.length?t[0]+"等"+e.length+"个抄送人":t.toString()},showMakecopyPickupHandle:function(){this.showMakecopyPickUpDialog=!0},selectApproveChange:function(e,t){this.selectApproverName=0>=e.length?"请选择审批人":t[0]},showApprovePickupHandle:function(){this.showApprovePickUpDialog=!0},fetchCompanyUsers:function(){var e=this,t=R.a.get(T.a.StoreUserInfoKey);this.userid=t.customerdata.userid;var a="/contract/makecopyers/"+this.project.key;this.$vux.loading.show({text:"正在加载数据..."}),this.storedApprovers=[],this.storedMakeCopyers=[],q.b.get(a).then(function(t){var a=t.data.code;(e.$vux.loading.hide(),1e3===a)&&(t.data.data.forEach(function(t){1===t.CanMaterialApprove&&e.storedApprovers.push({key:t.PanoUserKey.toString(),value:t.NickName,openid:t.Openid}),e.storedMakeCopyers.push({key:t.PanoUserKey.toString(),value:t.NickName,openid:t.Openid})}),e.approvers=e.storedApprovers,e.makeCopyers=e.storedMakeCopyers,e.approversModel=[e.approvers[0].key],e.makeCopyersModel=[e.makeCopyers[0].key])}).catch(function(t){e.$vux.loading.hide(),console.log("获取账号列表出错: "+t)})}},watch:{},mounted:function(){this.$store.dispatch("UpdateShowHeader",!1),this.$store.dispatch("UpdateShowTabbar",!1);var e=R.a.get(T.a.StoreUserInfoKey);if(e)this.userid=e.customerdata.userid,this.canmaterial=e.customerdata.canmaterial,this.canmaterialapprove=e.customerdata.canmaterialapprove,this.showAddBtn=this.canmaterial,this.showmenuOptions=this.canmaterial||this.canmaterialapprove;else{var t=this.$route.params.projectid;t&&(this.canmaterial=!0,this.canmaterialapprove=!0,this.showAddBtn=this.canmaterial,this.showmenuOptions=this.canmaterial||this.canmaterialapprove,this.project.key=t,this.project.value=R.a.get(T.a.StoreProject)?R.a.get(T.a.StoreProject).value:"未知项目",0===this.tab?this.fetchComplate():1===this.tab&&this.fetchContract())}this.actionSpan=this.canmaterial&&this.canmaterialapprove?4:7;var a=R.a.get(T.a.StoreProject);a?(this.project=a,0===this.tab?this.fetchComplate():1===this.tab&&this.fetchContract()):this.showProjectSelectDlg=!0}}),K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("x-header",{attrs:{slot:"header","left-options":{showBack:!0,backText:"返回"},title:"材料现场管理"},slot:"header"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.showmenuOptions,expression:"showmenuOptions"}],attrs:{slot:"right"},on:{click:function(t){e.menuOptions=!e.menuOptions,e.showAddBtn=!1}},slot:"right"},[a("svg",{staticClass:"vux-x-icon vux-x-icon-navicon",staticStyle:{fill:"#fff",position:"relative",top:"-8px",left:"-3px"},attrs:{type:"navicon",size:"35",xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 512 512"}},[a("path",{attrs:{d:"M96 241h320v32H96zm0-96h320v32H96zm0 192h320v32H96z"}})])])]),e._v(" "),a("group-title",[e._v("当前项目:"+e._s(e.project.value?e.project.value:"未知")+"   "),a("a",{staticStyle:{color:"#00a7f5"},on:{click:function(t){return t.preventDefault(),e.switchProject(t)}}},[e._v("切换项目")])]),e._v(" "),a("button-tab",{directives:[{name:"sticky",rawName:"v-sticky",value:{zIndex:100,stickyTop:2,className:"sticky-buttons"},expression:"{ zIndex: 100, stickyTop: 2, className: 'sticky-buttons' }"}],model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("button-tab-item",{on:{"on-item-click":function(t){e.clickTab()}}},[e._v("进场材料")]),e._v(" "),a("button-tab-item",{on:{"on-item-click":function(t){e.clickTab()}}},[e._v("预算材料")])],1),e._v(" "),e.showAddBtn?a("div",{staticClass:"fixbtn",class:[{hover:e.shouldHover}],on:{mouseenter:function(t){e.shouldHover=!0},mouseleave:function(t){e.shouldHover=!1},click:e.addMaterial}},[e._t("default",[a("plus-icon",{staticStyle:{color:"white"}})])],2):e._e(),e._v(" "),0===e.tab?[e.materials.count>0?a("group",[a("flexbox",[a("flexbox-item",{attrs:{span:7}},[a("group-title",{staticStyle:{"font-size":"13px !important"}},[e._v(" 共有"),a("b",[e._v(e._s(e.materials.count))]),e._v("个进场材料")])],1)],1),e._v(" "),a("div",e._l(e.materials.items,function(t,i){return a("div",{key:i,staticClass:"materialtitle"},[a("flexbox",[a("flexbox-item",{attrs:{span:e.actionSpan}},[a("group-title",{staticStyle:{"font-size":"14px !important"}},[e._v("进场日期："+e._s(t.date))])],1),e._v(" "),e.canmaterial?a("flexbox-item",[1e3===t.status?a("x-button",{attrs:{type:"primary",gradients:["#dfb320","#b2b224"],mini:""},nativeOn:{click:function(a){e.approveMaterial(t)}}},[e._v("提交审批\n              ")]):1001===t.status?a("x-button",{attrs:{type:"primary",disabled:"",mini:""}},[e._v("等待审批")]):1002===t.status?a("x-button",{attrs:{type:"primary",gradients:["#b20d09","#b21523"],mini:""},nativeOn:{click:function(a){e.approveMaterial(t)}}},[e._v("重新提交\n              ")]):1003===t.status?a("x-button",{attrs:{type:"primary",disabled:"",mini:""}},[e._v("审批通过")]):e._e()],1):e._e(),e._v(" "),e.canmaterialapprove?a("flexbox-item",[1e3===t.status||1001===t.status?a("x-button",{attrs:{type:"primary",gradients:["#dfb320","#b2b224"],mini:""},nativeOn:{click:function(a){e.sendApproveMaterial(t)}}},[e._v("审批\n              ")]):1002===t.status?a("x-button",{attrs:{type:"primary",gradients:["#dfb320","#b2b224"],mini:""},nativeOn:{click:function(a){e.sendApproveMaterial(t)}}},[e._v("审批\n              ")]):1003===t.status?a("x-button",{attrs:{type:"primary",mini:""},nativeOn:{click:function(a){e.sendNotification(t)}}},[e._v("进场提醒\n              ")]):e._e()],1):e._e()],1),e._v(" "),a("swipeout",e._l(t.result,function(t,o){return a("swipeout-item",{key:o,attrs:{threshold:.5,"underlay-color":"#ccc"}},[e.canmaterial&&1003!==t.status?a("div",{attrs:{slot:"right-menu"},slot:"right-menu"},[a("swipeout-button",{attrs:{type:"primary"},nativeOn:{click:function(a){e.updateMaterialDlg(t)}}},[e._v("修改")]),e._v(" "),a("swipeout-button",{attrs:{type:"warn"},nativeOn:{click:function(a){e.deleteMaterial(t,i)}}},[e._v("删除")])],1):e._e(),e._v(" "),a("div",{staticClass:"project-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[a("cell",{key:i,attrs:{title:"名称: "+t.Name+", 数量: "+t.Quantity+t.Unit+", 进场单价: "+t.Price+"/"+t.Unit+",进场总价: "+(t.Quantity*t.Price).toFixed(3)+"元","inline-desc":"最后更新时间: "+t.ChangeDate,"is-link":"","border-intent":!1,"arrow-direction":t["showdetail"+t.row]?"up":"down"},nativeOn:{click:function(e){t["showdetail"+t.row]=!t["showdetail"+t.row]}}},[1e3===t.status?a("badge",{staticStyle:{"background-color":"#b2b224"},attrs:{slot:"icon",text:"待审批"},slot:"icon"}):1001===t.status?a("badge",{staticStyle:{"background-color":"#88df25"},attrs:{slot:"icon",text:"已提交"},slot:"icon"}):1002===t.status?a("badge",{staticStyle:{"background-color":"#b20d09"},attrs:{slot:"icon",text:"被拒绝"},slot:"icon"}):1003===t.status?a("badge",{staticStyle:{"background-color":"#18b20e"},attrs:{slot:"icon",text:"通过"},slot:"icon"}):e._e()],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t["showdetail"+t.row],expression:"result['showdetail'+result.row]"}]},[a("form-preview",{attrs:{"header-label":"对应预算材料名称","header-value":t.Name,"body-items":[{label:"材料进场日期",value:t.ApplyDate?t.ApplyDate:t.ChangeDate},{label:"进场单价",value:t.Price},{label:"数量",value:t.Quantity},{label:"计量单位",value:t.Unit},{label:"材料对应的规格,型号,产地",value:t.From?t.From:"无"},{label:"交验结果",value:t.Description?t.Description:"无"},{label:"提交的审核单编号",value:t.ContractNumber?t.ContractNumber:"无"}]}}),e._v(" "),t.Bills.length>0?a("group",{attrs:{title:"合格证,材质化验单或进货单"}},[a("span",{staticStyle:{"padding-top":"15px"}},[e._l(t.Bills,function(i,o){return a("img",{key:o,staticClass:"preview-img",attrs:{src:i.src,alt:"未上传",height:"250px"},on:{click:function(a){e.showDetailMaterialImage(t.Bills,o)}}})}),e._v("\n                           \n                    ")],2)]):a("cell",{staticStyle:{color:"#999999"},attrs:{title:"合格证,材质化验单或进货单",value:"无"}})],1)],1)])}))],1)}))],1):a("div",[a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("load-more",{attrs:{"show-loading":!1,tip:"当前项目无进场材料数据!","background-color":"#fbf9fe"}})],1)]:e._e(),e._v(" "),1===e.tab?[e.budgets.count>0?a("group",[a("group-title",{staticStyle:{"font-size":"13px"}},[e._v("共有"),a("b",[e._v(e._s(e.budgets.count))]),e._v("个预算材料")]),e._v(" "),a("div",e._l(e.budgets.items,function(t,i){return a("group",{key:i,staticClass:"materialtitle",attrs:{title:"预算录入日期："+t.date}},[a("swipeout",e._l(t.result,function(t,i){return a("swipeout-item",{key:i,attrs:{threshold:.5,"underlay-color":"#ccc"}},[e.canmaterial?a("div",{attrs:{slot:"right-menu"},slot:"right-menu"},[a("swipeout-button",{attrs:{type:"primary"},nativeOn:{click:function(a){e.updateMaterialDlg(t)}}},[e._v("修改")]),e._v(" "),a("swipeout-button",{attrs:{type:"warn"},nativeOn:{click:function(a){e.deleteMaterial(t,i)}}},[e._v("删除")])],1):e._e(),e._v(" "),a("div",{staticClass:"project-content vux-1px-tb",attrs:{slot:"content"},slot:"content"},[a("cell",{key:i,attrs:{title:"名称: "+t.Name+", 数量: "+t.Quantity+t.Unit+", 预算单价: "+t.Price+"/"+t.Unit+",预算总价: "+(t.Quantity*t.Price).toFixed(3)+"元","inline-desc":"最后更新时间:"+t.ChangeDate,"is-link":"","border-intent":!1,"arrow-direction":e.materialBudgetArrowDirection},nativeOn:{click:function(a){e.clickCellBudgetArrowFlag(t)}}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"down"===e.materialBudgetArrowDirection,expression:"materialBudgetArrowDirection==='down'"}]},[a("form-preview",{attrs:{"header-label":"预算材料名称","header-value":t.Name,"body-items":[{label:"预算录入日期",value:t.ChangeDate},{label:"预算单价",value:t.Price},{label:"预算数量",value:t.Quantity},{label:"计量单位",value:t.Unit}]}})],1)],1)])}))],1)}))],1):a("div",[a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("load-more",{attrs:{"show-loading":!1,tip:"当前项目无预算材料数据!","background-color":"#fbf9fe"}})],1)]:e._e(),e._v(" "),a("select-project-dialog",{attrs:{show:e.showProjectSelectDlg},on:{"on-click-back":function(t){e.showProjectSelectDlg=!1,e.showAddBtn=e.canmaterial},"on-select-project":e.selectProject,"on-click-empty-button":function(t){e.$router.push({name:"pupload"})}}}),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showUpdateMaterialDlg,callback:function(t){e.showUpdateMaterialDlg=t},expression:"showUpdateMaterialDlg"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":e.updateMaterialBackHandle}},[e._v("\n        "+e._s(e.updateMaterialTitle)+"\n      ")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.tab,expression:"tab===0"}]},[a("cell",{attrs:{title:"项目名称"}},[e._v(e._s(e.project.value))]),e._v(" "),a("group",{attrs:{title:"进场材料清单信息"}},[a("cell",{attrs:{title:"选择一个预算材料","inline-desc":"进场材料需要与预算材料保持一致(必选)",value:e.selectedBudgetName,"is-link":""},nativeOn:{click:function(t){return e.showBudgetOptionsDlg(t)}}}),e._v(" "),a("cell",{attrs:{title:"进场日期"}},[a("datetime",{attrs:{placeholder:"请输入计划材料的申请时间",format:"YYYY-MM-DD","min-year":2018},model:{value:e.material.date,callback:function(t){e.$set(e.material,"date",t)},expression:"material.date"}})],1),e._v(" "),a("cell",{attrs:{title:"单价"}},[a("x-input",{attrs:{placeholder:"输入该材料的价格(可选)"},model:{value:e.material.price,callback:function(t){e.$set(e.material,"price",t)},expression:"material.price"}})],1),e._v(" "),a("cell",{attrs:{title:"数量"}},[a("x-input",{attrs:{width:"150px"},model:{value:e.material.quantity,callback:function(t){e.$set(e.material,"quantity",t)},expression:"material.quantity"}})],1)],1),e._v(" "),a("group",{attrs:{title:"进场材料规格.合格证或化验单等"}},[a("x-textarea",{attrs:{max:100,rows:1,placeholder:"输入该材料对应的规格,型号,产地(可选)"},model:{value:e.material.from,callback:function(t){e.$set(e.material,"from",t)},expression:"material.from"}}),e._v(" "),a("cell",{attrs:{title:"上传合格证或材质化验单","inline-desc":e.billImages.length>0?"点击查看合格证,材质化验单(上传成功)":"合格证,材质化验单(可选)"}},[a("span",[0===e.billImages.length?a("svg",{staticClass:"icon",staticStyle:{height:"25px",width:"25px"},attrs:{slot:"icon","aria-hidden":"true"},on:{click:function(t){e.uploadBillImage()}},slot:"icon"},[a("use",{attrs:{"xlink:href":"#upload"}})]):e._l(e.billImages,function(t,i){return a("span",{key:i},[a("img",{attrs:{src:t.src,alt:"未上传",width:"25",height:"25"},on:{click:function(t){e.$refs.billpreviewer.show(i)}}}),e._v("\n               \n          ")])}),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("previewer",{ref:"billpreviewer",attrs:{list:e.billImages}})],1)],2)]),e._v(" "),a("x-textarea",{attrs:{max:100,rows:5,placeholder:"该进场材料对应的交验结果(可选)"},model:{value:e.material.desc,callback:function(t){e.$set(e.material,"desc",t)},expression:"material.desc"}})],1),e._v(" "),a("br"),e._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button",disabled:e.disabledSaveBtn},nativeOn:{click:function(t){return e.saveMaterial(t)}}},[e._v("保存")])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.tab,expression:"tab===1"}]},[a("cell",{attrs:{title:"项目名称"}},[e._v(e._s(e.project.value))]),e._v(" "),a("group",{attrs:{title:"预算材料清单信息"}},[a("cell",{attrs:{title:"材料名称"}},[a("x-input",{attrs:{type:"text",placeholder:"请输入该预算材料的名称"},model:{value:e.material.name,callback:function(t){e.$set(e.material,"name",t)},expression:"material.name"}})],1),e._v(" "),a("cell",{attrs:{title:"单价"}},[a("x-input",{attrs:{placeholder:"请输入该预算材料的价格"},model:{value:e.material.price,callback:function(t){e.$set(e.material,"price",t)},expression:"material.price"}})],1),e._v(" "),a("cell",{attrs:{title:"数量"}},[a("x-input",{attrs:{min:0,width:"150px"},model:{value:e.material.quantity,callback:function(t){e.$set(e.material,"quantity",t)},expression:"material.quantity"}})],1),e._v(" "),a("cell",{attrs:{title:"计量单位"}},[a("x-input",{attrs:{placeholder:"请输入对应数量的计量单位"},model:{value:e.material.unit,callback:function(t){e.$set(e.material,"unit",t)},expression:"material.unit"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("x-button",{attrs:{type:"primary","action-type":"button"},nativeOn:{click:function(t){return e.saveMaterial(t)}}},[e._v("保存")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showBudgetMaterialPopup,callback:function(t){e.showBudgetMaterialPopup=t},expression:"showBudgetMaterialPopup"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showBudgetMaterialPopup=!1}}},[e._v("\n        当前项目入库的预算材料列表\n      ")]),e._v(" "),e.budgetMaterials.length>0?a("div",[a("search",{ref:"search",attrs:{placeholder:"输入要查询的预算材料名称",position:"absolute","auto-scroll-to-top":"",top:"46px",results:e.searchResults},on:{"on-focus":e.searchFocus,"on-change":e.inputSearchChange,"on-result-click":e.clickSearchResult,"on-cancel":e.cancelSearch},model:{value:e.searchModel,callback:function(t){e.searchModel=t},expression:"searchModel"}}),e._v(" "),a("checklist",{attrs:{title:"至少勾选一个预算材料",max:1,options:e.budgetMaterials},on:{"on-change":e.selectMaterialChange},model:{value:e.budgetMaterialsModel,callback:function(t){e.budgetMaterialsModel=t},expression:"budgetMaterialsModel"}})],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.budgetMaterials.length,expression:"budgetMaterials.length === 0"}]},[a("load-more",{staticStyle:{"padding-top":"30px"},attrs:{"show-loading":!1,tip:"当前项目没有任何入库的预算材料!","background-color":"#fbf9fe"}}),e._v(" "),a("flexbox",[a("flexbox-item",{attrs:{span:1}}),e._v(" "),a("flexbox-item",{attrs:{span:10}},[a("x-button",{attrs:{type:"primary","action-type":"button",mini:""},nativeOn:{click:function(t){return e.goNewBudgetPage(t)}}},[e._v("新建预算材料\n            ")])],1),e._v(" "),a("flexbox-item",{attrs:{span:1}})],1)],1)],1)],1),e._v(" "),a("actionsheet",{attrs:{menus:{open:"复制地址(电脑端编辑)",excel:"汇总统计",batch:"批量操作"},"close-on-clicking-mask":!0,"show-cancel":""},on:{"on-click-menu":e.clickMenuOptions,"on-after-hide":e.hideMenuOptions},model:{value:e.menuOptions,callback:function(t){e.menuOptions=t},expression:"menuOptions"}}),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{position:"bottom","max-height":"70%","is-transparent":""},on:{"on-hide":function(t){e.showAddBtn=e.canmaterial||e.canmaterialapprove}},model:{value:e.showBatchOptions,callback:function(t){e.showBatchOptions=t},expression:"showBatchOptions"}},[a("div",{staticStyle:{width:"100%","background-color":"#fff",height:"130px",margin:"0 auto","border-radius":"5px","padding-top":"10px"}},[a("group",[e.canmaterial?a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.batchCommit(t)}}},[e._v("批量提交审批")]):e._e(),e._v(" "),e.canmaterialapprove?a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.batchApproved(t)}}},[e._v("批量审批")]):e._e()],1)],1)])],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{position:"bottom","max-height":"80%"},on:{"on-hide":e.hideApproveConfirmDlg},model:{value:e.showApproveConfirmDlg,callback:function(t){e.showApproveConfirmDlg=t},expression:"showApproveConfirmDlg"}},[a("group",{attrs:{title:"待审批进场材料日期:"+e.approvedMaterialsDate}},[a("checklist",{attrs:{title:"确认勾选需要审批的材料(只显示没有审批或者审批失败的材料)",options:e.approvedMaterials},model:{value:e.approvedMaterialsModel,callback:function(t){e.approvedMaterialsModel=t},expression:"approvedMaterialsModel"}})],1),e._v(" "),a("group",{attrs:{title:"选择对应的审批人和抄送人"}},[a("cell",{attrs:{title:"审批人",value:e.selectApproverName,"inline-desc":"只显示当前项目有材料审批权限的人员","is-link":""},nativeOn:{click:function(t){return e.showApprovePickupHandle(t)}}}),e._v(" "),a("cell",{attrs:{title:"抄送人",value:e.selectMakecopyNames,"is-link":""},nativeOn:{click:function(t){return e.showMakecopyPickupHandle(t)}}})],1),e._v(" "),a("div",{staticStyle:{padding:"15px"}},[a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.approveMaterialNow(t)}}},[e._v("提交审批")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{position:"bottom","max-height":"80%"},on:{"on-hide":e.hideBatchConfirmDlg},model:{value:e.showBatchConfirmDlg,callback:function(t){e.showBatchConfirmDlg=t},expression:"showBatchConfirmDlg"}},[a("checklist",{attrs:{title:"确认勾选需要批量审批材料对应的进场日期",options:e.approvedBatchDates},model:{value:e.approvedBatchDatesModel,callback:function(t){e.approvedBatchDatesModel=t},expression:"approvedBatchDatesModel"}}),e._v(" "),a("group",{attrs:{title:"选择对应的审批人和抄送人"}},[a("cell",{attrs:{title:"审批人",value:e.selectApproverName,"inline-desc":"只显示当前项目有材料审批权限的人员","is-link":""},nativeOn:{click:function(t){return e.showApprovePickupHandle(t)}}}),e._v(" "),a("cell",{attrs:{title:"抄送人",value:e.selectMakecopyNames,"is-link":""},nativeOn:{click:function(t){return e.showMakecopyPickupHandle(t)}}})],1),e._v(" "),a("div",{staticStyle:{padding:"15px"}},[a("x-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.approveBatchMaterialNow(t)}}},[e._v("提交批量审批")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showApprovePickUpDialog,callback:function(t){e.showApprovePickUpDialog=t},expression:"showApprovePickUpDialog"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showApprovePickUpDialog=!1}}},[e._v("\n        可选审批人列表\n      ")]),e._v(" "),e.approvers.length>0?a("div",[a("search",{ref:"search",attrs:{placeholder:"输入要过滤的审批人姓名",position:"absolute","auto-scroll-to-top":"",top:"46px",results:e.approversSearchResults},on:{"on-focus":e.approversSearchFocus,"on-change":e.approversInputSearchChange,"on-result-click":e.approversClickSearchResult,"on-cancel":e.approversCancelSearch},model:{value:e.approversSearchModel,callback:function(t){e.approversSearchModel=t},expression:"approversSearchModel"}}),e._v(" "),a("checklist",{attrs:{title:"选择一个审批人(已经选择"+e.approversModel.length+"个审批人)",required:"",max:1,options:e.approvers},on:{"on-change":e.selectApproveChange},model:{value:e.approversModel,callback:function(t){e.approversModel=t},expression:"approversModel"}})],1):a("div",[a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("load-more",{attrs:{"show-loading":!1,tip:"当前没有审核人数据"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showMakecopyPickUpDialog,callback:function(t){e.showMakecopyPickUpDialog=t},expression:"showMakecopyPickUpDialog"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0}},on:{"on-click-back":function(t){e.showMakecopyPickUpDialog=!1}}},[e._v("\n        可选抄送人列表\n      ")]),e._v(" "),e.makeCopyers.length>0?a("div",[a("search",{ref:"search",attrs:{placeholder:"输入要过滤的抄送人姓名",position:"absolute","auto-scroll-to-top":"",top:"46px",results:e.makecopyersSearchResults},on:{"on-focus":e.makecopyersSearchFocus,"on-change":e.makecopyersInputSearchChange,"on-result-click":e.makecopyersClickSearchResult,"on-cancel":e.makecopyersCancelSearch},model:{value:e.makecopyersSearchModel,callback:function(t){e.makecopyersSearchModel=t},expression:"makecopyersSearchModel"}}),e._v(" "),a("checklist",{attrs:{title:"选择一个或多个抄送人(已经选择"+e.makeCopyersModel.length+"个抄送人)",required:"",options:e.makeCopyers},on:{"on-change":e.selectMakecopyChange},model:{value:e.makeCopyersModel,callback:function(t){e.makeCopyersModel=t},expression:"makeCopyersModel"}})],1):a("div",[a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("br"),e._v(" "),a("load-more",{attrs:{"show-loading":!1,tip:"当前没有抄送人数据"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("popup",{attrs:{height:"100%"},model:{value:e.showSubscrible,callback:function(t){e.showSubscrible=t},expression:"showSubscrible"}},[a("x-header",{attrs:{"left-options":{showBack:!0,preventGoBack:!0},title:"关注公众号提示"},on:{"on-click-back":function(t){e.showSubscrible=!1,e.showAddBtn=e.canmaterial|e.canmaterialapprove}}}),e._v(" "),a("msg",{attrs:{title:"操作成功",description:"",buttons:e.subscribleBtns,icon:"success"}},[a("div",{attrs:{slot:"description"},slot:"description"},[a("span",[e._v("您可以关注公众号"),a("b",[e._v("“美丽乡村游”")]),e._v("实时获取审批单最新状态!")]),e._v(" "),a("x-img",{attrs:{src:"./static/img/qrcode.jpg","default-src":"./static/img/qrcode.jpg"}})],1)])],1)],1),e._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("previewer",{ref:"detailpreviewer",attrs:{list:e.billResult}})],1)],2)},staticRenderFns:[]};var X=a("./node_modules/vue-loader/lib/component-normalizer.js")(G,K,!1,function(e){a('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"sourceMap":false}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-73ecf451","scoped":true,"hasInlineConfig":false}!./node_modules/vux-loader/src/style-loader.js!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/MaterialEnter.vue')},"data-v-73ecf451",null);t.default=X.exports}});