---
title: 5月29日整理
---

## fiddler抓包手机app及其微信小程序请求

参考文档： https://www.jianshu.com/p/b0344958186f

需要注意两点：
1. fiddler安装在windows上，而被抓包的手机可以是任意手机，不管是Android 的还是苹果的。
2. 苹果的注意以下几步：
2.1 设置WiFi手动代理；
2.2 下载fiddler证书；
2.3 描述文件证书验证，通用 - 描述文件与设备管理 - DO_NOT_TRUEST_FIDDLERROOT;
2.4 证书设置信任， 这一部分也是重要的一步，不少人就是因为没设置为受信任的证书而失败的
设置-通用-关于本机-证书信任设置；

如下为一个成功抓包的请求：
```
GET https://geque.yzzisha.com/guifan/api/index.php?m=home&c=User&a=getIndex1&page=1&pageSize=20&class_id=132&keyword= HTTP/1.1
Host: geque.yzzisha.com
Content-Type: application/json
Connection: keep-alive
Accept: */*
User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/7.0.4(0x17000428) NetType/WIFI Language/zh_CN
Referer: https://servicewechat.com/wx930cfdbaa071134a/12/page-frame.html
Accept-Language: zh-cn
Accept-Encoding: br, gzip, deflate


```

## Unable to obtain LocalDateTime from TemporalAccessor: {},ISO resolved to 2018-04-30 of type java.tim

> 原因日期格式的时间不能转化为LocalDateTime

可采用如下方法解决：

```java
   public static LocalDateTime parseDate(String dateStr) {
        DateTimeFormatter baseDateTimeFormatter = DateTimeFormatter.ofPattern("yyyy-MM-dd");

        DateTimeFormatter dateTimeFormatter = new DateTimeFormatterBuilder().append(baseDateTimeFormatter)
                .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)
                .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)
                .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0)
                .toFormatter();
        return LocalDateTime.parse(dateStr, dateTimeFormatter);
    }
```

## mysql快速重命名数据库名称

> 参考文档: [How to Rename a Database in MySQL](https://chartio.com/resources/tutorials/how-to-rename-a-database-in-mysql/)

```bash
-- 数据库数据导入
# mysqldump -u root -p"m6s1l@#2!" -R bestphoto > bestphoto.sql
# mysqladmin -u root -p"m6s1l@#2!" create yitieyilu_bp
# mysql -u root -p"m6s1l@#2!" yitieyilu_bp < bestphoto.sql

-- 用户权限赋予
# mysql -u root -p"m6s1l@#2!";
> GRANT ALL PRIVILEGES ON yitieyilu_bp.* TO 'syscorer'@'%'; 
> GRANT EXECUTE ON PROCEDURE yitieyilu_bp.* TO 'syscorer'@'%'; 
> flush privileges;

# -------------------------------------------------------------------
# mysqldump -u root -p"m6s1l@#2!" -R yanzhi > yanzhi.sql
# mysqladmin -u root -p"m6s1l@#2!" create yitieyilu_vrpano
# mysql -u root -p"m6s1l@#2!" yitieyilu_vrpano < yanzhi.sql

-- 用户权限赋予
# mysql -u root -p"m6s1l@#2!";
> GRANT ALL PRIVILEGES ON yitieyilu_vrpano.* TO 'syscorer'@'%'; 
> GRANT EXECUTE ON PROCEDURE yitieyilu_vrpano.* TO 'syscorer'@'%'; 
> flush privileges;

```

## mysql单索引和联合索引的区别

> 靠左原则

[参考文档](https://blog.csdn.net/Abysscarry/article/details/80792876)

索引如何建立，及其如何使用，参考： https://www.toutiao.com/i6695892976922526212/